# Neat Reader

<div align="center">

**ç®€æ´ä¼˜é›…çš„è·¨å¹³å°ç”µå­ä¹¦é˜…è¯»å™¨**

åŸºäº Electron + Vue 3 æ„å»ºï¼Œæ”¯æŒ EPUB å’Œ PDF æ ¼å¼

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Node](https://img.shields.io/badge/node-%3E%3D16.0.0-brightgreen.svg)](https://nodejs.org/)
[![Electron](https://img.shields.io/badge/electron-28%2B-blue.svg)](https://www.electronjs.org/)

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ) â€¢ [æ–‡æ¡£](#-æ–‡æ¡£)

</div>

---

## ğŸ“– ç®€ä»‹

Neat Reader æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æ¡Œé¢ç”µå­ä¹¦é˜…è¯»å™¨ï¼Œæä¾›æµç•…çš„é˜…è¯»ä½“éªŒå’Œå¼ºå¤§çš„äº‘åŒæ­¥åŠŸèƒ½ã€‚

**é¡¹ç›®èƒŒæ™¯**ï¼šæœ¬é¡¹ç›®å·²ä» Wails (Go) è¿ç§»åˆ° Electron (Node.js)ï¼Œå®Œç¾è§£å†³äº† EPUB iframe æ¸²æŸ“é—®é¢˜ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ“š **å¤šæ ¼å¼æ”¯æŒ** - EPUBã€PDF ç”µå­ä¹¦é˜…è¯»
- ğŸ¨ **é˜…è¯»ä½“éªŒ** - 4ç§ä¸»é¢˜ï¼ˆæµ…è‰²/æŠ¤çœ¼/ç»¿è‰²/æ·±è‰²ï¼‰ã€å­—ä½“è°ƒèŠ‚ã€äº®åº¦æ§åˆ¶
- ğŸ“Š **è¿›åº¦ç®¡ç†** - è‡ªåŠ¨ä¿å­˜é˜…è¯»è¿›åº¦ï¼Œæ”¯æŒä¹¦ç­¾å’Œç¬”è®°
- ğŸ·ï¸ **åˆ†ç±»ç®¡ç†** - è‡ªå®šä¹‰ä¹¦ç±åˆ†ç±»ï¼Œæ™ºèƒ½ç»„ç»‡

### äº‘ç«¯åŠŸèƒ½
- â˜ï¸ **ç™¾åº¦ç½‘ç›˜é›†æˆ** - OAuth 2.0 å®‰å…¨æˆæƒ
- ğŸ”„ **äº‘ç«¯åŒæ­¥** - ä¹¦ç±å’Œé˜…è¯»è¿›åº¦äº‘ç«¯å¤‡ä»½
- ğŸ“¥ **ä¸€é”®ä¸‹è½½** - äº‘ç«¯ä¹¦ç±å¿«é€Ÿä¸‹è½½åˆ°æœ¬åœ°

### æŠ€æœ¯äº®ç‚¹
- ğŸ’¾ **ç¦»çº¿å­˜å‚¨** - IndexedDB æœ¬åœ°æ•°æ®æŒä¹…åŒ–
- ğŸ”’ **å®‰å…¨è®¾è®¡** - Context Isolationã€Node Integration ç¦ç”¨
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - æ™ºèƒ½ç¼“å­˜ã€æ‡’åŠ è½½

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 16+ ([ä¸‹è½½](https://nodejs.org/))
- npm æˆ– yarn

### ä¸€é”®å®‰è£…ï¼ˆæ¨èï¼‰

**Windows:**
```cmd
install.bat
```

**macOS/Linux:**
```bash
chmod +x install.sh && ./install.sh
```

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨é…ç½®å›½å†…é•œåƒæºï¼Œè§£å†³ Electron ä¸‹è½½é—®é¢˜ã€‚

### å¯åŠ¨åº”ç”¨

```bash
npm run dev
```

åº”ç”¨ä¼šè‡ªåŠ¨æ‰“å¼€ï¼ŒåŒæ—¶å¯åŠ¨ï¼š
- å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼šhttp://localhost:5173
- åç«¯ API æœåŠ¡å™¨ï¼šhttp://localhost:3000

### æ‰‹åŠ¨å®‰è£…

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æ¨¡å¼
npm run dev
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ¡Œé¢æ¡†æ¶
- **Electron 28+** - è·¨å¹³å°æ¡Œé¢åº”ç”¨

### å‰ç«¯æŠ€æœ¯
- **Vue 3.5** - ç»„åˆå¼ API
- **TypeScript 5.6** - ç±»å‹å®‰å…¨
- **Pinia 2.2** - çŠ¶æ€ç®¡ç†
- **Vue Router 4.4** - è·¯ç”±ç®¡ç†
- **Vite 6** - æ„å»ºå·¥å…·
- **epub.js 0.3.93** - EPUB æ¸²æŸ“
- **pdf.js 5.4** - PDF æ¸²æŸ“
- **localforage 1.10** - æœ¬åœ°å­˜å‚¨

### åç«¯æŠ€æœ¯
- **Node.js + Express 4.18** - HTTP æœåŠ¡å™¨
- **Axios 1.6** - HTTP å®¢æˆ·ç«¯

## ğŸ“¦ å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰
npm run dev                 # å¯åŠ¨æ‰€æœ‰æœåŠ¡

# å•ç‹¬å¯åŠ¨
npm run dev:frontend        # å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev:backend         # åç«¯ API æœåŠ¡å™¨
npm run dev:electron        # Electron çª—å£

# æ„å»ºåº”ç”¨
npm run build               # æ„å»ºæ‰€æœ‰å¹³å°
npm run build:win           # Windows
npm run build:mac           # macOS
npm run build:linux         # Linux

# å…¶ä»–å‘½ä»¤
cd frontend && npm run typecheck  # TypeScript ç±»å‹æ£€æŸ¥
node scripts/check-env.js         # ç¯å¢ƒæ£€æŸ¥
```

æ„å»ºäº§ç‰©ä½äº `dist-electron/` ç›®å½•ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
neat-reader/
â”œâ”€â”€ electron/              # Electron ä¸»è¿›ç¨‹
â”‚   â”œâ”€â”€ main.js           # åº”ç”¨å…¥å£ã€çª—å£ç®¡ç†
â”‚   â”œâ”€â”€ preload.js        # å®‰å…¨é€šä¿¡æ¡¥æ¢
â”‚   â””â”€â”€ menu.js           # åº”ç”¨èœå•
â”œâ”€â”€ backend/              # Express åç«¯æœåŠ¡
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ server.js     # HTTP æœåŠ¡å™¨
â”‚       â”œâ”€â”€ routes/       # API è·¯ç”±
â”‚       â””â”€â”€ services/     # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ frontend/             # Vue 3 å‰ç«¯åº”ç”¨
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ pages/        # é¡µé¢ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ Home/     # é¦–é¡µï¼ˆä¹¦æ¶ï¼‰
â”‚       â”‚   â”œâ”€â”€ Reader/   # é˜…è¯»å™¨
â”‚       â”‚   â””â”€â”€ Settings/ # è®¾ç½®
â”‚       â”œâ”€â”€ stores/       # Pinia çŠ¶æ€ç®¡ç†
â”‚       â”œâ”€â”€ api/          # API å°è£…
â”‚       â””â”€â”€ components/   # å…¬å…±ç»„ä»¶
â””â”€â”€ package.json          # æ ¹é¡¹ç›®é…ç½®
```

## ğŸ”§ ç™¾åº¦ç½‘ç›˜æˆæƒ

### è·å–æˆæƒ

1. åœ¨åº”ç”¨"è®¾ç½®"é¡µé¢ç‚¹å‡»"è·å–æˆæƒ"
2. åœ¨å¼¹å‡ºçš„æˆæƒçª—å£ä¸­ç™»å½•ç™¾åº¦è´¦å·
3. æˆæƒæˆåŠŸåè‡ªåŠ¨è·å– token å¹¶è¿æ¥

### é»˜è®¤é…ç½®

åº”ç”¨ä½¿ç”¨ alist æä¾›çš„å…¬å…±æˆæƒæœåŠ¡ï¼š
- Client ID: `hq9yQ9w9kR4YHj1kyYafLygVocobh7Sf`
- Redirect URI: `https://alistgo.com/tool/baidu/callback`

### å–æ¶ˆæˆæƒ

åœ¨è®¾ç½®é¡µé¢ç‚¹å‡»"å–æ¶ˆæˆæƒ"å³å¯æ–­å¼€è¿æ¥ã€‚

## ğŸ› å¸¸è§é—®é¢˜

### Electron ä¸‹è½½å¤±è´¥

**é—®é¢˜**ï¼š`npm install` æ—¶ Electron ä¸‹è½½è¶…æ—¶æˆ–å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ–¹æ¡ˆ 1ï¼šä½¿ç”¨å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰
install.bat  # Windows
./install.sh # macOS/Linux

# æ–¹æ¡ˆ 2ï¼šæ‰‹åŠ¨é…ç½®é•œåƒ
npm config set electron_mirror https://npmmirror.com/mirrors/electron/
npm config set registry https://registry.npmmirror.com
npm install

# æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ cnpm
npm install -g cnpm --registry=https://registry.npmmirror.com
cnpm install
```

### ç«¯å£è¢«å ç”¨

**é—®é¢˜**ï¼šå¯åŠ¨æ—¶æç¤ºç«¯å£ 3000 æˆ– 5173 è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# Windows
netstat -ano | findstr :3000
taskkill /PID <è¿›ç¨‹ID> /F

# macOS/Linux
lsof -i :3000
kill -9 <è¿›ç¨‹ID>
```

æˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£å·ï¼š
- åç«¯ï¼š`backend/src/server.js`
- å‰ç«¯ï¼š`frontend/vite.config.ts`

### çª—å£æ˜¾ç¤ºç©ºç™½

**é—®é¢˜**ï¼šElectron çª—å£å¯åŠ¨ä½†æ˜¾ç¤ºç©ºç™½

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿å‰ç«¯æœåŠ¡å™¨æ­£å¸¸è¿è¡Œï¼ˆhttp://localhost:5173ï¼‰
2. æŒ‰ `Ctrl+Shift+I` æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹é”™è¯¯
3. å°è¯•åˆ·æ–°ï¼š`Ctrl+R` (Windows) æˆ– `Cmd+R` (Mac)

## ğŸ“š æ–‡æ¡£

- [æ„å»ºæŒ‡å—](./BUILD_GUIDE.md) - è¯¦ç»†çš„æ„å»ºå’Œæ‰“åŒ…è¯´æ˜
- [ç«¯å£é…ç½®](./docs/PORT_CONFIG.md) - ç«¯å£é…ç½®æ–‡æ¡£

## ğŸ”„ æ¶æ„è¯´æ˜

### ä¸ºä»€ä¹ˆè¿ç§»åˆ° Electronï¼Ÿ

**æ ¸å¿ƒåŸå› **ï¼šWails ç¯å¢ƒä¸­ epub.js çš„ iframe æ¸²æŸ“å­˜åœ¨é—®é¢˜

**è¿ç§»æ”¶ç›Š**ï¼š
- âœ… EPUB æ¸²æŸ“é—®é¢˜å®Œç¾è§£å†³
- âœ… æŠ€æœ¯æ ˆç»Ÿä¸€ï¼ˆå…¨ JavaScript/TypeScriptï¼‰
- âœ… å¼€å‘ä½“éªŒæå‡ï¼ˆChrome DevToolsï¼‰
- âœ… ç”Ÿæ€ç³»ç»Ÿæˆç†Ÿ

**æƒè¡¡**ï¼š
- âš ï¸ æ‰“åŒ…ä½“ç§¯å¢åŠ ï¼ˆ~50MB â†’ ~150MBï¼‰
- âš ï¸ å†…å­˜å ç”¨å¢åŠ ï¼ˆ~50MB â†’ ~150MBï¼‰

### ä¸‰å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Electron ä¸»è¿›ç¨‹ (main.js)         â”‚
â”‚   - çª—å£ç®¡ç†                         â”‚
â”‚   - ç³»ç»Ÿäº¤äº’                         â”‚
â”‚   - å¯åŠ¨åç«¯æœåŠ¡å™¨                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                 â”‚
           â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vue 3 å‰ç«¯      â”‚  â”‚  Express åç«¯    â”‚
â”‚  - ç”¨æˆ·ç•Œé¢      â”‚  â”‚  - HTTP API      â”‚
â”‚  - äº¤äº’é€»è¾‘      â”‚  â”‚  - ç™¾åº¦ç½‘ç›˜é›†æˆ  â”‚
â”‚  - çŠ¶æ€ç®¡ç†      â”‚  â”‚  - ä¸šåŠ¡é€»è¾‘      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” å®‰å…¨æ€§

- âœ… **Context Isolation** - å‰ç«¯å’Œä¸»è¿›ç¨‹å®Œå…¨éš”ç¦»
- âœ… **Node Integration ç¦ç”¨** - é˜²æ­¢å‰ç«¯ç›´æ¥è®¿é—® Node.js
- âœ… **Preload è„šæœ¬** - åªé€šè¿‡ contextBridge æš´éœ²å¿…è¦ API
- âœ… **æœ¬åœ° API** - åç«¯åªç›‘å¬ localhostï¼Œä¸å¯¹å¤–æš´éœ²

## ğŸš§ å¼€å‘è·¯çº¿

- [ ] è‡ªåŠ¨æ›´æ–°åŠŸèƒ½
- [ ] æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–
- [ ] æ›´å¤šç”µå­ä¹¦æ ¼å¼ï¼ˆMOBIã€AZW3ï¼‰
- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] æ€§èƒ½ä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

æ„Ÿè°¢åŸ Wails ç‰ˆæœ¬çš„å¼€å‘å·¥ä½œï¼Œä¸ºæœ¬æ¬¡è¿ç§»æä¾›äº†åšå®åŸºç¡€ã€‚

---

<div align="center">

**å½“å‰ç‰ˆæœ¬**ï¼š1.0.0-electron  
**è¿ç§»æ—¥æœŸ**ï¼š2026-02-03  
**çŠ¶æ€**ï¼šâœ… åŸºç¡€æ¶æ„å®Œæˆ

Made with â¤ï¸ by Neat Reader Team

</div>
