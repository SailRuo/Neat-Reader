import{s as K,u as P,Q as d,F as D,w as Q,l as u,z as t,r as i,y as W,c as H,a as p,L as S,b as T,K as w,R as X,N as v,d as k,W as A}from"./index-BXAhAS9o.js";import{r as G}from"./dayjs.min-Dib4ouKk-Bg5S4in8.js";import{j as J}from"./ebook-Bqqd_rdk-ozmTfELU.js";const O={class:"file-manager"},U={class:"header"},V={class:"header-actions"},Z={class:"main"},q={class:"file-manager-container"},ee={class:"path-nav"},ae=["disabled"],te={class:"current-path"},le={class:"file-list-container"},ie={class:"file-list-header"},se={class:"section-title"},oe={class:"file-type-filter"},ne={class:"file-list"},re=["onClick"],ce={class:"file-icon"},de={class:"file-info"},ue={class:"file-name"},pe={class:"file-meta"},ve={class:"file-date"},fe={class:"file-actions"},ye=["onClick","disabled"],be={key:0,class:"empty-state"},me={class:"empty-icon"},he=P({__name:"index",setup(De){const y=J(),o=d("local"),n=d("/"),s=d("all"),b=d([]),c=d(!1),x=D(()=>n.value==="/"),m=D(()=>b.value.filter(e=>e.isDirectory||s.value==="all"?!0:e.name.toLowerCase().endsWith("."+s.value))),C=[{id:"1",name:"ä¹¦ç±",isDirectory:!0,path:"/books",size:0,lastModified:Date.now()-36e5},{id:"2",name:"JavaScripté«˜çº§ç¨‹åºè®¾è®¡.pdf",isDirectory:!1,path:"/js-advanced.pdf",size:1024*1024*5,lastModified:Date.now()-864e5},{id:"3",name:"Vue.jsè®¾è®¡ä¸å®ç°.epub",isDirectory:!1,path:"/vue-design.epub",size:1024*1024*3,lastModified:Date.now()-1728e5},{id:"4",name:"æµ‹è¯•æ–‡æœ¬.txt",isDirectory:!1,path:"/test.txt",size:1024*100,lastModified:Date.now()-2592e5}],z=[{id:"5",name:"NeatReader",isDirectory:!0,path:"/NeatReader",size:0,lastModified:Date.now()-36e5},{id:"6",name:"epub",isDirectory:!0,path:"/NeatReader/epub",size:0,lastModified:Date.now()-72e5},{id:"7",name:"pdf",isDirectory:!0,path:"/NeatReader/pdf",size:0,lastModified:Date.now()-72e5},{id:"8",name:"txt",isDirectory:!0,path:"/NeatReader/txt",size:0,lastModified:Date.now()-72e5},{id:"9",name:"æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ.pdf",isDirectory:!1,path:"/NeatReader/pdf/csapp.pdf",size:1024*1024*8,lastModified:Date.now()-864e5}],M=()=>{o.value=o.value==="local"?"baidupan":"local",n.value="/",f()},f=()=>{console.log(`åŠ è½½${o.value}æ–‡ä»¶: ${n.value}`),b.value=o.value==="local"?C:z},g=()=>{if(n.value==="/")return;const e=n.value.split("/").filter(Boolean);e.pop(),n.value="/"+e.join("/"),f()},F=e=>{n.value=e.path,f()},N=e=>{console.log("é€‰æ‹©æ–‡ä»¶:",e)},R=async e=>{try{c.value=!0,console.log("å¯¼å…¥æ–‡ä»¶:",e);const a=new File([""],e.name,{type:_(e.name)}),r=await y.importEbookFile(a);alert(r?`å·²æˆåŠŸå¯¼å…¥æ–‡ä»¶: ${r.title}`:"å¯¼å…¥æ–‡ä»¶å¤±è´¥")}catch(a){console.error("å¯¼å…¥æ–‡ä»¶å¤±è´¥:",a),alert("å¯¼å…¥æ–‡ä»¶å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{c.value=!1}},_=e=>{var a;switch(((a=e.split(".").pop())==null?void 0:a.toLowerCase())||""){case"epub":return"application/epub+zip";case"pdf":return"application/pdf";case"txt":return"text/plain";default:return"application/octet-stream"}},h=d(null),B=()=>{var e;(e=h.value)==null||e.click()},L=async e=>{const a=e.target.files;if(a&&a.length>0)for(let r=0;r<a.length;r++)await j(a[r])},j=async e=>{try{c.value=!0,console.log("å¯¼å…¥ä¸Šä¼ çš„æ–‡ä»¶:",e.name);const a=await y.importEbookFile(e);alert(a?`å·²æˆåŠŸå¯¼å…¥æ–‡ä»¶: ${a.title}`:"å¯¼å…¥æ–‡ä»¶å¤±è´¥")}catch(a){console.error("å¯¼å…¥æ–‡ä»¶å¤±è´¥:",a),alert("å¯¼å…¥æ–‡ä»¶å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{c.value=!1}},$=e=>{var a;switch(((a=e.name.split(".").pop())==null?void 0:a.toLowerCase())||""){case"epub":return"ğŸ“š";case"pdf":return"ğŸ“„";case"txt":return"ğŸ“";default:return"ğŸ“„"}},E=e=>e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":e<1024*1024*1024?(e/(1024*1024)).toFixed(1)+" MB":(e/(1024*1024*1024)).toFixed(1)+" GB",Y=e=>G(e).format("YYYY-MM-DD HH:mm");return Q(async()=>{await y.initialize(),f()}),(e,a)=>{const r=X("router-link");return v(),u("div",O,[t("header",U,[a[5]||(a[5]=t("h1",{class:"title"},"æ–‡ä»¶ç®¡ç†",-1)),t("div",V,[t("button",{class:"btn btn-primary",onClick:B}," ğŸ“ ä¸Šä¼ æ–‡ä»¶ "),t("button",{class:"btn btn-secondary",onClick:M},i(o.value==="local"?"æœ¬åœ°æ–‡ä»¶":"ç™¾åº¦ç½‘ç›˜"),1),W(r,{to:"/",class:"btn btn-secondary"},{default:H(()=>[...a[4]||(a[4]=[k(" â† è¿”å› ",-1)])]),_:1}),t("input",{ref_key:"fileInput",ref:h,type:"file",multiple:"",accept:".epub,.pdf,.txt",style:{display:"none"},onChange:L},null,544)])]),t("main",Z,[t("div",q,[t("div",ee,[t("button",{class:"btn btn-secondary",onClick:g,disabled:x.value}," â†‘ ä¸Šä¸€çº§ ",8,ae),t("span",te,i(n.value),1)]),t("div",le,[t("div",ie,[t("h2",se,i(o.value==="local"?"æœ¬åœ°æ–‡ä»¶":"ç™¾åº¦ç½‘ç›˜æ–‡ä»¶"),1),t("div",oe,[t("button",{class:p(["btn btn-secondary",{active:s.value==="all"}]),onClick:a[0]||(a[0]=l=>s.value="all")}," å…¨éƒ¨ ",2),t("button",{class:p(["btn btn-secondary",{active:s.value==="epub"}]),onClick:a[1]||(a[1]=l=>s.value="epub")}," EPUB ",2),t("button",{class:p(["btn btn-secondary",{active:s.value==="pdf"}]),onClick:a[2]||(a[2]=l=>s.value="pdf")}," PDF ",2),t("button",{class:p(["btn btn-secondary",{active:s.value==="txt"}]),onClick:a[3]||(a[3]=l=>s.value="txt")}," TXT ",2)])]),t("div",ne,[(v(!0),u(S,null,T(m.value,l=>(v(),u("div",{key:l.id||l.path,class:p(["file-item",{directory:l.isDirectory}]),onClick:I=>l.isDirectory?F(l):N(l)},[t("div",ce,i(l.isDirectory?"ğŸ“":$(l)),1),t("div",de,[t("div",ue,i(l.name),1),t("div",pe,[k(i(l.isDirectory?"ç›®å½•":E(l.size))+" ",1),t("span",ve,i(Y(l.lastModified)),1)])]),t("div",fe,[l.isDirectory?w("",!0):(v(),u("button",{key:0,class:"btn btn-primary",onClick:A(I=>R(l),["stop"]),disabled:c.value},i(c.value?"å¯¼å…¥ä¸­...":"å¯¼å…¥"),9,ye))])],10,re))),128))]),m.value.length===0?(v(),u("div",be,[t("div",me,i(o.value==="local"?"ğŸ’»":"â˜ï¸"),1),t("h3",null,i(o.value==="local"?"æœ¬åœ°æ²¡æœ‰æ–‡ä»¶":"ç™¾åº¦ç½‘ç›˜æ²¡æœ‰æ–‡ä»¶"),1),t("p",null,i(o.value==="local"?"è¯·æµè§ˆåˆ°åŒ…å«ç”µå­ä¹¦çš„æ–‡ä»¶å¤¹":"è¯·ä¸Šä¼ ç”µå­ä¹¦åˆ°ç™¾åº¦ç½‘ç›˜"),1)])):w("",!0)])])])])}}}),Ce=K(he,[["__scopeId","data-v-6c85d198"]]);export{Ce as default};
