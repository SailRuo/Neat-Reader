import{s as w,u as p,Q as r,w as v,l as s,z as n,r as i,M as b,N as c}from"./index-BXAhAS9o.js";const g={class:"callback"},h={class:"callback-content"},m=p({__name:"index",setup(y){const t=b(),a=r("loading"),o=r("正在处理授权，请稍候..."),d=async()=>{try{const e=new URLSearchParams(window.location.search).get("code");if(!e)throw new Error("未获取到授权码");window.opener?window.opener.postMessage({code:e},window.location.origin):window.parent!==window?window.parent.postMessage({code:e},window.location.origin):localStorage.setItem("baidupan_auth_code",e),a.value="success",o.value="授权成功！窗口将在3秒后自动关闭...",setTimeout(()=>{l()},3e3)}catch(e){console.error("处理授权回调失败:",e),a.value="error",o.value=`授权失败: ${e instanceof Error?e.message:"未知错误"}`}},l=()=>{window.opener?window.close():t.push("/")},u=()=>{t.push("/")};return v(()=>{d()}),(e,k)=>(c(),s("div",g,[n("div",h,[n("h1",null,i(a.value==="loading"?"处理中...":a.value==="success"?"授权成功":"授权失败"),1),n("p",null,i(o.value),1),a.value==="success"?(c(),s("button",{key:0,class:"btn btn-primary",onClick:l}," 关闭窗口 ")):(c(),s("button",{key:1,class:"btn btn-secondary",onClick:u}," 返回首页 "))])]))}}),f=w(m,[["__scopeId","data-v-3de8a75d"]]);export{f as default};
