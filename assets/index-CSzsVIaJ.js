import{d as P,o as T,c as u,a as t,t as i,e as V,f as U,n as p,F as Y,r as H,g as b,j as d,k,l as q,q as v,m as D,h as G,_ as J}from"./index-DmZ-yhyG.js";import{d as K}from"./dayjs.min-Bkmd2vWS.js";import{u as W}from"./ebook-DPib_uvh.js";const X={class:"file-manager"},A={class:"header"},O={class:"header-actions"},Q={class:"main"},Z={class:"file-manager-container"},ee={class:"path-nav"},te=["disabled"],ae={class:"current-path"},se={class:"file-list-container"},oe={class:"file-list-header"},ie={class:"section-title"},ne={class:"file-type-filter"},le={class:"file-list"},re=["onClick"],ce={class:"file-icon"},de={class:"file-info"},ue={class:"file-name"},pe={class:"file-meta"},ve={class:"file-date"},fe={class:"file-actions"},me=["onClick","disabled"],_e={key:0,class:"empty-state"},ye={class:"empty-icon"},he=P({__name:"index",setup(be){const m=W(),l=d("local"),r=d("/"),n=d("all"),_=d([]),c=d(!1),g=k(()=>r.value==="/"),y=k(()=>_.value.filter(e=>e.isDirectory||n.value==="all"?!0:e.name.toLowerCase().endsWith("."+n.value))),x=[{id:"1",name:"ä¹¦ç±",isDirectory:!0,path:"/books",size:0,lastModified:Date.now()-36e5},{id:"2",name:"JavaScripté«˜çº§ç¨‹åºè®¾è®¡.pdf",isDirectory:!1,path:"/js-advanced.pdf",size:1024*1024*5,lastModified:Date.now()-864e5},{id:"3",name:"Vue.jsè®¾è®¡ä¸å®ç°.epub",isDirectory:!1,path:"/vue-design.epub",size:1024*1024*3,lastModified:Date.now()-1728e5},{id:"4",name:"æµ‹è¯•æ–‡æœ¬.txt",isDirectory:!1,path:"/test.txt",size:1024*100,lastModified:Date.now()-2592e5}],F=[{id:"5",name:"NeatReader",isDirectory:!0,path:"/NeatReader",size:0,lastModified:Date.now()-36e5},{id:"6",name:"epub",isDirectory:!0,path:"/NeatReader/epub",size:0,lastModified:Date.now()-72e5},{id:"7",name:"pdf",isDirectory:!0,path:"/NeatReader/pdf",size:0,lastModified:Date.now()-72e5},{id:"8",name:"txt",isDirectory:!0,path:"/NeatReader/txt",size:0,lastModified:Date.now()-72e5},{id:"9",name:"æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ.pdf",isDirectory:!1,path:"/NeatReader/pdf/csapp.pdf",size:1024*1024*8,lastModified:Date.now()-864e5}],w=()=>{l.value=l.value==="local"?"baidupan":"local",r.value="/",f()},f=()=>{console.log(`åŠ è½½${l.value}æ–‡ä»¶: ${r.value}`),_.value=l.value==="local"?x:F},C=()=>{if(r.value==="/")return;const e=r.value.split("/").filter(Boolean);e.pop(),r.value="/"+e.join("/"),f()},M=e=>{r.value=e.path,f()},B=e=>{console.log("é€‰æ‹©æ–‡ä»¶:",e)},N=async e=>{try{c.value=!0,console.log("å¯¼å…¥æ–‡ä»¶:",e);const a=new File([""],e.name,{type:$(e.name)}),o=await m.importEbookFile(a);alert(o?`å·²æˆåŠŸå¯¼å…¥æ–‡ä»¶: ${o.title}`:"å¯¼å…¥æ–‡ä»¶å¤±è´¥")}catch(a){console.error("å¯¼å…¥æ–‡ä»¶å¤±è´¥:",a),alert("å¯¼å…¥æ–‡ä»¶å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{c.value=!1}},$=e=>{var o;switch(((o=e.split(".").pop())==null?void 0:o.toLowerCase())||""){case"epub":return"application/epub+zip";case"pdf":return"application/pdf";case"txt":return"text/plain";default:return"application/octet-stream"}},h=d(null),z=()=>{var e;(e=h.value)==null||e.click()},R=async e=>{const o=e.target.files;if(o&&o.length>0)for(let s=0;s<o.length;s++)await S(o[s])},S=async e=>{try{c.value=!0,console.log("å¯¼å…¥ä¸Šä¼ çš„æ–‡ä»¶:",e.name);const a=await m.importEbookFile(e);alert(a?`å·²æˆåŠŸå¯¼å…¥æ–‡ä»¶: ${a.title}`:"å¯¼å…¥æ–‡ä»¶å¤±è´¥")}catch(a){console.error("å¯¼å…¥æ–‡ä»¶å¤±è´¥:",a),alert("å¯¼å…¥æ–‡ä»¶å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{c.value=!1}},j=e=>{var o;switch(((o=e.name.split(".").pop())==null?void 0:o.toLowerCase())||""){case"epub":return"ğŸ“š";case"pdf":return"ğŸ“„";case"txt":return"ğŸ“";default:return"ğŸ“„"}},E=e=>e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":e<1024*1024*1024?(e/(1024*1024)).toFixed(1)+" MB":(e/(1024*1024*1024)).toFixed(1)+" GB",I=e=>K(e).format("YYYY-MM-DD HH:mm");return T(async()=>{await m.initialize(),f()}),(e,a)=>{const o=q("router-link");return v(),u("div",X,[t("header",A,[a[5]||(a[5]=t("h1",{class:"title"},"æ–‡ä»¶ç®¡ç†",-1)),t("div",O,[t("button",{class:"btn btn-primary",onClick:z}," ğŸ“ ä¸Šä¼ æ–‡ä»¶ "),t("button",{class:"btn btn-secondary",onClick:w},i(l.value==="local"?"æœ¬åœ°æ–‡ä»¶":"ç™¾åº¦ç½‘ç›˜"),1),V(o,{to:"/",class:"btn btn-secondary"},{default:U(()=>[...a[4]||(a[4]=[D(" â† è¿”å› ",-1)])]),_:1}),t("input",{ref_key:"fileInput",ref:h,type:"file",multiple:"",accept:".epub,.pdf,.txt",style:{display:"none"},onChange:R},null,544)])]),t("main",Q,[t("div",Z,[t("div",ee,[t("button",{class:"btn btn-secondary",onClick:C,disabled:g.value}," â†‘ ä¸Šä¸€çº§ ",8,te),t("span",ae,i(r.value),1)]),t("div",se,[t("div",oe,[t("h2",ie,i(l.value==="local"?"æœ¬åœ°æ–‡ä»¶":"ç™¾åº¦ç½‘ç›˜æ–‡ä»¶"),1),t("div",ne,[t("button",{class:p(["btn btn-secondary",{active:n.value==="all"}]),onClick:a[0]||(a[0]=s=>n.value="all")}," å…¨éƒ¨ ",2),t("button",{class:p(["btn btn-secondary",{active:n.value==="epub"}]),onClick:a[1]||(a[1]=s=>n.value="epub")}," EPUB ",2),t("button",{class:p(["btn btn-secondary",{active:n.value==="pdf"}]),onClick:a[2]||(a[2]=s=>n.value="pdf")}," PDF ",2),t("button",{class:p(["btn btn-secondary",{active:n.value==="txt"}]),onClick:a[3]||(a[3]=s=>n.value="txt")}," TXT ",2)])]),t("div",le,[(v(!0),u(Y,null,H(y.value,s=>(v(),u("div",{key:s.id||s.path,class:p(["file-item",{directory:s.isDirectory}]),onClick:L=>s.isDirectory?M(s):B(s)},[t("div",ce,i(s.isDirectory?"ğŸ“":j(s)),1),t("div",de,[t("div",ue,i(s.name),1),t("div",pe,[D(i(s.isDirectory?"ç›®å½•":E(s.size))+" ",1),t("span",ve,i(I(s.lastModified)),1)])]),t("div",fe,[s.isDirectory?b("",!0):(v(),u("button",{key:0,class:"btn btn-primary",onClick:G(L=>N(s),["stop"]),disabled:c.value},i(c.value?"å¯¼å…¥ä¸­...":"å¯¼å…¥"),9,me))])],10,re))),128))]),y.value.length===0?(v(),u("div",_e,[t("div",ye,i(l.value==="local"?"ğŸ’»":"â˜ï¸"),1),t("h3",null,i(l.value==="local"?"æœ¬åœ°æ²¡æœ‰æ–‡ä»¶":"ç™¾åº¦ç½‘ç›˜æ²¡æœ‰æ–‡ä»¶"),1),t("p",null,i(l.value==="local"?"è¯·æµè§ˆåˆ°åŒ…å«ç”µå­ä¹¦çš„æ–‡ä»¶å¤¹":"è¯·ä¸Šä¼ ç”µå­ä¹¦åˆ°ç™¾åº¦ç½‘ç›˜"),1)])):b("",!0)])])])])}}}),xe=J(he,[["__scopeId","data-v-6c85d198"]]);export{xe as default};
