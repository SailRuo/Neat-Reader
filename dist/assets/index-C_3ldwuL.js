import{d as p,o as _,c as n,a as t,t as i,h as d,l as m,k as c,_ as h}from"./index-yGnCnEuY.js";const b={class:"callback"},g={class:"callback-content"},f=p({__name:"index",setup(v){const r=m(),e=d("loading"),a=d("正在处理授权，请稍候..."),u=async()=>{try{const s=new URLSearchParams(window.location.search).get("code");if(!s)throw new Error("未获取到授权码");window.opener?window.opener.postMessage({code:s},window.location.origin):window.parent!==window?window.parent.postMessage({code:s},window.location.origin):localStorage.setItem("baidupan_auth_code",s),e.value="success",a.value="授权成功！窗口将在3秒后自动关闭...",setTimeout(()=>{l()},3e3)}catch(o){console.error("处理授权回调失败:",o),e.value="error",a.value=`授权失败: ${o instanceof Error?o.message:"未知错误"}`}},l=()=>{window.opener?window.close():r.push("/")},w=()=>{r.push("/")};return _(()=>{u()}),(o,s)=>(c(),n("div",b,[t("div",g,[t("h1",null,i(e.value==="loading"?"处理中...":e.value==="success"?"授权成功":"授权失败"),1),t("p",null,i(a.value),1),e.value==="success"?(c(),n("button",{key:0,class:"btn btn-primary",onClick:l}," 关闭窗口 ")):(c(),n("button",{key:1,class:"btn btn-secondary",onClick:w}," 返回首页 "))])]))}}),y=h(f,[["__scopeId","data-v-7d51bdeb"]]);export{y as default};
