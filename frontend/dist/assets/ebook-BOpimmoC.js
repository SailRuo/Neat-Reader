import{J as Ua,r as Wt,e as fr}from"./index-xevC7b_N.js";var Ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ur(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Vt(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ii={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var En;function Ma(){return En||(En=1,(function(o,e){(function(t){o.exports=t()})(function(){return(function t(r,i,s){function n(c,d){if(!i[c]){if(!r[c]){var p=typeof Vt=="function"&&Vt;if(!d&&p)return p(c,!0);if(a)return a(c,!0);var b=new Error("Cannot find module '"+c+"'");throw b.code="MODULE_NOT_FOUND",b}var y=i[c]={exports:{}};r[c][0].call(y.exports,function(C){var w=r[c][1][C];return n(w||C)},y,y.exports,t,r,i,s)}return i[c].exports}for(var a=typeof Vt=="function"&&Vt,u=0;u<s.length;u++)n(s[u]);return n})({1:[function(t,r,i){(function(s){var n=s.MutationObserver||s.WebKitMutationObserver,a;if(n){var u=0,c=new n(C),d=s.document.createTextNode("");c.observe(d,{characterData:!0}),a=function(){d.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var p=new s.MessageChannel;p.port1.onmessage=C,a=function(){p.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var f=s.document.createElement("script");f.onreadystatechange=function(){C(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},s.document.documentElement.appendChild(f)}:a=function(){setTimeout(C,0)};var b,y=[];function C(){b=!0;for(var f,v,m=y.length;m;){for(v=y,y=[],f=-1;++f<m;)v[f]();m=y.length}b=!1}r.exports=w;function w(f){y.push(f)===1&&!b&&a()}}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,i){var s=t(1);function n(){}var a={},u=["REJECTED"],c=["FULFILLED"],d=["PENDING"];r.exports=p;function p(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,_!==n&&w(this,_)}p.prototype.catch=function(_){return this.then(null,_)},p.prototype.then=function(_,T){if(typeof _!="function"&&this.state===c||typeof T!="function"&&this.state===u)return this;var N=new this.constructor(n);if(this.state!==d){var O=this.state===c?_:T;y(N,O,this.outcome)}else this.queue.push(new b(N,_,T));return N};function b(_,T,N){this.promise=_,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},b.prototype.otherCallFulfilled=function(_){y(this.promise,this.onFulfilled,_)},b.prototype.callRejected=function(_){a.reject(this.promise,_)},b.prototype.otherCallRejected=function(_){y(this.promise,this.onRejected,_)};function y(_,T,N){s(function(){var O;try{O=T(N)}catch(R){return a.reject(_,R)}O===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,O)})}a.resolve=function(_,T){var N=f(C,T);if(N.status==="error")return a.reject(_,N.value);var O=N.value;if(O)w(_,O);else{_.state=c,_.outcome=T;for(var R=-1,B=_.queue.length;++R<B;)_.queue[R].callFulfilled(T)}return _},a.reject=function(_,T){_.state=u,_.outcome=T;for(var N=-1,O=_.queue.length;++N<O;)_.queue[N].callRejected(T);return _};function C(_){var T=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof T=="function")return function(){T.apply(_,arguments)}}function w(_,T){var N=!1;function O(V){N||(N=!0,a.reject(_,V))}function R(V){N||(N=!0,a.resolve(_,V))}function B(){T(R,O)}var $=f(B);$.status==="error"&&O($.value)}function f(_,T){var N={};try{N.value=_(T),N.status="success"}catch(O){N.status="error",N.value=O}return N}p.resolve=v;function v(_){return _ instanceof this?_:a.resolve(new this(n),_)}p.reject=m;function m(_){var T=new this(n);return a.reject(T,_)}p.all=D;function D(_){var T=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=_.length,O=!1;if(!N)return this.resolve([]);for(var R=new Array(N),B=0,$=-1,V=new this(n);++$<N;)Y(_[$],$);return V;function Y(ie,se){T.resolve(ie).then(fe,function(ae){O||(O=!0,a.reject(V,ae))});function fe(ae){R[se]=ae,++B===N&&!O&&(O=!0,a.resolve(V,R))}}}p.race=I;function I(_){var T=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=_.length,O=!1;if(!N)return this.resolve([]);for(var R=-1,B=new this(n);++R<N;)$(_[R]);return B;function $(V){T.resolve(V).then(function(Y){O||(O=!0,a.resolve(B,Y))},function(Y){O||(O=!0,a.reject(B,Y))})}}},{1:1}],3:[function(t,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A};function n(A,F){if(!(A instanceof F))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function c(){try{if(!u||!u.open)return!1;var A=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),F=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!A||F)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(A,F){A=A||[],F=F||{};try{return new Blob(A,F)}catch(j){if(j.name!=="TypeError")throw j;for(var k=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,H=new k,Z=0;Z<A.length;Z+=1)H.append(A[Z]);return H.getBlob(F.type)}}typeof Promise>"u"&&t(3);var p=Promise;function b(A,F){F&&A.then(function(k){F(null,k)},function(k){F(k)})}function y(A,F,k){typeof F=="function"&&A.then(F),typeof k=="function"&&A.catch(k)}function C(A){return typeof A!="string"&&(console.warn(A+" used as a key, but it is not a string."),A=String(A)),A}function w(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",v=void 0,m={},D=Object.prototype.toString,I="readonly",_="readwrite";function T(A){for(var F=A.length,k=new ArrayBuffer(F),H=new Uint8Array(k),Z=0;Z<F;Z++)H[Z]=A.charCodeAt(Z);return k}function N(A){return new p(function(F){var k=A.transaction(f,_),H=d([""]);k.objectStore(f).put(H,"key"),k.onabort=function(Z){Z.preventDefault(),Z.stopPropagation(),F(!1)},k.oncomplete=function(){var Z=navigator.userAgent.match(/Chrome\/(\d+)/),j=navigator.userAgent.match(/Edge\//);F(j||!Z||parseInt(Z[1],10)>=43)}}).catch(function(){return!1})}function O(A){return typeof v=="boolean"?p.resolve(v):N(A).then(function(F){return v=F,v})}function R(A){var F=m[A.name],k={};k.promise=new p(function(H,Z){k.resolve=H,k.reject=Z}),F.deferredOperations.push(k),F.dbReady?F.dbReady=F.dbReady.then(function(){return k.promise}):F.dbReady=k.promise}function B(A){var F=m[A.name],k=F.deferredOperations.pop();if(k)return k.resolve(),k.promise}function $(A,F){var k=m[A.name],H=k.deferredOperations.pop();if(H)return H.reject(F),H.promise}function V(A,F){return new p(function(k,H){if(m[A.name]=m[A.name]||ce(),A.db)if(F)R(A),A.db.close();else return k(A.db);var Z=[A.name];F&&Z.push(A.version);var j=u.open.apply(u,Z);F&&(j.onupgradeneeded=function(re){var oe=j.result;try{oe.createObjectStore(A.storeName),re.oldVersion<=1&&oe.createObjectStore(f)}catch(le){if(le.name==="ConstraintError")console.warn('The database "'+A.name+'" has been upgraded from version '+re.oldVersion+" to version "+re.newVersion+', but the storage "'+A.storeName+'" already exists.');else throw le}}),j.onerror=function(re){re.preventDefault(),H(j.error)},j.onsuccess=function(){var re=j.result;re.onversionchange=function(oe){oe.target.close()},k(re),B(A)}})}function Y(A){return V(A,!1)}function ie(A){return V(A,!0)}function se(A,F){if(!A.db)return!0;var k=!A.db.objectStoreNames.contains(A.storeName),H=A.version<A.db.version,Z=A.version>A.db.version;if(H&&(A.version!==F&&console.warn('The database "'+A.name+`" can't be downgraded from version `+A.db.version+" to version "+A.version+"."),A.version=A.db.version),Z||k){if(k){var j=A.db.version+1;j>A.version&&(A.version=j)}return!0}return!1}function fe(A){return new p(function(F,k){var H=new FileReader;H.onerror=k,H.onloadend=function(Z){var j=btoa(Z.target.result||"");F({__local_forage_encoded_blob:!0,data:j,type:A.type})},H.readAsBinaryString(A)})}function ae(A){var F=T(atob(A.data));return d([F],{type:A.type})}function ee(A){return A&&A.__local_forage_encoded_blob}function pe(A){var F=this,k=F._initReady().then(function(){var H=m[F._dbInfo.name];if(H&&H.dbReady)return H.dbReady});return y(k,A,A),k}function Ce(A){R(A);for(var F=m[A.name],k=F.forages,H=0;H<k.length;H++){var Z=k[H];Z._dbInfo.db&&(Z._dbInfo.db.close(),Z._dbInfo.db=null)}return A.db=null,Y(A).then(function(j){return A.db=j,se(A)?ie(A):j}).then(function(j){A.db=F.db=j;for(var re=0;re<k.length;re++)k[re]._dbInfo.db=j}).catch(function(j){throw $(A,j),j})}function ue(A,F,k,H){H===void 0&&(H=1);try{var Z=A.db.transaction(A.storeName,F);k(null,Z)}catch(j){if(H>0&&(!A.db||j.name==="InvalidStateError"||j.name==="NotFoundError"))return p.resolve().then(function(){if(!A.db||j.name==="NotFoundError"&&!A.db.objectStoreNames.contains(A.storeName)&&A.version<=A.db.version)return A.db&&(A.version=A.db.version+1),ie(A)}).then(function(){return Ce(A).then(function(){ue(A,F,k,H-1)})}).catch(k);k(j)}}function ce(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ne(A){var F=this,k={db:null};if(A)for(var H in A)k[H]=A[H];var Z=m[k.name];Z||(Z=ce(),m[k.name]=Z),Z.forages.push(F),F._initReady||(F._initReady=F.ready,F.ready=pe);var j=[];function re(){return p.resolve()}for(var oe=0;oe<Z.forages.length;oe++){var le=Z.forages[oe];le!==F&&j.push(le._initReady().catch(re))}var he=Z.forages.slice(0);return p.all(j).then(function(){return k.db=Z.db,Y(k)}).then(function(ge){return k.db=ge,se(k,F._defaultConfig.version)?ie(k):ge}).then(function(ge){k.db=Z.db=ge,F._dbInfo=k;for(var _e=0;_e<he.length;_e++){var qe=he[_e];qe!==F&&(qe._dbInfo.db=k.db,qe._dbInfo.version=k.version)}})}function Ee(A,F){var k=this;A=C(A);var H=new p(function(Z,j){k.ready().then(function(){ue(k._dbInfo,I,function(re,oe){if(re)return j(re);try{var le=oe.objectStore(k._dbInfo.storeName),he=le.get(A);he.onsuccess=function(){var ge=he.result;ge===void 0&&(ge=null),ee(ge)&&(ge=ae(ge)),Z(ge)},he.onerror=function(){j(he.error)}}catch(ge){j(ge)}})}).catch(j)});return b(H,F),H}function Te(A,F){var k=this,H=new p(function(Z,j){k.ready().then(function(){ue(k._dbInfo,I,function(re,oe){if(re)return j(re);try{var le=oe.objectStore(k._dbInfo.storeName),he=le.openCursor(),ge=1;he.onsuccess=function(){var _e=he.result;if(_e){var qe=_e.value;ee(qe)&&(qe=ae(qe));var Qe=A(qe,_e.key,ge++);Qe!==void 0?Z(Qe):_e.continue()}else Z()},he.onerror=function(){j(he.error)}}catch(_e){j(_e)}})}).catch(j)});return b(H,F),H}function rt(A,F,k){var H=this;A=C(A);var Z=new p(function(j,re){var oe;H.ready().then(function(){return oe=H._dbInfo,D.call(F)==="[object Blob]"?O(oe.db).then(function(le){return le?F:fe(F)}):F}).then(function(le){ue(H._dbInfo,_,function(he,ge){if(he)return re(he);try{var _e=ge.objectStore(H._dbInfo.storeName);le===null&&(le=void 0);var qe=_e.put(le,A);ge.oncomplete=function(){le===void 0&&(le=null),j(le)},ge.onabort=ge.onerror=function(){var Qe=qe.error?qe.error:qe.transaction.error;re(Qe)}}catch(Qe){re(Qe)}})}).catch(re)});return b(Z,k),Z}function We(A,F){var k=this;A=C(A);var H=new p(function(Z,j){k.ready().then(function(){ue(k._dbInfo,_,function(re,oe){if(re)return j(re);try{var le=oe.objectStore(k._dbInfo.storeName),he=le.delete(A);oe.oncomplete=function(){Z()},oe.onerror=function(){j(he.error)},oe.onabort=function(){var ge=he.error?he.error:he.transaction.error;j(ge)}}catch(ge){j(ge)}})}).catch(j)});return b(H,F),H}function xe(A){var F=this,k=new p(function(H,Z){F.ready().then(function(){ue(F._dbInfo,_,function(j,re){if(j)return Z(j);try{var oe=re.objectStore(F._dbInfo.storeName),le=oe.clear();re.oncomplete=function(){H()},re.onabort=re.onerror=function(){var he=le.error?le.error:le.transaction.error;Z(he)}}catch(he){Z(he)}})}).catch(Z)});return b(k,A),k}function Ge(A){var F=this,k=new p(function(H,Z){F.ready().then(function(){ue(F._dbInfo,I,function(j,re){if(j)return Z(j);try{var oe=re.objectStore(F._dbInfo.storeName),le=oe.count();le.onsuccess=function(){H(le.result)},le.onerror=function(){Z(le.error)}}catch(he){Z(he)}})}).catch(Z)});return b(k,A),k}function Je(A,F){var k=this,H=new p(function(Z,j){if(A<0){Z(null);return}k.ready().then(function(){ue(k._dbInfo,I,function(re,oe){if(re)return j(re);try{var le=oe.objectStore(k._dbInfo.storeName),he=!1,ge=le.openKeyCursor();ge.onsuccess=function(){var _e=ge.result;if(!_e){Z(null);return}A===0||he?Z(_e.key):(he=!0,_e.advance(A))},ge.onerror=function(){j(ge.error)}}catch(_e){j(_e)}})}).catch(j)});return b(H,F),H}function Ie(A){var F=this,k=new p(function(H,Z){F.ready().then(function(){ue(F._dbInfo,I,function(j,re){if(j)return Z(j);try{var oe=re.objectStore(F._dbInfo.storeName),le=oe.openKeyCursor(),he=[];le.onsuccess=function(){var ge=le.result;if(!ge){H(he);return}he.push(ge.key),ge.continue()},le.onerror=function(){Z(le.error)}}catch(ge){Z(ge)}})}).catch(Z)});return b(k,A),k}function ze(A,F){F=w.apply(this,arguments);var k=this.config();A=typeof A!="function"&&A||{},A.name||(A.name=A.name||k.name,A.storeName=A.storeName||k.storeName);var H=this,Z;if(!A.name)Z=p.reject("Invalid arguments");else{var j=A.name===k.name&&H._dbInfo.db,re=j?p.resolve(H._dbInfo.db):Y(A).then(function(oe){var le=m[A.name],he=le.forages;le.db=oe;for(var ge=0;ge<he.length;ge++)he[ge]._dbInfo.db=oe;return oe});A.storeName?Z=re.then(function(oe){if(oe.objectStoreNames.contains(A.storeName)){var le=oe.version+1;R(A);var he=m[A.name],ge=he.forages;oe.close();for(var _e=0;_e<ge.length;_e++){var qe=ge[_e];qe._dbInfo.db=null,qe._dbInfo.version=le}var Qe=new p(function(tt,pt){var ft=u.open(A.name,le);ft.onerror=function(At){var cr=ft.result;cr.close(),pt(At)},ft.onupgradeneeded=function(){var At=ft.result;At.deleteObjectStore(A.storeName)},ft.onsuccess=function(){var At=ft.result;At.close(),tt(At)}});return Qe.then(function(tt){he.db=tt;for(var pt=0;pt<ge.length;pt++){var ft=ge[pt];ft._dbInfo.db=tt,B(ft._dbInfo)}}).catch(function(tt){throw($(A,tt)||p.resolve()).catch(function(){}),tt})}}):Z=re.then(function(oe){R(A);var le=m[A.name],he=le.forages;oe.close();for(var ge=0;ge<he.length;ge++){var _e=he[ge];_e._dbInfo.db=null}var qe=new p(function(Qe,tt){var pt=u.deleteDatabase(A.name);pt.onerror=function(){var ft=pt.result;ft&&ft.close(),tt(pt.error)},pt.onblocked=function(){console.warn('dropInstance blocked for database "'+A.name+'" until all open connections are closed')},pt.onsuccess=function(){var ft=pt.result;ft&&ft.close(),Qe(ft)}});return qe.then(function(Qe){le.db=Qe;for(var tt=0;tt<he.length;tt++){var pt=he[tt];B(pt._dbInfo)}}).catch(function(Qe){throw($(A,Qe)||p.resolve()).catch(function(){}),Qe})})}return b(Z,F),Z}var Le={_driver:"asyncStorage",_initStorage:Ne,_support:c(),iterate:Te,getItem:Ee,setItem:rt,removeItem:We,clear:xe,length:Ge,key:Je,keys:Ie,dropInstance:ze};function Ue(){return typeof openDatabase=="function"}var Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",He="~~local_forage_type~",je=/^~~local_forage_type~([^~]+)~/,st="__lfsc__:",U=st.length,P="arbf",W="blob",J="si08",Q="ui08",de="uic8",Ae="si16",Se="si32",De="ur16",Fe="ui32",Be="fl32",Xe="fl64",at=U+P.length,et=Object.prototype.toString;function Re(A){var F=A.length*.75,k=A.length,H,Z=0,j,re,oe,le;A[A.length-1]==="="&&(F--,A[A.length-2]==="="&&F--);var he=new ArrayBuffer(F),ge=new Uint8Array(he);for(H=0;H<k;H+=4)j=Ke.indexOf(A[H]),re=Ke.indexOf(A[H+1]),oe=Ke.indexOf(A[H+2]),le=Ke.indexOf(A[H+3]),ge[Z++]=j<<2|re>>4,ge[Z++]=(re&15)<<4|oe>>2,ge[Z++]=(oe&3)<<6|le&63;return he}function it(A){var F=new Uint8Array(A),k="",H;for(H=0;H<F.length;H+=3)k+=Ke[F[H]>>2],k+=Ke[(F[H]&3)<<4|F[H+1]>>4],k+=Ke[(F[H+1]&15)<<2|F[H+2]>>6],k+=Ke[F[H+2]&63];return F.length%3===2?k=k.substring(0,k.length-1)+"=":F.length%3===1&&(k=k.substring(0,k.length-2)+"=="),k}function gt(A,F){var k="";if(A&&(k=et.call(A)),A&&(k==="[object ArrayBuffer]"||A.buffer&&et.call(A.buffer)==="[object ArrayBuffer]")){var H,Z=st;A instanceof ArrayBuffer?(H=A,Z+=P):(H=A.buffer,k==="[object Int8Array]"?Z+=J:k==="[object Uint8Array]"?Z+=Q:k==="[object Uint8ClampedArray]"?Z+=de:k==="[object Int16Array]"?Z+=Ae:k==="[object Uint16Array]"?Z+=De:k==="[object Int32Array]"?Z+=Se:k==="[object Uint32Array]"?Z+=Fe:k==="[object Float32Array]"?Z+=Be:k==="[object Float64Array]"?Z+=Xe:F(new Error("Failed to get type for BinaryArray"))),F(Z+it(H))}else if(k==="[object Blob]"){var j=new FileReader;j.onload=function(){var re=He+A.type+"~"+it(this.result);F(st+W+re)},j.readAsArrayBuffer(A)}else try{F(JSON.stringify(A))}catch(re){console.error("Couldn't convert value into a JSON string: ",A),F(null,re)}}function S(A){if(A.substring(0,U)!==st)return JSON.parse(A);var F=A.substring(at),k=A.substring(U,at),H;if(k===W&&je.test(F)){var Z=F.match(je);H=Z[1],F=F.substring(Z[0].length)}var j=Re(F);switch(k){case P:return j;case W:return d([j],{type:H});case J:return new Int8Array(j);case Q:return new Uint8Array(j);case de:return new Uint8ClampedArray(j);case Ae:return new Int16Array(j);case De:return new Uint16Array(j);case Se:return new Int32Array(j);case Fe:return new Uint32Array(j);case Be:return new Float32Array(j);case Xe:return new Float64Array(j);default:throw new Error("Unkown type: "+k)}}var te={serialize:gt,deserialize:S,stringToBuffer:Re,bufferToString:it};function ne(A,F,k,H){A.executeSql("CREATE TABLE IF NOT EXISTS "+F.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],k,H)}function ye(A){var F=this,k={db:null};if(A)for(var H in A)k[H]=typeof A[H]!="string"?A[H].toString():A[H];var Z=new p(function(j,re){try{k.db=openDatabase(k.name,String(k.version),k.description,k.size)}catch(oe){return re(oe)}k.db.transaction(function(oe){ne(oe,k,function(){F._dbInfo=k,j()},function(le,he){re(he)})},re)});return k.serializer=te,Z}function z(A,F,k,H,Z,j){A.executeSql(k,H,Z,function(re,oe){oe.code===oe.SYNTAX_ERR?re.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[F.storeName],function(le,he){he.rows.length?j(le,oe):ne(le,F,function(){le.executeSql(k,H,Z,j)},j)},j):j(re,oe)},j)}function g(A,F){var k=this;A=C(A);var H=new p(function(Z,j){k.ready().then(function(){var re=k._dbInfo;re.db.transaction(function(oe){z(oe,re,"SELECT * FROM "+re.storeName+" WHERE key = ? LIMIT 1",[A],function(le,he){var ge=he.rows.length?he.rows.item(0).value:null;ge&&(ge=re.serializer.deserialize(ge)),Z(ge)},function(le,he){j(he)})})}).catch(j)});return b(H,F),H}function l(A,F){var k=this,H=new p(function(Z,j){k.ready().then(function(){var re=k._dbInfo;re.db.transaction(function(oe){z(oe,re,"SELECT * FROM "+re.storeName,[],function(le,he){for(var ge=he.rows,_e=ge.length,qe=0;qe<_e;qe++){var Qe=ge.item(qe),tt=Qe.value;if(tt&&(tt=re.serializer.deserialize(tt)),tt=A(tt,Qe.key,qe+1),tt!==void 0){Z(tt);return}}Z()},function(le,he){j(he)})})}).catch(j)});return b(H,F),H}function x(A,F,k,H){var Z=this;A=C(A);var j=new p(function(re,oe){Z.ready().then(function(){F===void 0&&(F=null);var le=F,he=Z._dbInfo;he.serializer.serialize(F,function(ge,_e){_e?oe(_e):he.db.transaction(function(qe){z(qe,he,"INSERT OR REPLACE INTO "+he.storeName+" (key, value) VALUES (?, ?)",[A,ge],function(){re(le)},function(Qe,tt){oe(tt)})},function(qe){if(qe.code===qe.QUOTA_ERR){if(H>0){re(x.apply(Z,[A,le,k,H-1]));return}oe(qe)}})})}).catch(oe)});return b(j,k),j}function M(A,F,k){return x.apply(this,[A,F,k,1])}function h(A,F){var k=this;A=C(A);var H=new p(function(Z,j){k.ready().then(function(){var re=k._dbInfo;re.db.transaction(function(oe){z(oe,re,"DELETE FROM "+re.storeName+" WHERE key = ?",[A],function(){Z()},function(le,he){j(he)})})}).catch(j)});return b(H,F),H}function q(A){var F=this,k=new p(function(H,Z){F.ready().then(function(){var j=F._dbInfo;j.db.transaction(function(re){z(re,j,"DELETE FROM "+j.storeName,[],function(){H()},function(oe,le){Z(le)})})}).catch(Z)});return b(k,A),k}function G(A){var F=this,k=new p(function(H,Z){F.ready().then(function(){var j=F._dbInfo;j.db.transaction(function(re){z(re,j,"SELECT COUNT(key) as c FROM "+j.storeName,[],function(oe,le){var he=le.rows.item(0).c;H(he)},function(oe,le){Z(le)})})}).catch(Z)});return b(k,A),k}function E(A,F){var k=this,H=new p(function(Z,j){k.ready().then(function(){var re=k._dbInfo;re.db.transaction(function(oe){z(oe,re,"SELECT key FROM "+re.storeName+" WHERE id = ? LIMIT 1",[A+1],function(le,he){var ge=he.rows.length?he.rows.item(0).key:null;Z(ge)},function(le,he){j(he)})})}).catch(j)});return b(H,F),H}function L(A){var F=this,k=new p(function(H,Z){F.ready().then(function(){var j=F._dbInfo;j.db.transaction(function(re){z(re,j,"SELECT key FROM "+j.storeName,[],function(oe,le){for(var he=[],ge=0;ge<le.rows.length;ge++)he.push(le.rows.item(ge).key);H(he)},function(oe,le){Z(le)})})}).catch(Z)});return b(k,A),k}function X(A){return new p(function(F,k){A.transaction(function(H){H.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Z,j){for(var re=[],oe=0;oe<j.rows.length;oe++)re.push(j.rows.item(oe).name);F({db:A,storeNames:re})},function(Z,j){k(j)})},function(H){k(H)})})}function be(A,F){F=w.apply(this,arguments);var k=this.config();A=typeof A!="function"&&A||{},A.name||(A.name=A.name||k.name,A.storeName=A.storeName||k.storeName);var H=this,Z;return A.name?Z=new p(function(j){var re;A.name===k.name?re=H._dbInfo.db:re=openDatabase(A.name,"","",0),A.storeName?j({db:re,storeNames:[A.storeName]}):j(X(re))}).then(function(j){return new p(function(re,oe){j.db.transaction(function(le){function he(Qe){return new p(function(tt,pt){le.executeSql("DROP TABLE IF EXISTS "+Qe,[],function(){tt()},function(ft,At){pt(At)})})}for(var ge=[],_e=0,qe=j.storeNames.length;_e<qe;_e++)ge.push(he(j.storeNames[_e]));p.all(ge).then(function(){re()}).catch(function(Qe){oe(Qe)})},function(le){oe(le)})})}):Z=p.reject("Invalid arguments"),b(Z,F),Z}var ve={_driver:"webSQLStorage",_initStorage:ye,_support:Ue(),iterate:l,getItem:g,setItem:M,removeItem:h,clear:q,length:G,key:E,keys:L,dropInstance:be};function me(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Oe(A,F){var k=A.name+"/";return A.storeName!==F.storeName&&(k+=A.storeName+"/"),k}function ut(){var A="_localforage_support_test";try{return localStorage.setItem(A,!0),localStorage.removeItem(A),!1}catch{return!0}}function Ye(){return!ut()||localStorage.length>0}function Pe(A){var F=this,k={};if(A)for(var H in A)k[H]=A[H];return k.keyPrefix=Oe(A,F._defaultConfig),Ye()?(F._dbInfo=k,k.serializer=te,p.resolve()):p.reject()}function Me(A){var F=this,k=F.ready().then(function(){for(var H=F._dbInfo.keyPrefix,Z=localStorage.length-1;Z>=0;Z--){var j=localStorage.key(Z);j.indexOf(H)===0&&localStorage.removeItem(j)}});return b(k,A),k}function ct(A,F){var k=this;A=C(A);var H=k.ready().then(function(){var Z=k._dbInfo,j=localStorage.getItem(Z.keyPrefix+A);return j&&(j=Z.serializer.deserialize(j)),j});return b(H,F),H}function ot(A,F){var k=this,H=k.ready().then(function(){for(var Z=k._dbInfo,j=Z.keyPrefix,re=j.length,oe=localStorage.length,le=1,he=0;he<oe;he++){var ge=localStorage.key(he);if(ge.indexOf(j)===0){var _e=localStorage.getItem(ge);if(_e&&(_e=Z.serializer.deserialize(_e)),_e=A(_e,ge.substring(re),le++),_e!==void 0)return _e}}});return b(H,F),H}function Pt(A,F){var k=this,H=k.ready().then(function(){var Z=k._dbInfo,j;try{j=localStorage.key(A)}catch{j=null}return j&&(j=j.substring(Z.keyPrefix.length)),j});return b(H,F),H}function Yt(A){var F=this,k=F.ready().then(function(){for(var H=F._dbInfo,Z=localStorage.length,j=[],re=0;re<Z;re++){var oe=localStorage.key(re);oe.indexOf(H.keyPrefix)===0&&j.push(oe.substring(H.keyPrefix.length))}return j});return b(k,A),k}function lt(A){var F=this,k=F.keys().then(function(H){return H.length});return b(k,A),k}function bt(A,F){var k=this;A=C(A);var H=k.ready().then(function(){var Z=k._dbInfo;localStorage.removeItem(Z.keyPrefix+A)});return b(H,F),H}function vt(A,F,k){var H=this;A=C(A);var Z=H.ready().then(function(){F===void 0&&(F=null);var j=F;return new p(function(re,oe){var le=H._dbInfo;le.serializer.serialize(F,function(he,ge){if(ge)oe(ge);else try{localStorage.setItem(le.keyPrefix+A,he),re(j)}catch(_e){(_e.name==="QuotaExceededError"||_e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&oe(_e),oe(_e)}})})});return b(Z,k),Z}function St(A,F){if(F=w.apply(this,arguments),A=typeof A!="function"&&A||{},!A.name){var k=this.config();A.name=A.name||k.name,A.storeName=A.storeName||k.storeName}var H=this,Z;return A.name?Z=new p(function(j){A.storeName?j(Oe(A,H._defaultConfig)):j(A.name+"/")}).then(function(j){for(var re=localStorage.length-1;re>=0;re--){var oe=localStorage.key(re);oe.indexOf(j)===0&&localStorage.removeItem(oe)}}):Z=p.reject("Invalid arguments"),b(Z,F),Z}var xt={_driver:"localStorageWrapper",_initStorage:Pe,_support:me(),iterate:ot,getItem:ct,setItem:vt,removeItem:bt,clear:Me,length:lt,key:Pt,keys:Yt,dropInstance:St},Dr=function(F,k){return F===k||typeof F=="number"&&typeof k=="number"&&isNaN(F)&&isNaN(k)},Ra=function(F,k){for(var H=F.length,Z=0;Z<H;){if(Dr(F[Z],k))return!0;Z++}return!1},wn=Array.isArray||function(A){return Object.prototype.toString.call(A)==="[object Array]"},hr={},bn={},Kt={INDEXEDDB:Le,WEBSQL:ve,LOCALSTORAGE:xt},Na=[Kt.INDEXEDDB._driver,Kt.WEBSQL._driver,Kt.LOCALSTORAGE._driver],Cr=["dropInstance"],Qr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Cr),Ia={description:"",driver:Na.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Oa(A,F){A[F]=function(){var k=arguments;return A.ready().then(function(){return A[F].apply(A,k)})}}function ei(){for(var A=1;A<arguments.length;A++){var F=arguments[A];if(F)for(var k in F)F.hasOwnProperty(k)&&(wn(F[k])?arguments[0][k]=F[k].slice():arguments[0][k]=F[k])}return arguments[0]}var Ba=(function(){function A(F){n(this,A);for(var k in Kt)if(Kt.hasOwnProperty(k)){var H=Kt[k],Z=H._driver;this[k]=Z,hr[Z]||this.defineDriver(H)}this._defaultConfig=ei({},Ia),this._config=ei({},this._defaultConfig,F),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return A.prototype.config=function(k){if((typeof k>"u"?"undefined":s(k))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var H in k){if(H==="storeName"&&(k[H]=k[H].replace(/\W/g,"_")),H==="version"&&typeof k[H]!="number")return new Error("Database version must be a number.");this._config[H]=k[H]}return"driver"in k&&k.driver?this.setDriver(this._config.driver):!0}else return typeof k=="string"?this._config[k]:this._config},A.prototype.defineDriver=function(k,H,Z){var j=new p(function(re,oe){try{var le=k._driver,he=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!k._driver){oe(he);return}for(var ge=Qr.concat("_initStorage"),_e=0,qe=ge.length;_e<qe;_e++){var Qe=ge[_e],tt=!Ra(Cr,Qe);if((tt||k[Qe])&&typeof k[Qe]!="function"){oe(he);return}}var pt=function(){for(var cr=function(Pa){return function(){var za=new Error("Method "+Pa+" is not implemented by the current driver"),_n=p.reject(za);return b(_n,arguments[arguments.length-1]),_n}},ti=0,Fa=Cr.length;ti<Fa;ti++){var ri=Cr[ti];k[ri]||(k[ri]=cr(ri))}};pt();var ft=function(cr){hr[le]&&console.info("Redefining LocalForage driver: "+le),hr[le]=k,bn[le]=cr,re()};"_support"in k?k._support&&typeof k._support=="function"?k._support().then(ft,oe):ft(!!k._support):ft(!0)}catch(At){oe(At)}});return y(j,H,Z),j},A.prototype.driver=function(){return this._driver||null},A.prototype.getDriver=function(k,H,Z){var j=hr[k]?p.resolve(hr[k]):p.reject(new Error("Driver not found."));return y(j,H,Z),j},A.prototype.getSerializer=function(k){var H=p.resolve(te);return y(H,k),H},A.prototype.ready=function(k){var H=this,Z=H._driverSet.then(function(){return H._ready===null&&(H._ready=H._initDriver()),H._ready});return y(Z,k,k),Z},A.prototype.setDriver=function(k,H,Z){var j=this;wn(k)||(k=[k]);var re=this._getSupportedDrivers(k);function oe(){j._config.driver=j.driver()}function le(_e){return j._extend(_e),oe(),j._ready=j._initStorage(j._config),j._ready}function he(_e){return function(){var qe=0;function Qe(){for(;qe<_e.length;){var tt=_e[qe];return qe++,j._dbInfo=null,j._ready=null,j.getDriver(tt).then(le).catch(Qe)}oe();var pt=new Error("No available storage method found.");return j._driverSet=p.reject(pt),j._driverSet}return Qe()}}var ge=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=ge.then(function(){var _e=re[0];return j._dbInfo=null,j._ready=null,j.getDriver(_e).then(function(qe){j._driver=qe._driver,oe(),j._wrapLibraryMethodsWithReady(),j._initDriver=he(re)})}).catch(function(){oe();var _e=new Error("No available storage method found.");return j._driverSet=p.reject(_e),j._driverSet}),y(this._driverSet,H,Z),this._driverSet},A.prototype.supports=function(k){return!!bn[k]},A.prototype._extend=function(k){ei(this,k)},A.prototype._getSupportedDrivers=function(k){for(var H=[],Z=0,j=k.length;Z<j;Z++){var re=k[Z];this.supports(re)&&H.push(re)}return H},A.prototype._wrapLibraryMethodsWithReady=function(){for(var k=0,H=Qr.length;k<H;k++)Oa(this,Qr[k])},A.prototype.createInstance=function(k){return new A(k)},A})(),La=new Ba;r.exports=La},{3:3}]},{},[4])(4)})})(ii)),ii.exports}var qa=Ma();const $e=ur(qa);var Sr={exports:{}},ni={exports:{}},si,xn;function Ps(){if(xn)return si;xn=1;var o=void 0;return si=function(e){return e!==o&&e!==null},si}var ai,An;function ja(){if(An)return ai;An=1;var o=Ps(),e={object:!0,function:!0,undefined:!0};return ai=function(t){return o(t)?hasOwnProperty.call(e,typeof t):!1},ai}var oi,Dn;function Wa(){if(Dn)return oi;Dn=1;var o=ja();return oi=function(e){if(!o(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch{return!1}},oi}var ui,Cn;function Ha(){if(Cn)return ui;Cn=1;var o=Wa();return ui=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch{return!1}return!o(e)},ui}var li,Sn;function Va(){if(Sn)return li;Sn=1;var o=Ha(),e=/^\s*class[\s{/}]/,t=Function.prototype.toString;return li=function(r){return!(!o(r)||e.test(t.call(r)))},li}var hi,Tn;function Za(){return Tn||(Tn=1,hi=function(){var o=Object.assign,e;return typeof o!="function"?!1:(e={foo:"raz"},o(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}),hi}var ci,kn;function Ga(){return kn||(kn=1,ci=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),ci}var fi,Rn;function Xa(){return Rn||(Rn=1,fi=function(){}),fi}var di,Nn;function an(){if(Nn)return di;Nn=1;var o=Xa()();return di=function(e){return e!==o&&e!==null},di}var pi,In;function $a(){if(In)return pi;In=1;var o=an(),e=Object.keys;return pi=function(t){return e(o(t)?Object(t):t)},pi}var gi,On;function Ya(){return On||(On=1,gi=Ga()()?Object.keys:$a()),gi}var vi,Bn;function Ka(){if(Bn)return vi;Bn=1;var o=an();return vi=function(e){if(!o(e))throw new TypeError("Cannot use null or undefined");return e},vi}var mi,Ln;function Ja(){if(Ln)return mi;Ln=1;var o=Ya(),e=Ka(),t=Math.max;return mi=function(r,i){var s,n,a=t(arguments.length,2),u;for(r=Object(e(r)),u=function(c){try{r[c]=i[c]}catch(d){s||(s=d)}},n=1;n<a;++n)i=arguments[n],o(i).forEach(u);if(s!==void 0)throw s;return r},mi}var yi,Fn;function Qa(){return Fn||(Fn=1,yi=Za()()?Object.assign:Ja()),yi}var wi,Pn;function eo(){if(Pn)return wi;Pn=1;var o=an(),e=Array.prototype.forEach,t=Object.create,r=function(i,s){var n;for(n in i)s[n]=i[n]};return wi=function(i){var s=t(null);return e.call(arguments,function(n){o(n)&&r(Object(n),s)}),s},wi}var bi,zn;function to(){if(zn)return bi;zn=1;var o="razdwatrzy";return bi=function(){return typeof o.contains!="function"?!1:o.contains("dwa")===!0&&o.contains("foo")===!1},bi}var _i,Un;function ro(){if(Un)return _i;Un=1;var o=String.prototype.indexOf;return _i=function(e){return o.call(this,e,arguments[1])>-1},_i}var Ei,Mn;function io(){return Mn||(Mn=1,Ei=to()()?String.prototype.contains:ro()),Ei}var qn;function no(){if(qn)return ni.exports;qn=1;var o=Ps(),e=Va(),t=Qa(),r=eo(),i=io(),s=ni.exports=function(n,a){var u,c,d,p,b;return arguments.length<2||typeof n!="string"?(p=a,a=n,n=null):p=arguments[2],o(n)?(u=i.call(n,"c"),c=i.call(n,"e"),d=i.call(n,"w")):(u=d=!0,c=!1),b={value:a,configurable:u,enumerable:c,writable:d},p?t(r(p),b):b};return s.gs=function(n,a,u){var c,d,p,b;return typeof n!="string"?(p=u,u=a,a=n,n=null):p=arguments[3],o(a)?e(a)?o(u)?e(u)||(p=u,u=void 0):u=void 0:(p=a,a=u=void 0):a=void 0,o(n)?(c=i.call(n,"c"),d=i.call(n,"e")):(c=!0,d=!1),b={get:a,set:u,configurable:c,enumerable:d},p?t(r(p),b):b},ni.exports}var xi,jn;function so(){return jn||(jn=1,xi=function(o){if(typeof o!="function")throw new TypeError(o+" is not a function");return o}),xi}var Wn;function ao(){return Wn||(Wn=1,(function(o,e){var t=no(),r=so(),i=Function.prototype.apply,s=Function.prototype.call,n=Object.create,a=Object.defineProperty,u=Object.defineProperties,c=Object.prototype.hasOwnProperty,d={configurable:!0,enumerable:!1,writable:!0},p,b,y,C,w,f,v;p=function(m,D){var I;return r(D),c.call(this,"__ee__")?I=this.__ee__:(I=d.value=n(null),a(this,"__ee__",d),d.value=null),I[m]?typeof I[m]=="object"?I[m].push(D):I[m]=[I[m],D]:I[m]=D,this},b=function(m,D){var I,_;return r(D),_=this,p.call(this,m,I=function(){y.call(_,m,I),i.call(D,this,arguments)}),I.__eeOnceListener__=D,this},y=function(m,D){var I,_,T,N;if(r(D),!c.call(this,"__ee__"))return this;if(I=this.__ee__,!I[m])return this;if(_=I[m],typeof _=="object")for(N=0;T=_[N];++N)(T===D||T.__eeOnceListener__===D)&&(_.length===2?I[m]=_[N?0:1]:_.splice(N,1));else(_===D||_.__eeOnceListener__===D)&&delete I[m];return this},C=function(m){var D,I,_,T,N;if(c.call(this,"__ee__")&&(T=this.__ee__[m],!!T))if(typeof T=="object"){for(I=arguments.length,N=new Array(I-1),D=1;D<I;++D)N[D-1]=arguments[D];for(T=T.slice(),D=0;_=T[D];++D)i.call(_,this,N)}else switch(arguments.length){case 1:s.call(T,this);break;case 2:s.call(T,this,arguments[1]);break;case 3:s.call(T,this,arguments[1],arguments[2]);break;default:for(I=arguments.length,N=new Array(I-1),D=1;D<I;++D)N[D-1]=arguments[D];i.call(T,this,N)}},w={on:p,once:b,off:y,emit:C},f={on:t(p),once:t(b),off:t(y),emit:t(C)},v=u({},f),o.exports=e=function(m){return m==null?n(v):u(Object(m),f)},e.methods=w})(Sr,Sr.exports)),Sr.exports}var oo=ao();const Ft=ur(oo);var dr={},zt={},Jt={},Hn;function Vr(){if(Hn)return Jt;Hn=1;function o(i,s,n){if(n===void 0&&(n=Array.prototype),i&&typeof n.find=="function")return n.find.call(i,s);for(var a=0;a<i.length;a++)if(Object.prototype.hasOwnProperty.call(i,a)){var u=i[a];if(s.call(void 0,u,a,i))return u}}function e(i,s){return s===void 0&&(s=Object),s&&typeof s.freeze=="function"?s.freeze(i):i}var t=e({HTML:"text/html",isHTML:function(i){return i===t.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Jt.find=o,Jt.freeze=e,Jt.MIME_TYPE=t,Jt.NAMESPACE=r,Jt}var Vn;function zs(){if(Vn)return zt;Vn=1;var o=Vr(),e=o.find,t=o.NAMESPACE;function r(g){return g!==""}function i(g){return g?g.split(/[\t\n\f\r ]+/).filter(r):[]}function s(g,l){return g.hasOwnProperty(l)||(g[l]=!0),g}function n(g){if(!g)return[];var l=i(g);return Object.keys(l.reduce(s,{}))}function a(g){return function(l){return g&&g.indexOf(l)!==-1}}function u(g,l){for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(l[x]=g[x])}function c(g,l){var x=g.prototype;if(!(x instanceof l)){let M=function(){};M.prototype=l.prototype,M=new M,u(x,M),g.prototype=x=M}x.constructor!=g&&(typeof g!="function"&&console.error("unknown Class:"+g),x.constructor=g)}var d={},p=d.ELEMENT_NODE=1,b=d.ATTRIBUTE_NODE=2,y=d.TEXT_NODE=3,C=d.CDATA_SECTION_NODE=4,w=d.ENTITY_REFERENCE_NODE=5,f=d.ENTITY_NODE=6,v=d.PROCESSING_INSTRUCTION_NODE=7,m=d.COMMENT_NODE=8,D=d.DOCUMENT_NODE=9,I=d.DOCUMENT_TYPE_NODE=10,_=d.DOCUMENT_FRAGMENT_NODE=11,T=d.NOTATION_NODE=12,N={},O={};N.INDEX_SIZE_ERR=(O[1]="Index size error",1),N.DOMSTRING_SIZE_ERR=(O[2]="DOMString size error",2);var R=N.HIERARCHY_REQUEST_ERR=(O[3]="Hierarchy request error",3);N.WRONG_DOCUMENT_ERR=(O[4]="Wrong document",4),N.INVALID_CHARACTER_ERR=(O[5]="Invalid character",5),N.NO_DATA_ALLOWED_ERR=(O[6]="No data allowed",6),N.NO_MODIFICATION_ALLOWED_ERR=(O[7]="No modification allowed",7);var B=N.NOT_FOUND_ERR=(O[8]="Not found",8);N.NOT_SUPPORTED_ERR=(O[9]="Not supported",9);var $=N.INUSE_ATTRIBUTE_ERR=(O[10]="Attribute in use",10);N.INVALID_STATE_ERR=(O[11]="Invalid state",11),N.SYNTAX_ERR=(O[12]="Syntax error",12),N.INVALID_MODIFICATION_ERR=(O[13]="Invalid modification",13),N.NAMESPACE_ERR=(O[14]="Invalid namespace",14),N.INVALID_ACCESS_ERR=(O[15]="Invalid access",15);function V(g,l){if(l instanceof Error)var x=l;else x=this,Error.call(this,O[g]),this.message=O[g],Error.captureStackTrace&&Error.captureStackTrace(this,V);return x.code=g,l&&(this.message=this.message+": "+l),x}V.prototype=Error.prototype,u(N,V);function Y(){}Y.prototype={length:0,item:function(g){return g>=0&&g<this.length?this[g]:null},toString:function(g,l){for(var x=[],M=0;M<this.length;M++)te(this[M],x,g,l);return x.join("")},filter:function(g){return Array.prototype.filter.call(this,g)},indexOf:function(g){return Array.prototype.indexOf.call(this,g)}};function ie(g,l){this._node=g,this._refresh=l,se(this)}function se(g){var l=g._node._inc||g._node.ownerDocument._inc;if(g._inc!==l){var x=g._refresh(g._node);if(z(g,"length",x.length),!g.$$length||x.length<g.$$length)for(var M=x.length;M in g;M++)Object.prototype.hasOwnProperty.call(g,M)&&delete g[M];u(x,g),g._inc=l}}ie.prototype.item=function(g){return se(this),this[g]||null},c(ie,Y);function fe(){}function ae(g,l){for(var x=g.length;x--;)if(g[x]===l)return x}function ee(g,l,x,M){if(M?l[ae(l,M)]=x:l[l.length++]=x,g){x.ownerElement=g;var h=g.ownerDocument;h&&(M&&rt(h,g,M),Te(h,g,x))}}function pe(g,l,x){var M=ae(l,x);if(M>=0){for(var h=l.length-1;M<h;)l[M]=l[++M];if(l.length=h,g){var q=g.ownerDocument;q&&(rt(q,g,x),x.ownerElement=null)}}else throw new V(B,new Error(g.tagName+"@"+x))}fe.prototype={length:0,item:Y.prototype.item,getNamedItem:function(g){for(var l=this.length;l--;){var x=this[l];if(x.nodeName==g)return x}},setNamedItem:function(g){var l=g.ownerElement;if(l&&l!=this._ownerElement)throw new V($);var x=this.getNamedItem(g.nodeName);return ee(this._ownerElement,this,g,x),x},setNamedItemNS:function(g){var l=g.ownerElement,x;if(l&&l!=this._ownerElement)throw new V($);return x=this.getNamedItemNS(g.namespaceURI,g.localName),ee(this._ownerElement,this,g,x),x},removeNamedItem:function(g){var l=this.getNamedItem(g);return pe(this._ownerElement,this,l),l},removeNamedItemNS:function(g,l){var x=this.getNamedItemNS(g,l);return pe(this._ownerElement,this,x),x},getNamedItemNS:function(g,l){for(var x=this.length;x--;){var M=this[x];if(M.localName==l&&M.namespaceURI==g)return M}return null}};function Ce(){}Ce.prototype={hasFeature:function(g,l){return!0},createDocument:function(g,l,x){var M=new Ee;if(M.implementation=this,M.childNodes=new Y,M.doctype=x||null,x&&M.appendChild(x),l){var h=M.createElementNS(g,l);M.appendChild(h)}return M},createDocumentType:function(g,l,x){var M=new De;return M.name=g,M.nodeName=g,M.publicId=l||"",M.systemId=x||"",M}};function ue(){}ue.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(g,l){return U(this,g,l)},replaceChild:function(g,l){U(this,g,l,st),l&&this.removeChild(l)},removeChild:function(g){return xe(this,g)},appendChild:function(g){return this.insertBefore(g,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(g){return ye(this.ownerDocument||this,this,g)},normalize:function(){for(var g=this.firstChild;g;){var l=g.nextSibling;l&&l.nodeType==y&&g.nodeType==y?(this.removeChild(l),g.appendData(l.data)):(g.normalize(),g=l)}},isSupported:function(g,l){return this.ownerDocument.implementation.hasFeature(g,l)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(g){for(var l=this;l;){var x=l._nsMap;if(x){for(var M in x)if(Object.prototype.hasOwnProperty.call(x,M)&&x[M]===g)return M}l=l.nodeType==b?l.ownerDocument:l.parentNode}return null},lookupNamespaceURI:function(g){for(var l=this;l;){var x=l._nsMap;if(x&&g in x&&Object.prototype.hasOwnProperty.call(x,g))return x[g];l=l.nodeType==b?l.ownerDocument:l.parentNode}return null},isDefaultNamespace:function(g){var l=this.lookupPrefix(g);return l==null}};function ce(g){return g=="<"&&"&lt;"||g==">"&&"&gt;"||g=="&"&&"&amp;"||g=='"'&&"&quot;"||"&#"+g.charCodeAt()+";"}u(d,ue),u(d,ue.prototype);function Ne(g,l){if(l(g))return!0;if(g=g.firstChild)do if(Ne(g,l))return!0;while(g=g.nextSibling)}function Ee(){this.ownerDocument=this}function Te(g,l,x){g&&g._inc++;var M=x.namespaceURI;M===t.XMLNS&&(l._nsMap[x.prefix?x.localName:""]=x.value)}function rt(g,l,x,M){g&&g._inc++;var h=x.namespaceURI;h===t.XMLNS&&delete l._nsMap[x.prefix?x.localName:""]}function We(g,l,x){if(g&&g._inc){g._inc++;var M=l.childNodes;if(x)M[M.length++]=x;else{for(var h=l.firstChild,q=0;h;)M[q++]=h,h=h.nextSibling;M.length=q,delete M[M.length]}}}function xe(g,l){var x=l.previousSibling,M=l.nextSibling;return x?x.nextSibling=M:g.firstChild=M,M?M.previousSibling=x:g.lastChild=x,l.parentNode=null,l.previousSibling=null,l.nextSibling=null,We(g.ownerDocument,g),l}function Ge(g){return g&&(g.nodeType===ue.DOCUMENT_NODE||g.nodeType===ue.DOCUMENT_FRAGMENT_NODE||g.nodeType===ue.ELEMENT_NODE)}function Je(g){return g&&(ze(g)||Le(g)||Ie(g)||g.nodeType===ue.DOCUMENT_FRAGMENT_NODE||g.nodeType===ue.COMMENT_NODE||g.nodeType===ue.PROCESSING_INSTRUCTION_NODE)}function Ie(g){return g&&g.nodeType===ue.DOCUMENT_TYPE_NODE}function ze(g){return g&&g.nodeType===ue.ELEMENT_NODE}function Le(g){return g&&g.nodeType===ue.TEXT_NODE}function Ue(g,l){var x=g.childNodes||[];if(e(x,ze)||Ie(l))return!1;var M=e(x,Ie);return!(l&&M&&x.indexOf(M)>x.indexOf(l))}function Ke(g,l){var x=g.childNodes||[];function M(q){return ze(q)&&q!==l}if(e(x,M))return!1;var h=e(x,Ie);return!(l&&h&&x.indexOf(h)>x.indexOf(l))}function He(g,l,x){if(!Ge(g))throw new V(R,"Unexpected parent node type "+g.nodeType);if(x&&x.parentNode!==g)throw new V(B,"child not in parent");if(!Je(l)||Ie(l)&&g.nodeType!==ue.DOCUMENT_NODE)throw new V(R,"Unexpected node type "+l.nodeType+" for parent node type "+g.nodeType)}function je(g,l,x){var M=g.childNodes||[],h=l.childNodes||[];if(l.nodeType===ue.DOCUMENT_FRAGMENT_NODE){var q=h.filter(ze);if(q.length>1||e(h,Le))throw new V(R,"More than one element or text in fragment");if(q.length===1&&!Ue(g,x))throw new V(R,"Element in fragment can not be inserted before doctype")}if(ze(l)&&!Ue(g,x))throw new V(R,"Only one element can be added and only after doctype");if(Ie(l)){if(e(M,Ie))throw new V(R,"Only one doctype is allowed");var G=e(M,ze);if(x&&M.indexOf(G)<M.indexOf(x))throw new V(R,"Doctype can only be inserted before an element");if(!x&&G)throw new V(R,"Doctype can not be appended since element is present")}}function st(g,l,x){var M=g.childNodes||[],h=l.childNodes||[];if(l.nodeType===ue.DOCUMENT_FRAGMENT_NODE){var q=h.filter(ze);if(q.length>1||e(h,Le))throw new V(R,"More than one element or text in fragment");if(q.length===1&&!Ke(g,x))throw new V(R,"Element in fragment can not be inserted before doctype")}if(ze(l)&&!Ke(g,x))throw new V(R,"Only one element can be added and only after doctype");if(Ie(l)){if(e(M,function(L){return Ie(L)&&L!==x}))throw new V(R,"Only one doctype is allowed");var G=e(M,ze);if(x&&M.indexOf(G)<M.indexOf(x))throw new V(R,"Doctype can only be inserted before an element")}}function U(g,l,x,M){He(g,l,x),g.nodeType===ue.DOCUMENT_NODE&&(M||je)(g,l,x);var h=l.parentNode;if(h&&h.removeChild(l),l.nodeType===_){var q=l.firstChild;if(q==null)return l;var G=l.lastChild}else q=G=l;var E=x?x.previousSibling:g.lastChild;q.previousSibling=E,G.nextSibling=x,E?E.nextSibling=q:g.firstChild=q,x==null?g.lastChild=G:x.previousSibling=G;do q.parentNode=g;while(q!==G&&(q=q.nextSibling));return We(g.ownerDocument||g,g),l.nodeType==_&&(l.firstChild=l.lastChild=null),l}function P(g,l){return l.parentNode&&l.parentNode.removeChild(l),l.parentNode=g,l.previousSibling=g.lastChild,l.nextSibling=null,l.previousSibling?l.previousSibling.nextSibling=l:g.firstChild=l,g.lastChild=l,We(g.ownerDocument,g,l),l}Ee.prototype={nodeName:"#document",nodeType:D,doctype:null,documentElement:null,_inc:1,insertBefore:function(g,l){if(g.nodeType==_){for(var x=g.firstChild;x;){var M=x.nextSibling;this.insertBefore(x,l),x=M}return g}return U(this,g,l),g.ownerDocument=this,this.documentElement===null&&g.nodeType===p&&(this.documentElement=g),g},removeChild:function(g){return this.documentElement==g&&(this.documentElement=null),xe(this,g)},replaceChild:function(g,l){U(this,g,l,st),g.ownerDocument=this,l&&this.removeChild(l),ze(g)&&(this.documentElement=g)},importNode:function(g,l){return ne(this,g,l)},getElementById:function(g){var l=null;return Ne(this.documentElement,function(x){if(x.nodeType==p&&x.getAttribute("id")==g)return l=x,!0}),l},getElementsByClassName:function(g){var l=n(g);return new ie(this,function(x){var M=[];return l.length>0&&Ne(x.documentElement,function(h){if(h!==x&&h.nodeType===p){var q=h.getAttribute("class");if(q){var G=g===q;if(!G){var E=n(q);G=l.every(a(E))}G&&M.push(h)}}}),M})},createElement:function(g){var l=new W;l.ownerDocument=this,l.nodeName=g,l.tagName=g,l.localName=g,l.childNodes=new Y;var x=l.attributes=new fe;return x._ownerElement=l,l},createDocumentFragment:function(){var g=new at;return g.ownerDocument=this,g.childNodes=new Y,g},createTextNode:function(g){var l=new de;return l.ownerDocument=this,l.appendData(g),l},createComment:function(g){var l=new Ae;return l.ownerDocument=this,l.appendData(g),l},createCDATASection:function(g){var l=new Se;return l.ownerDocument=this,l.appendData(g),l},createProcessingInstruction:function(g,l){var x=new et;return x.ownerDocument=this,x.tagName=x.nodeName=x.target=g,x.nodeValue=x.data=l,x},createAttribute:function(g){var l=new J;return l.ownerDocument=this,l.name=g,l.nodeName=g,l.localName=g,l.specified=!0,l},createEntityReference:function(g){var l=new Xe;return l.ownerDocument=this,l.nodeName=g,l},createElementNS:function(g,l){var x=new W,M=l.split(":"),h=x.attributes=new fe;return x.childNodes=new Y,x.ownerDocument=this,x.nodeName=l,x.tagName=l,x.namespaceURI=g,M.length==2?(x.prefix=M[0],x.localName=M[1]):x.localName=l,h._ownerElement=x,x},createAttributeNS:function(g,l){var x=new J,M=l.split(":");return x.ownerDocument=this,x.nodeName=l,x.name=l,x.namespaceURI=g,x.specified=!0,M.length==2?(x.prefix=M[0],x.localName=M[1]):x.localName=l,x}},c(Ee,ue);function W(){this._nsMap={}}W.prototype={nodeType:p,hasAttribute:function(g){return this.getAttributeNode(g)!=null},getAttribute:function(g){var l=this.getAttributeNode(g);return l&&l.value||""},getAttributeNode:function(g){return this.attributes.getNamedItem(g)},setAttribute:function(g,l){var x=this.ownerDocument.createAttribute(g);x.value=x.nodeValue=""+l,this.setAttributeNode(x)},removeAttribute:function(g){var l=this.getAttributeNode(g);l&&this.removeAttributeNode(l)},appendChild:function(g){return g.nodeType===_?this.insertBefore(g,null):P(this,g)},setAttributeNode:function(g){return this.attributes.setNamedItem(g)},setAttributeNodeNS:function(g){return this.attributes.setNamedItemNS(g)},removeAttributeNode:function(g){return this.attributes.removeNamedItem(g.nodeName)},removeAttributeNS:function(g,l){var x=this.getAttributeNodeNS(g,l);x&&this.removeAttributeNode(x)},hasAttributeNS:function(g,l){return this.getAttributeNodeNS(g,l)!=null},getAttributeNS:function(g,l){var x=this.getAttributeNodeNS(g,l);return x&&x.value||""},setAttributeNS:function(g,l,x){var M=this.ownerDocument.createAttributeNS(g,l);M.value=M.nodeValue=""+x,this.setAttributeNode(M)},getAttributeNodeNS:function(g,l){return this.attributes.getNamedItemNS(g,l)},getElementsByTagName:function(g){return new ie(this,function(l){var x=[];return Ne(l,function(M){M!==l&&M.nodeType==p&&(g==="*"||M.tagName==g)&&x.push(M)}),x})},getElementsByTagNameNS:function(g,l){return new ie(this,function(x){var M=[];return Ne(x,function(h){h!==x&&h.nodeType===p&&(g==="*"||h.namespaceURI===g)&&(l==="*"||h.localName==l)&&M.push(h)}),M})}},Ee.prototype.getElementsByTagName=W.prototype.getElementsByTagName,Ee.prototype.getElementsByTagNameNS=W.prototype.getElementsByTagNameNS,c(W,ue);function J(){}J.prototype.nodeType=b,c(J,ue);function Q(){}Q.prototype={data:"",substringData:function(g,l){return this.data.substring(g,g+l)},appendData:function(g){g=this.data+g,this.nodeValue=this.data=g,this.length=g.length},insertData:function(g,l){this.replaceData(g,0,l)},appendChild:function(g){throw new Error(O[R])},deleteData:function(g,l){this.replaceData(g,l,"")},replaceData:function(g,l,x){var M=this.data.substring(0,g),h=this.data.substring(g+l);x=M+x+h,this.nodeValue=this.data=x,this.length=x.length}},c(Q,ue);function de(){}de.prototype={nodeName:"#text",nodeType:y,splitText:function(g){var l=this.data,x=l.substring(g);l=l.substring(0,g),this.data=this.nodeValue=l,this.length=l.length;var M=this.ownerDocument.createTextNode(x);return this.parentNode&&this.parentNode.insertBefore(M,this.nextSibling),M}},c(de,Q);function Ae(){}Ae.prototype={nodeName:"#comment",nodeType:m},c(Ae,Q);function Se(){}Se.prototype={nodeName:"#cdata-section",nodeType:C},c(Se,Q);function De(){}De.prototype.nodeType=I,c(De,ue);function Fe(){}Fe.prototype.nodeType=T,c(Fe,ue);function Be(){}Be.prototype.nodeType=f,c(Be,ue);function Xe(){}Xe.prototype.nodeType=w,c(Xe,ue);function at(){}at.prototype.nodeName="#document-fragment",at.prototype.nodeType=_,c(at,ue);function et(){}et.prototype.nodeType=v,c(et,ue);function Re(){}Re.prototype.serializeToString=function(g,l,x){return it.call(g,l,x)},ue.prototype.toString=it;function it(g,l){var x=[],M=this.nodeType==9&&this.documentElement||this,h=M.prefix,q=M.namespaceURI;if(q&&h==null){var h=M.lookupPrefix(q);if(h==null)var G=[{namespace:q,prefix:null}]}return te(this,x,g,l,G),x.join("")}function gt(g,l,x){var M=g.prefix||"",h=g.namespaceURI;if(!h||M==="xml"&&h===t.XML||h===t.XMLNS)return!1;for(var q=x.length;q--;){var G=x[q];if(G.prefix===M)return G.namespace!==h}return!0}function S(g,l,x){g.push(" ",l,'="',x.replace(/[<&"]/g,ce),'"')}function te(g,l,x,M,h){if(h||(h=[]),M)if(g=M(g),g){if(typeof g=="string"){l.push(g);return}}else return;switch(g.nodeType){case p:var q=g.attributes,G=q.length,Me=g.firstChild,E=g.tagName;x=t.isHTML(g.namespaceURI)||x;var L=E;if(!x&&!g.prefix&&g.namespaceURI){for(var X,be=0;be<q.length;be++)if(q.item(be).name==="xmlns"){X=q.item(be).value;break}if(!X)for(var ve=h.length-1;ve>=0;ve--){var me=h[ve];if(me.prefix===""&&me.namespace===g.namespaceURI){X=me.namespace;break}}if(X!==g.namespaceURI)for(var ve=h.length-1;ve>=0;ve--){var me=h[ve];if(me.namespace===g.namespaceURI){me.prefix&&(L=me.prefix+":"+E);break}}}l.push("<",L);for(var Oe=0;Oe<G;Oe++){var ut=q.item(Oe);ut.prefix=="xmlns"?h.push({prefix:ut.localName,namespace:ut.value}):ut.nodeName=="xmlns"&&h.push({prefix:"",namespace:ut.value})}for(var Oe=0;Oe<G;Oe++){var ut=q.item(Oe);if(gt(ut,x,h)){var Ye=ut.prefix||"",Pe=ut.namespaceURI;S(l,Ye?"xmlns:"+Ye:"xmlns",Pe),h.push({prefix:Ye,namespace:Pe})}te(ut,l,x,M,h)}if(E===L&&gt(g,x,h)){var Ye=g.prefix||"",Pe=g.namespaceURI;S(l,Ye?"xmlns:"+Ye:"xmlns",Pe),h.push({prefix:Ye,namespace:Pe})}if(Me||x&&!/^(?:meta|link|img|br|hr|input)$/i.test(E)){if(l.push(">"),x&&/^script$/i.test(E))for(;Me;)Me.data?l.push(Me.data):te(Me,l,x,M,h.slice()),Me=Me.nextSibling;else for(;Me;)te(Me,l,x,M,h.slice()),Me=Me.nextSibling;l.push("</",L,">")}else l.push("/>");return;case D:case _:for(var Me=g.firstChild;Me;)te(Me,l,x,M,h.slice()),Me=Me.nextSibling;return;case b:return S(l,g.name,g.value);case y:return l.push(g.data.replace(/[<&]/g,ce).replace(/]]>/g,"]]&gt;"));case C:return l.push("<![CDATA[",g.data,"]]>");case m:return l.push("<!--",g.data,"-->");case I:var ct=g.publicId,ot=g.systemId;if(l.push("<!DOCTYPE ",g.name),ct)l.push(" PUBLIC ",ct),ot&&ot!="."&&l.push(" ",ot),l.push(">");else if(ot&&ot!=".")l.push(" SYSTEM ",ot,">");else{var Pt=g.internalSubset;Pt&&l.push(" [",Pt,"]"),l.push(">")}return;case v:return l.push("<?",g.target," ",g.data,"?>");case w:return l.push("&",g.nodeName,";");default:l.push("??",g.nodeName)}}function ne(g,l,x){var M;switch(l.nodeType){case p:M=l.cloneNode(!1),M.ownerDocument=g;case _:break;case b:x=!0;break}if(M||(M=l.cloneNode(!1)),M.ownerDocument=g,M.parentNode=null,x)for(var h=l.firstChild;h;)M.appendChild(ne(g,h,x)),h=h.nextSibling;return M}function ye(g,l,x){var M=new l.constructor;for(var h in l)if(Object.prototype.hasOwnProperty.call(l,h)){var q=l[h];typeof q!="object"&&q!=M[h]&&(M[h]=q)}switch(l.childNodes&&(M.childNodes=new Y),M.ownerDocument=g,M.nodeType){case p:var G=l.attributes,E=M.attributes=new fe,L=G.length;E._ownerElement=M;for(var X=0;X<L;X++)M.setAttributeNode(ye(g,G.item(X),!0));break;case b:x=!0}if(x)for(var be=l.firstChild;be;)M.appendChild(ye(g,be,x)),be=be.nextSibling;return M}function z(g,l,x){g[l]=x}try{if(Object.defineProperty){let g=function(l){switch(l.nodeType){case p:case _:var x=[];for(l=l.firstChild;l;)l.nodeType!==7&&l.nodeType!==8&&x.push(g(l)),l=l.nextSibling;return x.join("");default:return l.nodeValue}};Object.defineProperty(ie.prototype,"length",{get:function(){return se(this),this.$$length}}),Object.defineProperty(ue.prototype,"textContent",{get:function(){return g(this)},set:function(l){switch(this.nodeType){case p:case _:for(;this.firstChild;)this.removeChild(this.firstChild);(l||String(l))&&this.appendChild(this.ownerDocument.createTextNode(l));break;default:this.data=l,this.value=l,this.nodeValue=l}}}),z=function(l,x,M){l["$$"+x]=M}}}catch{}return zt.DocumentType=De,zt.DOMException=V,zt.DOMImplementation=Ce,zt.Element=W,zt.Node=ue,zt.NodeList=Y,zt.XMLSerializer=Re,zt}var Qt={},Ai={},Zn;function uo(){return Zn||(Zn=1,(function(o){var e=Vr().freeze;o.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),o.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),o.entityMap=o.HTML_ENTITIES})(Ai)),Ai}var Tr={},Gn;function lo(){if(Gn)return Tr;Gn=1;var o=Vr().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,s=1,n=2,a=3,u=4,c=5,d=6,p=7;function b(R,B){this.message=R,this.locator=B,Error.captureStackTrace&&Error.captureStackTrace(this,b)}b.prototype=new Error,b.prototype.name=b.name;function y(){}y.prototype={parse:function(R,B,$){var V=this.domBuilder;V.startDocument(),I(B,B={}),C(R,B,$,V,this.errorHandler),V.endDocument()}};function C(R,B,$,V,Y){function ie(W){if(W>65535){W-=65536;var J=55296+(W>>10),Q=56320+(W&1023);return String.fromCharCode(J,Q)}else return String.fromCharCode(W)}function se(W){var J=W.slice(1,-1);return J in $?$[J]:J.charAt(0)==="#"?ie(parseInt(J.substr(1).replace("x","0x"))):(Y.error("entity not found:"+W),W)}function fe(W){if(W>Ee){var J=R.substring(Ee,W).replace(/&#?\w+;/g,se);ue&&ae(Ee),V.characters(J,0,W-Ee),Ee=W}}function ae(W,J){for(;W>=pe&&(J=Ce.exec(R));)ee=J.index,pe=ee+J[0].length,ue.lineNumber++;ue.columnNumber=W-ee+1}for(var ee=0,pe=0,Ce=/.*(?:\r\n?|\n)|.*$/g,ue=V.locator,ce=[{currentNSMap:B}],Ne={},Ee=0;;){try{var Te=R.indexOf("<",Ee);if(Te<0){if(!R.substr(Ee).match(/^\s*$/)){var rt=V.doc,We=rt.createTextNode(R.substr(Ee));rt.appendChild(We),V.currentElement=We}return}switch(Te>Ee&&fe(Te),R.charAt(Te+1)){case"/":var He=R.indexOf(">",Te+3),xe=R.substring(Te+2,He).replace(/[ \t\n\r]+$/g,""),Ge=ce.pop();He<0?(xe=R.substring(Te+2).replace(/[\s<].*/,""),Y.error("end tag name: "+xe+" is not complete:"+Ge.tagName),He=Te+1+xe.length):xe.match(/\s</)&&(xe=xe.replace(/[\s<].*/,""),Y.error("end tag name: "+xe+" maybe not complete"),He=Te+1+xe.length);var Je=Ge.localNSMap,Ie=Ge.tagName==xe,ze=Ie||Ge.tagName&&Ge.tagName.toLowerCase()==xe.toLowerCase();if(ze){if(V.endElement(Ge.uri,Ge.localName,xe),Je)for(var Le in Je)Object.prototype.hasOwnProperty.call(Je,Le)&&V.endPrefixMapping(Le);Ie||Y.fatalError("end tag name: "+xe+" is not match the current start tagName:"+Ge.tagName)}else ce.push(Ge);He++;break;case"?":ue&&ae(Te),He=T(R,Te,V);break;case"!":ue&&ae(Te),He=_(R,Te,V,Y);break;default:ue&&ae(Te);var Ue=new N,Ke=ce[ce.length-1].currentNSMap,He=f(R,Te,Ue,Ke,se,Y),je=Ue.length;if(!Ue.closed&&D(R,He,Ue.tagName,Ne)&&(Ue.closed=!0,$.nbsp||Y.warning("unclosed xml attribute")),ue&&je){for(var st=w(ue,{}),U=0;U<je;U++){var P=Ue[U];ae(P.offset),P.locator=w(ue,{})}V.locator=st,v(Ue,V,Ke)&&ce.push(Ue),V.locator=ue}else v(Ue,V,Ke)&&ce.push(Ue);o.isHTML(Ue.uri)&&!Ue.closed?He=m(R,He,Ue.tagName,se,V):He++}}catch(W){if(W instanceof b)throw W;Y.error("element parse error: "+W),He=-1}He>Ee?Ee=He:fe(Math.max(Te,Ee)+1)}}function w(R,B){return B.lineNumber=R.lineNumber,B.columnNumber=R.columnNumber,B}function f(R,B,$,V,Y,ie){function se(ue,ce,Ne){$.attributeNames.hasOwnProperty(ue)&&ie.fatalError("Attribute "+ue+" redefined"),$.addValue(ue,ce,Ne)}for(var fe,ae,ee=++B,pe=i;;){var Ce=R.charAt(ee);switch(Ce){case"=":if(pe===s)fe=R.slice(B,ee),pe=a;else if(pe===n)pe=a;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(pe===a||pe===s)if(pe===s&&(ie.warning('attribute value must after "="'),fe=R.slice(B,ee)),B=ee+1,ee=R.indexOf(Ce,B),ee>0)ae=R.slice(B,ee).replace(/&#?\w+;/g,Y),se(fe,ae,B-1),pe=c;else throw new Error("attribute value no end '"+Ce+"' match");else if(pe==u)ae=R.slice(B,ee).replace(/&#?\w+;/g,Y),se(fe,ae,B),ie.warning('attribute "'+fe+'" missed start quot('+Ce+")!!"),B=ee+1,pe=c;else throw new Error('attribute value must after "="');break;case"/":switch(pe){case i:$.setTagName(R.slice(B,ee));case c:case d:case p:pe=p,$.closed=!0;case u:case s:break;case n:$.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return ie.error("unexpected end of input"),pe==i&&$.setTagName(R.slice(B,ee)),ee;case">":switch(pe){case i:$.setTagName(R.slice(B,ee));case c:case d:case p:break;case u:case s:ae=R.slice(B,ee),ae.slice(-1)==="/"&&($.closed=!0,ae=ae.slice(0,-1));case n:pe===n&&(ae=fe),pe==u?(ie.warning('attribute "'+ae+'" missed quot(")!'),se(fe,ae.replace(/&#?\w+;/g,Y),B)):((!o.isHTML(V[""])||!ae.match(/^(?:disabled|checked|selected)$/i))&&ie.warning('attribute "'+ae+'" missed value!! "'+ae+'" instead!!'),se(ae,ae,B));break;case a:throw new Error("attribute value missed!!")}return ee;case"":Ce=" ";default:if(Ce<=" ")switch(pe){case i:$.setTagName(R.slice(B,ee)),pe=d;break;case s:fe=R.slice(B,ee),pe=n;break;case u:var ae=R.slice(B,ee).replace(/&#?\w+;/g,Y);ie.warning('attribute "'+ae+'" missed quot(")!!'),se(fe,ae,B);case c:pe=d;break}else switch(pe){case n:$.tagName,(!o.isHTML(V[""])||!fe.match(/^(?:disabled|checked|selected)$/i))&&ie.warning('attribute "'+fe+'" missed value!! "'+fe+'" instead2!!'),se(fe,fe,B),B=ee,pe=s;break;case c:ie.warning('attribute space is required"'+fe+'"!!');case d:pe=s,B=ee;break;case a:pe=u,B=ee;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}ee++}}function v(R,B,$){for(var V=R.tagName,Y=null,Ce=R.length;Ce--;){var ie=R[Ce],se=ie.qName,fe=ie.value,ue=se.indexOf(":");if(ue>0)var ae=ie.prefix=se.slice(0,ue),ee=se.slice(ue+1),pe=ae==="xmlns"&&ee;else ee=se,ae=null,pe=se==="xmlns"&&"";ie.localName=ee,pe!==!1&&(Y==null&&(Y={},I($,$={})),$[pe]=Y[pe]=fe,ie.uri=o.XMLNS,B.startPrefixMapping(pe,fe))}for(var Ce=R.length;Ce--;){ie=R[Ce];var ae=ie.prefix;ae&&(ae==="xml"&&(ie.uri=o.XML),ae!=="xmlns"&&(ie.uri=$[ae||""]))}var ue=V.indexOf(":");ue>0?(ae=R.prefix=V.slice(0,ue),ee=R.localName=V.slice(ue+1)):(ae=null,ee=R.localName=V);var ce=R.uri=$[ae||""];if(B.startElement(ce,ee,V,R),R.closed){if(B.endElement(ce,ee,V),Y)for(ae in Y)Object.prototype.hasOwnProperty.call(Y,ae)&&B.endPrefixMapping(ae)}else return R.currentNSMap=$,R.localNSMap=Y,!0}function m(R,B,$,V,Y){if(/^(?:script|textarea)$/i.test($)){var ie=R.indexOf("</"+$+">",B),se=R.substring(B+1,ie);if(/[&<]/.test(se))return/^script$/i.test($)?(Y.characters(se,0,se.length),ie):(se=se.replace(/&#?\w+;/g,V),Y.characters(se,0,se.length),ie)}return B+1}function D(R,B,$,V){var Y=V[$];return Y==null&&(Y=R.lastIndexOf("</"+$+">"),Y<B&&(Y=R.lastIndexOf("</"+$)),V[$]=Y),Y<B}function I(R,B){for(var $ in R)Object.prototype.hasOwnProperty.call(R,$)&&(B[$]=R[$])}function _(R,B,$,V){var Y=R.charAt(B+2);switch(Y){case"-":if(R.charAt(B+3)==="-"){var ie=R.indexOf("-->",B+4);return ie>B?($.comment(R,B+4,ie-B-4),ie+3):(V.error("Unclosed comment"),-1)}else return-1;default:if(R.substr(B+3,6)=="CDATA["){var ie=R.indexOf("]]>",B+9);return $.startCDATA(),$.characters(R,B+9,ie-B-9),$.endCDATA(),ie+3}var se=O(R,B),fe=se.length;if(fe>1&&/!doctype/i.test(se[0][0])){var ae=se[1][0],ee=!1,pe=!1;fe>3&&(/^public$/i.test(se[2][0])?(ee=se[3][0],pe=fe>4&&se[4][0]):/^system$/i.test(se[2][0])&&(pe=se[3][0]));var Ce=se[fe-1];return $.startDTD(ae,ee,pe),$.endDTD(),Ce.index+Ce[0].length}}return-1}function T(R,B,$){var V=R.indexOf("?>",B);if(V){var Y=R.substring(B,V).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Y?(Y[0].length,$.processingInstruction(Y[1],Y[2]),V+2):-1}return-1}function N(){this.attributeNames={}}N.prototype={setTagName:function(R){if(!r.test(R))throw new Error("invalid tagName:"+R);this.tagName=R},addValue:function(R,B,$){if(!r.test(R))throw new Error("invalid attribute:"+R);this.attributeNames[R]=this.length,this[this.length++]={qName:R,value:B,offset:$}},length:0,getLocalName:function(R){return this[R].localName},getLocator:function(R){return this[R].locator},getQName:function(R){return this[R].qName},getURI:function(R){return this[R].uri},getValue:function(R){return this[R].value}};function O(R,B){var $,V=[],Y=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Y.lastIndex=B,Y.exec(R);$=Y.exec(R);)if(V.push($),$[1])return V}return Tr.XMLReader=y,Tr.ParseError=b,Tr}var Xn;function ho(){if(Xn)return Qt;Xn=1;var o=Vr(),e=zs(),t=uo(),r=lo(),i=e.DOMImplementation,s=o.NAMESPACE,n=r.ParseError,a=r.XMLReader;function u(w){this.options=w||{locator:{}}}u.prototype.parseFromString=function(w,f){var v=this.options,m=new a,D=v.domBuilder||new d,I=v.errorHandler,_=v.locator,T=v.xmlns||{},N=/\/x?html?$/.test(f),O=N?t.HTML_ENTITIES:t.XML_ENTITIES;return _&&D.setDocumentLocator(_),m.errorHandler=c(I,D,_),m.domBuilder=v.domBuilder||D,N&&(T[""]=s.HTML),T.xml=T.xml||s.XML,w&&typeof w=="string"?m.parse(w,T,O):m.errorHandler.error("invalid doc source"),D.doc};function c(w,f,v){if(!w){if(f instanceof d)return f;w=f}var m={},D=w instanceof Function;v=v||{};function I(_){var T=w[_];!T&&D&&(T=w.length==2?function(N){w(_,N)}:w),m[_]=T&&function(N){T("[xmldom "+_+"]	"+N+b(v))}||function(){}}return I("warning"),I("error"),I("fatalError"),m}function d(){this.cdata=!1}function p(w,f){f.lineNumber=w.lineNumber,f.columnNumber=w.columnNumber}d.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(w,f,v,m){var D=this.doc,I=D.createElementNS(w,v||f),_=m.length;C(this,I),this.currentElement=I,this.locator&&p(this.locator,I);for(var T=0;T<_;T++){var w=m.getURI(T),N=m.getValue(T),v=m.getQName(T),O=D.createAttributeNS(w,v);this.locator&&p(m.getLocator(T),O),O.value=O.nodeValue=N,I.setAttributeNode(O)}},endElement:function(w,f,v){var m=this.currentElement;m.tagName,this.currentElement=m.parentNode},startPrefixMapping:function(w,f){},endPrefixMapping:function(w){},processingInstruction:function(w,f){var v=this.doc.createProcessingInstruction(w,f);this.locator&&p(this.locator,v),C(this,v)},ignorableWhitespace:function(w,f,v){},characters:function(w,f,v){if(w=y.apply(this,arguments),w){if(this.cdata)var m=this.doc.createCDATASection(w);else var m=this.doc.createTextNode(w);this.currentElement?this.currentElement.appendChild(m):/^\s*$/.test(w)&&this.doc.appendChild(m),this.locator&&p(this.locator,m)}},skippedEntity:function(w){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(w){(this.locator=w)&&(w.lineNumber=0)},comment:function(w,f,v){w=y.apply(this,arguments);var m=this.doc.createComment(w);this.locator&&p(this.locator,m),C(this,m)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(w,f,v){var m=this.doc.implementation;if(m&&m.createDocumentType){var D=m.createDocumentType(w,f,v);this.locator&&p(this.locator,D),C(this,D),this.doc.doctype=D}},warning:function(w){console.warn("[xmldom warning]	"+w,b(this.locator))},error:function(w){console.error("[xmldom error]	"+w,b(this.locator))},fatalError:function(w){throw new n(w,this.locator)}};function b(w){if(w)return`
@`+(w.systemId||"")+"#[line:"+w.lineNumber+",col:"+w.columnNumber+"]"}function y(w,f,v){return typeof w=="string"?w.substr(f,v):w.length>=f+v||f?new java.lang.String(w,f,v)+"":w}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(w){d.prototype[w]=function(){return null}});function C(w,f){w.currentElement?w.currentElement.appendChild(f):w.doc.appendChild(f)}return Qt.__DOMHandler=d,Qt.DOMParser=u,Qt.DOMImplementation=e.DOMImplementation,Qt.XMLSerializer=e.XMLSerializer,Qt}var $n;function co(){if($n)return dr;$n=1;var o=zs();return dr.DOMImplementation=o.DOMImplementation,dr.XMLSerializer=o.XMLSerializer,dr.DOMParser=ho().DOMParser,dr}var Us=co();const on=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,fo=1,po=3,Ms=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function Zr(){var o=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(t=="x"?r:r&7|8).toString(16)});return e}function go(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function qs(o){return!!(o&&o.nodeType==1)}function ht(o){return!isNaN(parseFloat(o))&&isFinite(o)}function js(o){let e=parseFloat(o);return ht(o)===!1?!1:typeof o=="string"&&o.indexOf(".")>-1?!0:Math.floor(e)!==e}function rr(o){var e=["Webkit","webkit","Moz","O","ms"],t=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=o.toLowerCase(),i=e.length;if(typeof document>"u"||typeof document.body.style[r]<"u")return o;for(var s=0;s<i;s++)if(typeof document.body.style[t[s]+r]<"u")return t[s]+r;return o}function Ws(o){for(var e=1,t=arguments.length;e<t;e++){var r=arguments[e];for(var i in r)o[i]===void 0&&(o[i]=r[i])}return o}function yt(o){var e=[].slice.call(arguments,1);return e.forEach(function(t){t&&Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}),o}function vo(o,e,t){var r=ar(o,e,t);return e.splice(r,0,o),r}function ar(o,e,t,r,i){var s=r||0,n=i||e.length,a=parseInt(s+(n-s)/2),u;return t||(t=function(c,d){if(c>d)return 1;if(c<d)return-1;if(c==d)return 0}),n-s<=0?a:(u=t(e[a],o),n-s===1?u>=0?a:a+1:u===0?a:u===-1?ar(o,e,t,a,n):ar(o,e,t,s,a))}function Fr(o,e,t,r,i){var s=r||0,n=i||e.length,a=parseInt(s+(n-s)/2),u;return t||(t=function(c,d){if(c>d)return 1;if(c<d)return-1;if(c==d)return 0}),n-s<=0?-1:(u=t(e[a],o),n-s===1?u===0?a:-1:u===0?a:u===-1?Fr(o,e,t,a,n):Fr(o,e,t,s,a))}function Nr(o){var e=window.getComputedStyle(o),t=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return t.forEach(function(n){i+=parseFloat(e[n])||0}),r.forEach(function(n){s+=parseFloat(e[n])||0}),{height:s,width:i}}function Pr(o){var e=window.getComputedStyle(o),t=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return t.forEach(function(n){i+=parseFloat(e[n])||0}),r.forEach(function(n){s+=parseFloat(e[n])||0}),{height:s,width:i}}function Yi(o){let e,t=o.ownerDocument;if(o.nodeType==Node.TEXT_NODE){let r=t.createRange();r.selectNodeContents(o),e=r.getBoundingClientRect()}else e=o.getBoundingClientRect();return e}function zr(){var o=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:o,bottom:e,width:o,height:e}}function un(o,e){for(var t=o.parentNode,r=t.childNodes,i,s=-1,n=0;n<r.length&&(i=r[n],i.nodeType===e&&s++,i!=o);n++);return s}function mo(o){return un(o,po)}function Hs(o){return un(o,fo)}function yr(o){return["xml","opf","ncx"].indexOf(o)>-1}function Vs(o,e){return new Blob([o],{type:e})}function Ur(o,e){var t,r=Vs(o,e);return t=Ms.createObjectURL(r),t}function Zs(o){return Ms.revokeObjectURL(o)}function Ki(o,e){var t,r;if(typeof o=="string")return t=btoa(o),r="data:"+e+";base64,"+t,r}function Gs(o){return Object.prototype.toString.call(o).slice(8,-1)}function Lt(o,e,t){var r,i;return typeof DOMParser>"u"||t?i=Us.DOMParser:i=DOMParser,o.charCodeAt(0)===65279&&(o=o.slice(1)),r=new i().parseFromString(o,e),r}function nt(o,e){var t;if(!o)throw new Error("No Element Provided");if(typeof o.querySelector<"u")return o.querySelector(e);if(t=o.getElementsByTagName(e),t.length)return t[0]}function qt(o,e){return typeof o.querySelector<"u"?o.querySelectorAll(e):o.getElementsByTagName(e)}function ir(o,e,t){var r,i;if(typeof o.querySelector<"u"){e+="[";for(var s in t)e+=s+"~='"+t[s]+"'";return e+="]",o.querySelector(e)}else if(r=o.getElementsByTagName(e),i=Array.prototype.slice.call(r,0).filter(function(n){for(var a in t)if(n.getAttribute(a)===t[a])return!0;return!1}),i)return i[0]}function Mr(o,e){var t=o.ownerDocument||o;typeof t.createTreeWalker<"u"?Xs(o,e,NodeFilter.SHOW_TEXT):ln(o,function(r){r&&r.nodeType===3&&e(r)})}function Xs(o,e,t){var r=document.createTreeWalker(o,t,null,!1);let i;for(;i=r.nextNode();)e(i)}function ln(o,e){if(e(o))return!0;if(o=o.firstChild,o)do{if(ln(o,e))return!0;o=o.nextSibling}while(o)}function $s(o){return new Promise(function(e,t){var r=new FileReader;r.readAsDataURL(o),r.onloadend=function(){e(r.result)}})}function Ve(){this.resolve=null,this.reject=null,this.id=Zr(),this.promise=new Promise((o,e)=>{this.resolve=o,this.reject=e}),Object.freeze(this)}function qr(o,e,t){var r;if(typeof o.querySelector<"u"&&(r=o.querySelector(`${e}[*|type="${t}"]`)),!r||r.length===0){r=qt(o,e);for(var i=0;i<r.length;i++)if(r[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||r[i].getAttribute("epub:type")===t)return r[i]}else return r}function Ji(o){for(var e=[],t=o.childNodes,r=0;r<t.length;r++){let i=t[r];i.nodeType===1&&e.push(i)}return e}function Qi(o){for(var e=[o];o;o=o.parentNode)e.unshift(o);return e}function nr(o,e,t){for(var r=[],i=o.childNodes,s=0;s<i.length;s++){let n=i[s];if(n.nodeType===1&&n.nodeName.toLowerCase()===e){if(t)return n;r.push(n)}}if(!t)return r}function yo(o,e){let t;if(!(o===null||e===""))for(t=o.parentNode;t.nodeType===1;){if(t.tagName.toLowerCase()===e)return t;t=t.parentNode}}class Ys{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let t=e.parentNode,r=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,r),this.setEnd(t,r+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let t=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,t)}_commonAncestorContainer(e,t){var r=Qi(e||this.startContainer),i=Qi(t||this.endContainer);if(r[0]==i[0]){for(var s=0;s<r.length;s++)if(r[s]!=i[s])return r[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const wo=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:Ys,blob2base64:$s,borders:Pr,bounds:Nr,createBase64Url:Ki,createBlob:Vs,createBlobUrl:Ur,defaults:Ws,defer:Ve,documentHeight:go,extend:yt,filterChildren:nr,findChildren:Ji,getParentByTagName:yo,indexOfElementNode:Hs,indexOfNode:un,indexOfSorted:Fr,indexOfTextNode:mo,insert:vo,isElement:qs,isFloat:js,isNumber:ht,isXml:yr,locationOf:ar,nodeBounds:Yi,parents:Qi,parse:Lt,prefixed:rr,qs:nt,qsa:qt,qsp:ir,querySelectorByType:qr,requestAnimationFrame:on,revokeBlobUrl:Zs,sprint:Mr,treeWalker:Xs,type:Gs,uuid:Zr,walk:ln,windowBounds:zr},Symbol.toStringTag,{value:"Module"}));var Di,Yn;function bo(){if(Yn)return Di;if(Yn=1,!o)var o={cwd:function(){return"/"}};function e(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+s)}function t(s,n){for(var a="",u=-1,c=0,d,p=0;p<=s.length;++p){if(p<s.length)d=s.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(u===p-1||c===1))if(u!==p-1&&c===2){if(a.length<2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){for(var b=a.length-1,y=b;y>=0&&a.charCodeAt(y)!==47;--y);if(y!==b){y===-1?a="":a=a.slice(0,y),u=p,c=0;continue}}else if(a.length===2||a.length===1){a="",u=p,c=0;continue}}n&&(a.length>0?a+="/..":a="..")}else a.length>0?a+="/"+s.slice(u+1,p):a=s.slice(u+1,p);u=p,c=0}else d===46&&c!==-1?++c:c=-1}return a}function r(s,n){var a=n.dir||n.root,u=n.base||(n.name||"")+(n.ext||"");return a?a===n.root?a+u:a+s+u:u}var i={resolve:function(){for(var n="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var d;c>=0?d=arguments[c]:(u===void 0&&(u=o.cwd()),d=u),e(d),d.length!==0&&(n=d+"/"+n,a=d.charCodeAt(0)===47)}return n=t(n,!a),a?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(e(n),n.length===0)return".";var a=n.charCodeAt(0)===47,u=n.charCodeAt(n.length-1)===47;return n=t(n,!a),n.length===0&&!a&&(n="."),n.length>0&&u&&(n+="/"),a?"/"+n:n},isAbsolute:function(n){return e(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(n===void 0?n=u:n+="/"+u)}return n===void 0?".":i.normalize(n)},relative:function(n,a){if(e(n),e(a),n===a||(n=i.resolve(n),a=i.resolve(a),n===a))return"";for(var u=1;u<n.length&&n.charCodeAt(u)===47;++u);for(var c=n.length,d=c-u,p=1;p<a.length&&a.charCodeAt(p)===47;++p);for(var b=a.length,y=b-p,C=d<y?d:y,w=-1,f=0;f<=C;++f){if(f===C){if(y>C){if(a.charCodeAt(p+f)===47)return a.slice(p+f+1);if(f===0)return a.slice(p+f)}else d>C&&(n.charCodeAt(u+f)===47?w=f:f===0&&(w=0));break}var v=n.charCodeAt(u+f),m=a.charCodeAt(p+f);if(v!==m)break;v===47&&(w=f)}var D="";for(f=u+w+1;f<=c;++f)(f===c||n.charCodeAt(f)===47)&&(D.length===0?D+="..":D+="/..");return D.length>0?D+a.slice(p+w):(p+=w,a.charCodeAt(p)===47&&++p,a.slice(p))},_makeLong:function(n){return n},dirname:function(n){if(e(n),n.length===0)return".";for(var a=n.charCodeAt(0),u=a===47,c=-1,d=!0,p=n.length-1;p>=1;--p)if(a=n.charCodeAt(p),a===47){if(!d){c=p;break}}else d=!1;return c===-1?u?"/":".":u&&c===1?"//":n.slice(0,c)},basename:function(n,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(n);var u=0,c=-1,d=!0,p;if(a!==void 0&&a.length>0&&a.length<=n.length){if(a.length===n.length&&a===n)return"";var b=a.length-1,y=-1;for(p=n.length-1;p>=0;--p){var C=n.charCodeAt(p);if(C===47){if(!d){u=p+1;break}}else y===-1&&(d=!1,y=p+1),b>=0&&(C===a.charCodeAt(b)?--b===-1&&(c=p):(b=-1,c=y))}return u===c?c=y:c===-1&&(c=n.length),n.slice(u,c)}else{for(p=n.length-1;p>=0;--p)if(n.charCodeAt(p)===47){if(!d){u=p+1;break}}else c===-1&&(d=!1,c=p+1);return c===-1?"":n.slice(u,c)}},extname:function(n){e(n);for(var a=-1,u=0,c=-1,d=!0,p=0,b=n.length-1;b>=0;--b){var y=n.charCodeAt(b);if(y===47){if(!d){u=b+1;break}continue}c===-1&&(d=!1,c=b+1),y===46?a===-1?a=b:p!==1&&(p=1):a!==-1&&(p=-1)}return a===-1||c===-1||p===0||p===1&&a===c-1&&a===u+1?"":n.slice(a,c)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof n);return r("/",n)},parse:function(n){e(n);var a={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return a;var u=n.charCodeAt(0),c=u===47,d;c?(a.root="/",d=1):d=0;for(var p=-1,b=0,y=-1,C=!0,w=n.length-1,f=0;w>=d;--w){if(u=n.charCodeAt(w),u===47){if(!C){b=w+1;break}continue}y===-1&&(C=!1,y=w+1),u===46?p===-1?p=w:f!==1&&(f=1):p!==-1&&(f=-1)}return p===-1||y===-1||f===0||f===1&&p===y-1&&p===b+1?y!==-1&&(b===0&&c?a.base=a.name=n.slice(1,y):a.base=a.name=n.slice(b,y)):(b===0&&c?(a.name=n.slice(1,p),a.base=n.slice(1,y)):(a.name=n.slice(b,p),a.base=n.slice(b,y)),a.ext=n.slice(p,y)),b>0?a.dir=n.slice(0,b-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",posix:null};return Di=i,Di}var _o=bo();const Zt=ur(_o);class jt{constructor(e){var t,r;t=e.indexOf("://"),t>-1&&(e=new URL(e).pathname),r=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(e){return Zt.parse(e)}isAbsolute(e){return Zt.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return Zt.resolve(this.directory,e)}relative(e){var t=e&&e.indexOf("://")>-1;return t?e:Zt.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class Nt{constructor(e,t){var r=e.indexOf("://")>-1,i=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=t,!r&&t!==!1&&typeof t!="string"&&window&&window.location&&(this.base=window.location.href),r||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(s=new jt(this.base),i=s.resolve(i))}this.Path=new jt(i),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var t=e.indexOf("://")>-1,r;return t?e:(r=Zt.resolve(this.directory,e),this.origin+r)}relative(e){return Zt.relative(e,this.directory)}toString(){return this.href}}const er=1,Dt=3,Eo=9;class Ze{constructor(e,t,r){var i;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof Ze))return new Ze(e,t,r);if(typeof t=="string"?this.base=this.parseComponent(t):typeof t=="object"&&t.steps&&(this.base=t),i=this.checkType(e),i==="string")return this.str=e,yt(this,this.parse(e));if(i==="range")return yt(this,this.fromRange(e,this.base,r));if(i==="node")return yt(this,this.fromNode(e,this.base,r));if(i==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(Gs(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof Ze?"EpubCFI":!1}parse(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},r,i,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),r?(t.base=this.parseComponent(r),i=this.getPathComponent(e),t.path=this.parseComponent(i),s=this.getRange(e),s&&(t.range=!0,t.start=this.parseComponent(s[0]),t.end=this.parseComponent(s[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1})}parseComponent(e){var t={steps:[],terminal:{offset:null,assertion:null}},r=e.split(":"),i=r[0].split("/"),s;return r.length>1&&(s=r[1],t.terminal=this.parseTerminal(s)),i[0]===""&&i.shift(),t.steps=i.map((function(n){return this.parseStep(n)}).bind(this)),t}parseStep(e){var t,r,i,s,n;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(n=s[1]),r=parseInt(e),!isNaN(r))return r%2===0?(t="element",i=r/2-1):(t="text",i=(r-1)/2),{type:t,index:i,id:n||null}}parseTerminal(e){var t,r,i=e.match(/\[(.*)\]/);return i&&i[1]?(t=parseInt(e.split("[")[0]),r=i[1]):t=parseInt(e),ht(t)||(t=null),{offset:t,assertion:r}}getChapterComponent(e){var t=e.split("!");return t[0]}getPathComponent(e){var t=e.split("!");if(t[1])return t[1].split(",")[0]}getRange(e){var t=e.split(",");return t.length===3?[t[1],t[2]]:!1}getCharecterOffsetComponent(e){var t=e.split(":");return t[1]||""}joinSteps(e){return e?e.map(function(t){var r="";return t.type==="element"&&(r+=(t.index+1)*2),t.type==="text"&&(r+=1+2*t.index),t.id&&(r+="["+t.id+"]"),r}).join("/"):""}segmentString(e){var t="/";return t+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(t+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(t+="["+e.terminal.assertion+"]"),t}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,t){var r,i,s,n;if(typeof e=="string"&&(e=new Ze(e)),typeof t=="string"&&(t=new Ze(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;e.range?(r=e.path.steps.concat(e.start.steps),s=e.start.terminal):(r=e.path.steps,s=e.path.terminal),t.range?(i=t.path.steps.concat(t.start.steps),n=t.start.terminal):(i=t.path.steps,n=t.path.terminal);for(var a=0;a<r.length;a++){if(!r[a])return-1;if(!i[a]||r[a].index>i[a].index)return 1;if(r[a].index<i[a].index)return-1}return r.length<i.length?-1:s.offset>n.offset?1:s.offset<n.offset?-1:0}step(e){var t=e.nodeType===Dt?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}filteredStep(e,t){var r=this.filter(e,t),i;if(r)return i=r.nodeType===Dt?"text":"element",{id:r.id,tagName:r.tagName,type:i,index:this.filteredPosition(r,t)}}pathTo(e,t,r){for(var i={steps:[],terminal:{offset:null,assertion:null}},s=e,n;s&&s.parentNode&&s.parentNode.nodeType!=Eo;)r?n=this.filteredStep(s,r):n=this.step(s),n&&i.steps.unshift(n),s=s.parentNode;return t!=null&&t>=0&&(i.terminal.offset=t,i.steps[i.steps.length-1].type!="text"&&i.steps.push({type:"text",index:0})),i}equalStep(e,t){return!e||!t?!1:e.index===t.index&&e.id===t.id&&e.type===t.type}fromRange(e,t,r){var i={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,n=e.endContainer,a=e.startOffset,u=e.endOffset,c=!1;if(r&&(c=s.ownerDocument.querySelector("."+r)!=null),typeof t=="string"?(i.base=this.parseComponent(t),i.spinePos=i.base.steps[1].index):typeof t=="object"&&(i.base=t),e.collapsed)c&&(a=this.patchOffset(s,a,r)),i.path=this.pathTo(s,a,r);else{i.range=!0,c&&(a=this.patchOffset(s,a,r)),i.start=this.pathTo(s,a,r),c&&(u=this.patchOffset(n,u,r)),i.end=this.pathTo(n,u,r),i.path={steps:[],terminal:null};var d=i.start.steps.length,p;for(p=0;p<d&&this.equalStep(i.start.steps[p],i.end.steps[p]);p++)p===d-1?i.start.terminal===i.end.terminal&&(i.path.steps.push(i.start.steps[p]),i.range=!1):i.path.steps.push(i.start.steps[p]);i.start.steps=i.start.steps.slice(i.path.steps.length),i.end.steps=i.end.steps.slice(i.path.steps.length)}return i}fromNode(e,t,r){var i={range:!1,base:{},path:{},start:null,end:null};return typeof t=="string"?(i.base=this.parseComponent(t),i.spinePos=i.base.steps[1].index):typeof t=="object"&&(i.base=t),i.path=this.pathTo(e,null,r),i}filter(e,t){var r,i,s,n,a,u=!1;return e.nodeType===Dt?(u=!0,s=e.parentNode,r=e.parentNode.classList.contains(t)):(u=!1,r=e.classList.contains(t)),r&&u?(n=s.previousSibling,a=s.nextSibling,n&&n.nodeType===Dt?i=n:a&&a.nodeType===Dt&&(i=a),i||e):r&&!u?!1:e}patchOffset(e,t,r){if(e.nodeType!=Dt)throw new Error("Anchor must be a text node");var i=e,s=t;for(e.parentNode.classList.contains(r)&&(i=e.parentNode);i.previousSibling;){if(i.previousSibling.nodeType===er)if(i.previousSibling.classList.contains(r))s+=i.previousSibling.textContent.length;else break;else s+=i.previousSibling.textContent.length;i=i.previousSibling}return s}normalizedMap(e,t,r){var i={},s=-1,n,a=e.length,u,c;for(n=0;n<a;n++)u=e[n].nodeType,u===er&&e[n].classList.contains(r)&&(u=Dt),n>0&&u===Dt&&c===Dt?i[n]=s:t===u&&(s=s+1,i[n]=s),c=u;return i}position(e){var t,r;return e.nodeType===er?(t=e.parentNode.children,t||(t=Ji(e.parentNode)),r=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),r=t.indexOf(e)),r}filteredPosition(e,t){var r,i,s;return e.nodeType===er?(r=e.parentNode.children,s=this.normalizedMap(r,er,t)):(r=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,r=e.parentNode.childNodes),s=this.normalizedMap(r,Dt,t)),i=Array.prototype.indexOf.call(r,e),s[i]}stepsToXpath(e){var t=[".","*"];return e.forEach(function(r){var i=r.index+1;r.id?t.push("*[position()="+i+" and @id='"+r.id+"']"):r.type==="text"?t.push("text()["+i+"]"):t.push("*["+i+"]")}),t.join("/")}stepsToQuerySelector(e){var t=["html"];return e.forEach(function(r){var i=r.index+1;r.id?t.push("#"+r.id):r.type==="text"||t.push("*:nth-child("+i+")")}),t.join(">")}textNodes(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(r){return r.nodeType===Dt?!0:!!(t&&r.classList.contains(t))})}walkToNode(e,t,r){var i=t||document,s=i.documentElement,n,a,u=e.length,c;for(c=0;c<u&&(a=e[c],a.type==="element"?a.id?s=i.getElementById(a.id):(n=s.children||Ji(s),s=n[a.index]):a.type==="text"&&(s=this.textNodes(s,r)[a.index]),!!s);c++);return s}findNode(e,t,r){var i=t||document,s,n;return!r&&typeof i.evaluate<"u"?(n=this.stepsToXpath(e),s=i.evaluate(n,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):r?s=this.walkToNode(e,i,r):s=this.walkToNode(e,i),s}fixMiss(e,t,r,i){var s=this.findNode(e.slice(0,-1),r,i),n=s.childNodes,a=this.normalizedMap(n,Dt,i),u,c,d=e[e.length-1].index;for(let p in a){if(!a.hasOwnProperty(p))return;if(a[p]===d)if(u=n[p],c=u.textContent.length,t>c)t=t-c;else{u.nodeType===er?s=u.childNodes[0]:s=u;break}}return{container:s,offset:t}}toRange(e,t){var r=e||document,i,s,n,a,u,c=this,d,p,b=t?r.querySelector("."+t)!=null:!1,y;if(typeof r.createRange<"u"?i=r.createRange():i=new Ys,c.range?(s=c.start,d=c.path.steps.concat(s.steps),a=this.findNode(d,r,b?t:null),n=c.end,p=c.path.steps.concat(n.steps),u=this.findNode(p,r,b?t:null)):(s=c.path,d=c.path.steps,a=this.findNode(c.path.steps,r,b?t:null)),a)try{s.terminal.offset!=null?i.setStart(a,s.terminal.offset):i.setStart(a,0)}catch{y=this.fixMiss(d,s.terminal.offset,r,b?t:null),i.setStart(y.container,y.offset)}else return console.log("No startContainer found for",this.toString()),null;if(u)try{n.terminal.offset!=null?i.setEnd(u,n.terminal.offset):i.setEnd(u,0)}catch{y=this.fixMiss(p,c.end.terminal.offset,r,b?t:null),i.setEnd(y.container,y.offset)}return i}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,t,r){var i=parseInt(t),s=(e+1)*2,n="/"+s+"/";return n+=(i+1)*2,r&&(n+="["+r+"]"),n}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class It{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}deregister(e){let t;for(let r=0;r<this.hooks.length;r++)if(t=this.hooks[r],t===e){this.hooks.splice(r,1);break}}trigger(){var e=arguments,t=this.context,r=[];return this.hooks.forEach(function(i){try{var s=i.apply(t,e)}catch(n){console.log(n)}s&&typeof s.then=="function"&&r.push(s)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}}function Ks(o,e){var t,r,i=e.url,s=i.indexOf("://")>-1;o&&(r=nt(o,"head"),t=nt(r,"base"),t||(t=o.createElement("base"),r.insertBefore(t,r.firstChild)),!s&&window&&window.location&&(i=window.location.origin+i),t.setAttribute("href",i))}function xo(o,e){var t,r,i=e.canonical;o&&(t=nt(o,"head"),r=nt(t,"link[rel='canonical']"),r?r.setAttribute("href",i):(r=o.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",i),t.appendChild(r)))}function Ao(o,e){var t,r,i=e.idref;o&&(t=nt(o,"head"),r=nt(t,"link[property='dc.identifier']"),r?r.setAttribute("content",i):(r=o.createElement("meta"),r.setAttribute("name","dc.identifier"),r.setAttribute("content",i),t.appendChild(r)))}function Do(o,e){var t=o.querySelectorAll("a[href]");if(t.length)for(var r=nt(o.ownerDocument,"base"),i=r?r.getAttribute("href"):void 0,s=(function(a){var u=a.getAttribute("href");if(u.indexOf("mailto:")!==0){var c=u.indexOf("://")>-1;if(c)a.setAttribute("target","_blank");else{var d;try{d=new Nt(u,i)}catch{}a.onclick=function(){return d&&d.hash?e(d.Path.path+d.hash):e(d?d.Path.path:u),!1}}}}).bind(this),n=0;n<t.length;n++)s(t[n])}function Kn(o,e,t){return e.forEach(function(r,i){r&&t[i]&&(r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=o.replace(new RegExp(r,"g"),t[i]))}),o}function wr(o,e,t,r){var i=typeof window<"u"?window.URL:!1,s=i?"blob":"arraybuffer",n=new Ve,a=new XMLHttpRequest,u=XMLHttpRequest.prototype,c;"overrideMimeType"in u||Object.defineProperty(u,"overrideMimeType",{value:function(){}}),t&&(a.withCredentials=!0),a.onreadystatechange=p,a.onerror=d,a.open("GET",o,!0);for(c in r)a.setRequestHeader(c,r[c]);e=="json"&&a.setRequestHeader("Accept","application/json"),e||(e=new jt(o).extension),e=="blob"&&(a.responseType=s),yr(e)&&a.overrideMimeType("text/xml"),e=="binary"&&(a.responseType="arraybuffer"),a.send();function d(b){n.reject(b)}function p(){if(this.readyState===XMLHttpRequest.DONE){var b=!1;if((this.responseType===""||this.responseType==="document")&&(b=this.responseXML),this.status===200||this.status===0||b){var y;if(!this.response&&!b)return n.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),n.promise;if(this.status===403)return n.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),n.promise;b?y=this.responseXML:yr(e)?y=Lt(this.response,"text/xml"):e=="xhtml"?y=Lt(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?y=Lt(this.response,"text/html"):e=="json"?y=JSON.parse(this.response):e=="blob"?i?y=this.response:y=new Blob([this.response]):y=this.response,n.resolve(y)}else n.reject({status:this.status,message:this.response,stack:new Error().stack})}}return n.promise}class Co{constructor(e,t){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,t?this.hooks=t:(this.hooks={},this.hooks.serialize=new It(this),this.hooks.content=new It(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var t=e||this.request||wr,r=new Ve,i=r.promise;return this.contents?r.resolve(this.contents):t(this.url).then((function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){r.resolve(this.contents)}).bind(this)).catch(function(s){r.reject(s)}),i}base(){return Ks(this.document,this)}render(e){var t=new Ve,r=t.promise;return this.output,this.load(e).then((function(i){var s=typeof navigator<"u"&&navigator.userAgent||"",n=s.indexOf("Trident")>=0,a;typeof XMLSerializer>"u"||n?a=Us.DOMParser:a=XMLSerializer;var u=new a;return this.output=u.serializeToString(i),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){t.resolve(this.output)}).bind(this)).catch(function(i){t.reject(i)}),r}find(e){var t=this,r=[],i=e.toLowerCase(),s=function(n){for(var a=n.textContent.toLowerCase(),u=t.document.createRange(),c,d,p=-1,b,y=150;d!=-1;)d=a.indexOf(i,p+1),d!=-1&&(u=t.document.createRange(),u.setStart(n,d),u.setEnd(n,d+i.length),c=t.cfiFromRange(u),n.textContent.length<y?b=n.textContent:(b=n.textContent.substring(d-y/2,d+y/2),b="..."+b+"..."),r.push({cfi:c,excerpt:b})),p=d};return Mr(t.document,function(n){s(n)}),r}search(e,t=5){if(typeof document.createTreeWalker>"u")return this.find(e);let r=[];const i=150,s=this,n=e.toLowerCase(),a=function(p){const C=p.reduce((w,f)=>w+f.textContent,"").toLowerCase().indexOf(n);if(C!=-1){const f=C+n.length;let v=0,m=0;if(C<p[0].length){let D;for(;v<p.length-1&&(m+=p[v].length,!(f<=m));)v+=1;let I=p[0],_=p[v],T=s.document.createRange();T.setStart(I,C);let N=p.slice(0,v).reduce((R,B)=>R+B.textContent.length,0);T.setEnd(_,N>f?f:f-N),D=s.cfiFromRange(T);let O=p.slice(0,v+1).reduce((R,B)=>R+B.textContent,"");O.length>i&&(O=O.substring(C-i/2,C+i/2),O="..."+O+"..."),r.push({cfi:D,excerpt:O})}}},u=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1);let c,d=[];for(;c=u.nextNode();)d.push(c),d.length==t&&(a(d.slice(0,t)),d=d.slice(1,t));return d.length>0&&a(d),r}reconcileLayoutSettings(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(r){var i=r.replace("rendition:",""),s=i.indexOf("-"),n,a;s!=-1&&(n=i.slice(0,s),a=i.slice(s+1),t[n]=a)}),t}cfiFromRange(e){return new Ze(e,this.cfiBase).toString()}cfiFromElement(e){return new Ze(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class So{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new It,this.hooks.content=new It,this.hooks.content.register(Ks),this.hooks.content.register(xo),this.hooks.content.register(Ao),this.epubcfi=new Ze,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,t,r){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((i,s)=>{var n=this.manifest[i.idref],a;i.index=s,i.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,i.index,i.id),i.href&&(i.url=t(i.href,!0),i.canonical=r(i.href)),n&&(i.href=n.href,i.url=t(i.href,!0),i.canonical=r(i.href),n.properties.length&&i.properties.push.apply(i.properties,n.properties)),i.linear==="yes"?(i.prev=(function(){let u=i.index;for(;u>0;){let c=this.get(u-1);if(c&&c.linear)return c;u-=1}}).bind(this),i.next=(function(){let u=i.index;for(;u<this.spineItems.length-1;){let c=this.get(u+1);if(c&&c.linear)return c;u+=1}}).bind(this)):(i.prev=function(){},i.next=function(){}),a=new Co(i,this.hooks),this.append(a)}),this.loaded=!0}get(e){var t=0;if(typeof e>"u")for(;t<this.spineItems.length;){let r=this.spineItems[t];if(r&&r.linear)break;t+=1}else this.epubcfi.isCfiString(e)?t=new Ze(e).spinePos:typeof e=="number"||isNaN(e)===!1?t=e:typeof e=="string"&&e.indexOf("#")===0?t=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}append(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(t,r){t.index=r}),0}remove(e){var t=this.spineItems.indexOf(e);if(t>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let t=this.get(e);if(t&&t.linear)return t;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class hn{constructor(e){this._q=[],this.context=e,this.tick=on,this.running=!1,this.paused=!1}enqueue(){var e,t,r,i=[].shift.call(arguments),s=arguments;if(!i)throw new Error("No Task Provided");return typeof i=="function"?(e=new Ve,t=e.promise,r={task:i,args:s,deferred:e,promise:t}):r={promise:i},this._q.push(r),this.paused==!1&&!this.running&&this.run(),r.promise}dequeue(){var e,t,r;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return r=t.apply(this.context,e.args),r&&typeof r.then=="function"?r.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,r),e.promise);if(e.promise)return e.promise}else return e=new Ve,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new Ve),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const Gr="0.3",Ir=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],we={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class Js{constructor(e,t,r){this.spine=e,this.request=t,this.pause=r||100,this.q=new hn(this),this.epubcfi=new Ze,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(t){var r=new Ve,i=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(i),e.unload(),this.processingTimeout=setTimeout(()=>r.resolve(i),this.pause),r.promise}).bind(this))}parse(e,t,r){var i=[],s,n=e.ownerDocument,a=nt(n,"body"),u=0,c,d=r||this.break,p=function(b){var y=b.length,C,w=0;if(b.textContent.trim().length===0)return!1;for(u==0&&(s=this.createRange(),s.startContainer=b,s.startOffset=0),C=d-u,C>y&&(u+=y,w=y);w<y;)if(C=d-u,u===0&&(w+=1,s=this.createRange(),s.startContainer=b,s.startOffset=w),w+C>=y)u+=y-w,w=y;else{w+=C,s.endContainer=b,s.endOffset=w;let f=new Ze(s,t).toString();i.push(f),u=0}c=b};if(Mr(a,p.bind(this)),s&&s.startContainer&&c){s.endContainer=c,s.endOffset=c.length;let b=new Ze(s,t).toString();i.push(b),u=0}return i}generateFromWords(e,t,r){var i=e?new Ze(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(s){s.linear&&(i?s.index>=i.spinePos&&this.q.enqueue(this.processWords.bind(this),s,t,i,r):this.q.enqueue(this.processWords.bind(this),s,t,i,r))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,t,r,i){return i&&this._locationsWords.length>=i?Promise.resolve():e.load(this.request).then((function(s){var n=new Ve,a=this.parseWords(s,e,t,r),u=i-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(a.length>=i?a.slice(0,u):a),e.unload(),this.processingTimeout=setTimeout(()=>n.resolve(a),this.pause),n.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,t,r,i){var s=t.cfiBase,n=[],a=e.ownerDocument,u=nt(a,"body"),c=r,d=i?i.spinePos!==t.index:!0,p;i&&t.index===i.spinePos&&(p=i.findNode(i.range?i.path.steps.concat(i.start.steps):i.path.steps,e.ownerDocument));var b=function(y){if(!d)if(y===p)d=!0;else return!1;if(y.textContent.length<10&&y.textContent.trim().length===0)return!1;var C=this.countWords(y.textContent),w,f=0;if(C===0)return!1;for(w=c-this._wordCounter,w>C&&(this._wordCounter+=C,f=C);f<C;)if(w=c-this._wordCounter,f+w>=C)this._wordCounter+=C-f,f=C;else{f+=w;let v=new Ze(y,s);n.push({cfi:v.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return Mr(u,b.bind(this)),n}locationFromCfi(e){let t;return Ze.prototype.isCfiString(e)&&(e=new Ze(e)),this._locations.length===0?-1:(t=ar(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(e){if(this._locations.length===0)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var t=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t}cfiFromPercentage(e){let t;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let r=new Ze(this._locations[this.total]);return r.collapse(),r.toString()}return t=Math.ceil(this.total*e),this.cfiFromLocation(t)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var t;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(we.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}Ft(Js.prototype);class To{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var t;if(!e)throw new Error("Container File Not Found");if(t=nt(e,"rootfile"),!t)throw new Error("No RootFile Found");this.packagePath=t.getAttribute("full-path"),this.directory=Zt.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class Jn{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var t,r,i;if(!e)throw new Error("Package File Not Found");if(t=nt(e,"metadata"),!t)throw new Error("No Metadata Found");if(r=nt(e,"manifest"),!r)throw new Error("No Manifest Found");if(i=nt(e,"spine"),!i)throw new Error("No Spine Found");return this.manifest=this.parseManifest(r),this.navPath=this.findNavPath(r),this.ncxPath=this.findNcxPath(r,i),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=Hs(i),this.spine=this.parseSpine(i,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=i.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var t={};return t.title=this.getElementText(e,"title"),t.creator=this.getElementText(e,"creator"),t.description=this.getElementText(e,"description"),t.pubdate=this.getElementText(e,"date"),t.publisher=this.getElementText(e,"publisher"),t.identifier=this.getElementText(e,"identifier"),t.language=this.getElementText(e,"language"),t.rights=this.getElementText(e,"rights"),t.modified_date=this.getPropertyText(e,"dcterms:modified"),t.layout=this.getPropertyText(e,"rendition:layout"),t.orientation=this.getPropertyText(e,"rendition:orientation"),t.flow=this.getPropertyText(e,"rendition:flow"),t.viewport=this.getPropertyText(e,"rendition:viewport"),t.media_active_class=this.getPropertyText(e,"media:active-class"),t.spread=this.getPropertyText(e,"rendition:spread"),t}parseManifest(e){var t={},r=qt(e,"item"),i=Array.prototype.slice.call(r);return i.forEach(function(s){var n=s.getAttribute("id"),a=s.getAttribute("href")||"",u=s.getAttribute("media-type")||"",c=s.getAttribute("media-overlay")||"",d=s.getAttribute("properties")||"";t[n]={href:a,type:u,overlay:c,properties:d.length?d.split(" "):[]}}),t}parseSpine(e,t){var r=[],i=qt(e,"itemref"),s=Array.prototype.slice.call(i);return s.forEach(function(n,a){var u=n.getAttribute("idref"),c=n.getAttribute("properties")||"",d=c.length?c.split(" "):[],p={id:n.getAttribute("id"),idref:u,linear:n.getAttribute("linear")||"yes",properties:d,index:a};r.push(p)}),r}findUniqueIdentifier(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t)return"";var r=e.getElementById(t);return r&&r.localName==="identifier"&&r.namespaceURI==="http://purl.org/dc/elements/1.1/"&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}findNavPath(e){var t=ir(e,"item",{properties:"nav"});return t?t.getAttribute("href"):!1}findNcxPath(e,t){var r=ir(e,"item",{"media-type":"application/x-dtbncx+xml"}),i;return r||(i=t.getAttribute("toc"),i&&(r=e.querySelector(`#${i}`))),r?r.getAttribute("href"):!1}findCoverPath(e){var t=nt(e,"package");t.getAttribute("version");var r=ir(e,"item",{properties:"cover-image"});if(r)return r.getAttribute("href");var i=ir(e,"meta",{name:"cover"});if(i){var s=i.getAttribute("content"),n=e.getElementById(s);return n?n.getAttribute("href"):""}else return!1}getElementText(e,t){var r=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t),i;return!r||r.length===0?"":(i=r[0],i.childNodes.length?i.childNodes[0].nodeValue:"")}getPropertyText(e,t){var r=ir(e,"meta",{property:t});return r&&r.childNodes.length?r.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let t=e.readingOrder||e.spine;return this.spine=t.map((r,i)=>(r.index=i,r.linear=r.linear||"yes",r)),e.resources.forEach((r,i)=>{this.manifest[i]=r,r.rel&&r.rel[0]==="cover"&&(this.coverPath=r.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((r,i)=>(r.label=r.title,r)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class Ci{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let t=e.nodeType,r,i;t&&(r=nt(e,"html"),i=nt(e,"ncx")),t?r?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):i&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var t,r=0;r<e.length;r++)t=e[r],t.href&&(this.tocByHref[t.href]=r),t.id&&(this.tocById[t.id]=r),this.length++,t.subitems.length&&this.unpack(t.subitems)}get(e){var t;return e?(e.indexOf("#")===0?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}getByIndex(e,t,r){if(r.length===0)return;const i=r[t];if(i&&(e===i.id||e===i.href))return i;{let s;for(let n=0;n<r.length&&(s=this.getByIndex(e,t,r[n].subitems),!s);++n);return s}}landmark(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}parseNav(e){var t=qr(e,"nav","toc"),r=[];if(!t)return r;let i=nr(t,"ol",!0);return i&&(r=this.parseNavList(i)),r}parseNavList(e,t){const r=[];if(!e||!e.children)return r;for(let i=0;i<e.children.length;i++){const s=this.navItem(e.children[i],t);s&&r.push(s)}return r}navItem(e,t){let r=e.getAttribute("id")||void 0,i=nr(e,"a",!0)||nr(e,"span",!0);if(!i)return;let s=i.getAttribute("href")||"";r||(r=s);let n=i.textContent||"",a=[],u=nr(e,"ol",!0);return u&&(a=this.parseNavList(u,r)),{id:r,href:s,label:n,subitems:a,parent:t}}parseLandmarks(e){var t=qr(e,"nav","landmarks"),r=t?qt(t,"li"):[],i=r.length,s,n=[],a;if(!r||i===0)return n;for(s=0;s<i;++s)a=this.landmarkItem(r[s]),a&&(n.push(a),this.landmarksByType[a.type]=s);return n}landmarkItem(e){let t=nr(e,"a",!0);if(!t)return;let r=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,i=t.getAttribute("href")||"",s=t.textContent||"";return{href:i,label:s,type:r}}parseNcx(e){var t=qt(e,"navPoint"),r=t.length,i,s={},n=[],a,u;if(!t||r===0)return n;for(i=0;i<r;++i)a=this.ncxItem(t[i]),s[a.id]=a,a.parent?(u=s[a.parent],u.subitems.push(a)):n.push(a);return n}ncxItem(e){var t=e.getAttribute("id")||!1,r=nt(e,"content"),i=r.getAttribute("src"),s=nt(e,"navLabel"),n=s.textContent?s.textContent:"",a=[],u=e.parentNode,c;return u&&(u.nodeName==="navPoint"||u.nodeName.split(":").slice(-1)[0]==="navPoint")&&(c=u.getAttribute("id")),{id:t,href:i,label:n,subitems:a,parent:c}}load(e){return e.map(t=>(t.label=t.title,t.subitems=t.children?this.load(t.children):[],t))}forEach(e){return this.toc.forEach(e)}}var pr={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},ko=(function(){var o,e,t,r,i={};for(o in pr)if(pr.hasOwnProperty(o)){for(e in pr[o])if(pr[o].hasOwnProperty(e))if(t=pr[o][e],typeof t=="string")i[t]=o+"/"+e;else for(r=0;r<t.length;r++)i[t[r]]=o+"/"+e}return i})(),Ro="text/plain";function No(o){return o&&ko[o.split(".").pop().toLowerCase()]||Ro}const sr={lookup:No};class Io{constructor(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var t=new Nt(e),r=sr.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(i=>$s(i)).then(i=>Ki(i,r)):this.settings.request(e,"blob").then(i=>Ur(i,r))}replacements(){if(this.settings.replacements==="none")return new Promise((function(t){t(this.urls)}).bind(this));var e=this.urls.map(t=>{var r=this.settings.resolver(t);return this.createUrl(r).catch(i=>(console.error(i),null))});return Promise.all(e).then(t=>(this.replacementUrls=t.filter(r=>typeof r=="string"),t))}replaceCss(e,t){var r=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach((function(i){var s=this.createCssFile(i,e,t).then((function(n){var a=this.urls.indexOf(i);a>-1&&(this.replacementUrls[a]=n)}).bind(this));r.push(s)}).bind(this)),Promise.all(r)}createCssFile(e){var t;if(Zt.isAbsolute(e))return new Promise(function(n){n()});var r=this.settings.resolver(e),i;this.settings.archive?i=this.settings.archive.getText(r):i=this.settings.request(r,"text");var s=this.urls.map(n=>{var a=this.settings.resolver(n),u=new jt(r).relative(a);return u});return i?i.then(n=>(n=Kn(n,s,this.replacementUrls),this.settings.replacements==="base64"?t=Ki(n,"text/css"):t=Ur(n,"text/css"),t),n=>new Promise(function(a){a()})):new Promise(function(n){n()})}relativeTo(e,t){return t=t||this.settings.resolver,this.urls.map((function(r){var i=t(r),s=new jt(e).relative(i);return s}).bind(this))}get(e){var t=this.urls.indexOf(e);if(t!==-1)return this.replacementUrls.length?new Promise((function(r,i){r(this.replacementUrls[t])}).bind(this)):this.createUrl(e)}substitute(e,t){var r;return t?r=this.relativeTo(t):r=this.urls,Kn(e,r,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class Si{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new Ze,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var t=nt(e,"html"),r=nt(e,"ncx");if(t)return this.parseNav(e);if(r)return this.parseNcx(e)}parseNav(e){var t=qr(e,"nav","page-list"),r=t?qt(t,"li"):[],i=r.length,s,n=[],a;if(!r||i===0)return n;for(s=0;s<i;++s)a=this.item(r[s]),n.push(a);return n}parseNcx(e){var t=[],r=0,i,s,n,a=0;if(s=nt(e,"pageList"),!s||(n=qt(s,"pageTarget"),a=n.length,!n||n.length===0))return t;for(r=0;r<a;++r)i=this.ncxItem(n[r]),t.push(i);return t}ncxItem(e){var t=nt(e,"navLabel"),r=nt(t,"text"),i=r.textContent,s=nt(e,"content"),n=s.getAttribute("src"),a=parseInt(i,10);return{href:n,page:a}}item(e){var t=nt(e,"a"),r=t.getAttribute("href")||"",i=t.textContent||"",s=parseInt(i),n=r.indexOf("epubcfi"),a,u,c;return n!=-1?(a=r.split("#"),u=a[0],c=a.length>1?a[1]:!1,{cfi:c,href:r,packageUrl:u,page:s}):{href:r,page:s}}process(e){e.forEach(function(t){this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var t=-1;if(this.locations.length===0)return-1;var r=Fr(e,this.locations,this.epubcfi.compare);return r!=-1?t=this.pages[r]:(r=ar(e,this.locations,this.epubcfi.compare),t=r-1>=0?this.pages[r-1]:this.pages[0],t!==void 0||(t=-1)),t}cfiFromPage(e){var t=-1;typeof e!="number"&&(e=parseInt(e));var r=this.pages.indexOf(e);return r!=-1&&(t=this.locations[r]),t}pageFromPercentage(e){var t=Math.round(this.totalPages*e);return t}percentageFromPage(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3}percentageFromCfi(e){var t=this.pageFromCfi(e),r=this.percentageFromPage(t);return r}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class Qs{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,t){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(e,t,r){var i=1,s=r||0,n=e,a=t,u=Math.floor(n/12),c,d,p,b;this._spread&&n>=this._minSpreadWidth?i=2:i=1,this.name==="reflowable"&&this._flow==="paginated"&&!(r>=0)&&(s=u%2===0?u:u-1),this.name==="pre-paginated"&&(s=0),i>1?(c=n/i-s,p=c+s):(c=n,p=n),this.name==="pre-paginated"&&i>1&&(n=c),d=c*i+s,b=n,this.width=n,this.height=a,this.spreadWidth=d,this.pageWidth=p,this.delta=b,this.columnWidth=c,this.gap=s,this.divisor=i,this.update({width:n,height:a,spreadWidth:d,pageWidth:p,delta:b,columnWidth:c,gap:s,divisor:i})}format(e,t,r){var i;return this.name==="pre-paginated"?i=e.fit(this.columnWidth,this.height,t):this._flow==="paginated"?i=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):r&&r==="horizontal"?i=e.size(null,this.height):i=e.size(this.width,null),i}count(e,t){let r,i;return this.name==="pre-paginated"?(r=1,i=1):this._flow==="paginated"?(t=t||this.delta,r=Math.ceil(e/t),i=r*this.divisor):(t=t||this.height,r=Math.ceil(e/t),i=r),{spreads:r,pages:i}}update(e){if(Object.keys(e).forEach(t=>{this.props[t]===e[t]&&delete e[t]}),Object.keys(e).length>0){let t=yt(this.props,e);this.emit(we.LAYOUT.UPDATED,t,e)}}}Ft(Qs.prototype);class Oo{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}registerCss(e,t){this._themes[e]={serialized:t},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,t){var r=new Nt(t);this._themes[e]={url:r.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,t){this._themes[e]={rules:t},(this._injected[e]||e=="default")&&this.update(e)}select(e){var t=this._current,r;this._current=e,this.update(e),r=this.rendition.getContents(),r.forEach(i=>{i.removeClass(t),i.addClass(e)})}update(e){var t=this.rendition.getContents();t.forEach(r=>{this.add(e,r)})}inject(e){var t=[],r=this._themes,i;for(var s in r)r.hasOwnProperty(s)&&(s===this._current||s==="default")&&(i=r[s],(i.rules&&Object.keys(i.rules).length>0||i.url&&t.indexOf(i.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,t){var r=this._themes[e];!r||!t||(r.url?t.addStylesheet(r.url):r.serialized?(t.addStylesheetCss(r.serialized,e),r.injected=!0):r.rules&&(t.addStylesheetRules(r.rules,e),r.injected=!0))}override(e,t,r){var i=this.rendition.getContents();this._overrides[e]={value:t,priority:r===!0},i.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(r=>{r.css(e)})}overrides(e){var t=this._overrides;for(var r in t)t.hasOwnProperty(r)&&e.css(r,t[r].value,t[r].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class jr{constructor(e,t,r,i=!1){this.layout=e,this.horizontal=r==="horizontal",this.direction=t||"ltr",this._dev=i}section(e){var t=this.findRanges(e),r=this.rangeListToCfiList(e.section.cfiBase,t);return r}page(e,t,r,i){var s=e&&e.document?e.document.body:!1,n;if(s){if(n=this.rangePairToCfiPair(t,{start:this.findStart(s,r,i),end:this.findEnd(s,r,i)}),this._dev===!0){let a=e.document,u=new Ze(n.start).toRange(a),c=new Ze(n.end).toRange(a),d=a.defaultView.getSelection(),p=a.createRange();d.removeAllRanges(),p.setStart(u.startContainer,u.startOffset),p.setEnd(c.endContainer,c.endOffset),d.addRange(p)}return n}}walk(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(u){return u.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},i=r.acceptNode;i.acceptNode=r.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,i,!1),n,a;(n=s.nextNode())&&(a=t(n),!a););return a}}findRanges(e){for(var t=[],r=e.contents.scrollWidth(),i=Math.ceil(r/this.layout.spreadWidth),s=i*this.layout.divisor,n=this.layout.columnWidth,a=this.layout.gap,u,c,d=0;d<s.pages;d++)u=(n+a)*d,c=n*(d+1)+a*d,t.push({start:this.findStart(e.document.body,u,c),end:this.findEnd(e.document.body,u,c)});return t}findStart(e,t,r){for(var i=[e],s,n,a=e;i.length;)if(s=i.shift(),n=this.walk(s,u=>{var c,d,p,b,y;if(y=Yi(u),this.horizontal&&this.direction==="ltr"){if(c=this.horizontal?y.left:y.top,d=this.horizontal?y.right:y.bottom,c>=t&&c<=r)return u;if(d>t)return u;a=u,i.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(c=y.left,d=y.right,d<=r&&d>=t)return u;if(c<r)return u;a=u,i.push(u)}else{if(p=y.top,b=y.bottom,p>=t&&p<=r)return u;if(b>t)return u;a=u,i.push(u)}}),n)return this.findTextStartRange(n,t,r);return this.findTextStartRange(a,t,r)}findEnd(e,t,r){for(var i=[e],s,n=e,a;i.length;)if(s=i.shift(),a=this.walk(s,u=>{var c,d,p,b,y;if(y=Yi(u),this.horizontal&&this.direction==="ltr"){if(c=Math.round(y.left),d=Math.round(y.right),c>r&&n)return n;if(d>r)return u;n=u,i.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(c=Math.round(this.horizontal?y.left:y.top),d=Math.round(this.horizontal?y.right:y.bottom),d<t&&n)return n;if(c<t)return u;n=u,i.push(u)}else{if(p=Math.round(y.top),b=Math.round(y.bottom),p>r&&n)return n;if(b>r)return u;n=u,i.push(u)}}),a)return this.findTextEndRange(a,t,r);return this.findTextEndRange(n,t,r)}findTextStartRange(e,t,r){for(var i=this.splitTextNodeIntoRanges(e),s,n,a,u,c,d=0;d<i.length;d++)if(s=i[d],n=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(a=n.left,a>=t)return s}else if(this.horizontal&&this.direction==="rtl"){if(c=n.right,c<=r)return s}else if(u=n.top,u>=t)return s;return i[0]}findTextEndRange(e,t,r){for(var i=this.splitTextNodeIntoRanges(e),s,n,a,u,c,d,p,b=0;b<i.length;b++){if(n=i[b],a=n.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(u=a.left,c=a.right,u>r&&s)return s;if(c>r)return n}else if(this.horizontal&&this.direction==="rtl"){if(u=a.left,c=a.right,c<t&&s)return s;if(u<t)return n}else{if(d=a.top,p=a.bottom,d>r&&s)return s;if(p>r)return n}s=n}return i[i.length-1]}splitTextNodeIntoRanges(e,t){var r=[],i=e.textContent||"",s=i.trim(),n,a=e.ownerDocument,u=t||" ",c=s.indexOf(u);if(c===-1||e.nodeType!=Node.TEXT_NODE)return n=a.createRange(),n.selectNodeContents(e),[n];for(n=a.createRange(),n.setStart(e,0),n.setEnd(e,c),r.push(n),n=!1;c!=-1;)c=s.indexOf(u,c+1),c>0&&(n&&(n.setEnd(e,c),r.push(n)),n=a.createRange(),n.setStart(e,c+1));return n&&(n.setEnd(e,s.length),r.push(n)),r}rangePairToCfiPair(e,t){var r=t.start,i=t.end;r.collapse(!0),i.collapse(!1);let s=new Ze(r,e).toString(),n=new Ze(i,e).toString();return{start:s,end:n}}rangeListToCfiList(e,t){for(var r=[],i,s=0;s<t.length;s++)i=this.rangePairToCfiPair(e,t[s]),r.push(i);return r}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const ea=typeof navigator<"u",Bo=ea&&/Chrome/.test(navigator.userAgent),Qn=ea&&!Bo&&/AppleWebKit/.test(navigator.userAgent),Lo=1;class cn{constructor(e,t,r,i){this.epubcfi=new Ze,this.document=e,this.documentElement=this.document.documentElement,this.content=t||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=i||0,this.cfiBase=r||"",this.epubReadingSystem("epub.js",Gr),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return Ir}width(e){var t=this.content;return e&&ht(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}height(e){var t=this.content;return e&&ht(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}contentWidth(e){var t=this.content||this.document.body;return e&&ht(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}contentHeight(e){var t=this.content||this.document.body;return e&&ht(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}textWidth(){let e,t,r=this.document.createRange(),i=this.content||this.document.body,s=Pr(i);return r.selectNodeContents(i),e=r.getBoundingClientRect(),t=e.width,s&&s.width&&(t+=s.width),Math.round(t)}textHeight(){let e,t,r=this.document.createRange(),i=this.content||this.document.body;return r.selectNodeContents(i),e=r.getBoundingClientRect(),t=e.bottom,Math.round(t)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,t,r){var i=this.content||this.document.body;return t?i.style.setProperty(e,t,r?"important":""):i.style.removeProperty(e),this.window.getComputedStyle(i)[e]}viewport(e){var t=this.document.querySelector("meta[name='viewport']"),r={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},i=[],s={};if(t&&t.hasAttribute("content")){let n=t.getAttribute("content"),a=n.match(/width\s*=\s*([^,]*)/),u=n.match(/height\s*=\s*([^,]*)/),c=n.match(/initial-scale\s*=\s*([^,]*)/),d=n.match(/minimum-scale\s*=\s*([^,]*)/),p=n.match(/maximum-scale\s*=\s*([^,]*)/),b=n.match(/user-scalable\s*=\s*([^,]*)/);a&&a.length&&typeof a[1]<"u"&&(r.width=a[1]),u&&u.length&&typeof u[1]<"u"&&(r.height=u[1]),c&&c.length&&typeof c[1]<"u"&&(r.scale=c[1]),d&&d.length&&typeof d[1]<"u"&&(r.minimum=d[1]),p&&p.length&&typeof p[1]<"u"&&(r.maximum=p[1]),b&&b.length&&typeof b[1]<"u"&&(r.scalable=b[1])}return s=Ws(e||{},r),e&&(s.width&&i.push("width="+s.width),s.height&&i.push("height="+s.height),s.scale&&i.push("initial-scale="+s.scale),s.scalable==="no"?(i.push("minimum-scale="+s.scale),i.push("maximum-scale="+s.scale),i.push("user-scalable="+s.scalable)):(s.scalable&&i.push("user-scalable="+s.scalable),s.minimum&&i.push("minimum-scale="+s.minimum),s.maximum&&i.push("minimum-scale="+s.maximum)),t||(t=this.document.createElement("meta"),t.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(t)),t.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),s}expand(){this.emit(we.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(we.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,t=(function(a){a.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),r=0;r<e.length;r+=1){var i;try{i=e[r].cssRules}catch{return}if(!i)return;for(var s=0;s<i.length;s+=1)if(i[s].media){var n=this.window.matchMedia(i[s].media.mediaText);n.addListener(t)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(t=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),t,r=0;r<e.length;r++)t=e[r],typeof t.naturalWidth<"u"&&t.naturalWidth===0&&(t.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,t){var r,i={left:0,top:0};if(!this.document)return i;if(this.epubcfi.isCfiString(e)){let s=new Ze(e).toRange(this.document,t);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let n=s.startContainer.textContent.indexOf(" ",s.startOffset);n==-1&&(n=s.startContainer.textContent.length),s.setEnd(s.startContainer,n)}}catch(n){console.error("setting end offset to start container length failed",n)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)r=s.startContainer.getBoundingClientRect(),i.left=r.left,i.top=r.top;else if(Qn){let n=s.startContainer,a=new Range;try{n.nodeType===Lo?r=n.getBoundingClientRect():s.startOffset+2<n.length?(a.setStart(n,s.startOffset),a.setEnd(n,s.startOffset+2),r=a.getBoundingClientRect()):s.startOffset-2>0?(a.setStart(n,s.startOffset-2),a.setEnd(n,s.startOffset),r=a.getBoundingClientRect()):r=n.parentNode.getBoundingClientRect()}catch(u){console.error(u,u.stack)}}else r=s.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),n=this.document.getElementById(s);if(n)if(Qn){let a=new Range;a.selectNode(n),r=a.getBoundingClientRect()}else r=n.getBoundingClientRect()}return r&&(i.left=r.left,i.top=r.top),i}addStylesheet(e){return new Promise((function(t,r){var i,s=!1;if(!this.document){t(!1);return}if(i=this.document.querySelector("link[href='"+e+"']"),i){t(!0);return}i=this.document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{t(!0)},1))},this.document.head.appendChild(i)}).bind(this))}_getStylesheetNode(e){var t;return e="epubjs-inserted-css-"+(e||""),this.document?(t=this.document.getElementById(e),t||(t=this.document.createElement("style"),t.id=e,this.document.head.appendChild(t)),t):!1}addStylesheetCss(e,t){if(!this.document||!e)return!1;var r;return r=this._getStylesheetNode(t),r.innerHTML=e,!0}addStylesheetRules(e,t){var r;if(!(!this.document||!e||e.length===0))if(r=this._getStylesheetNode(t).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var i=0,s=e.length;i<s;i++){var n=1,a=e[i],u=e[i][0],c="";Object.prototype.toString.call(a[1][0])==="[object Array]"&&(a=a[1],n=0);for(var d=a.length;n<d;n++){var p=a[n];c+=p[0]+":"+p[1]+(p[2]?" !important":"")+`;
`}r.insertRule(u+"{"+c+"}",r.cssRules.length)}else Object.keys(e).forEach(y=>{const C=e[y];if(Array.isArray(C))C.forEach(w=>{const v=Object.keys(w).map(m=>`${m}:${w[m]}`).join(";");r.insertRule(`${y}{${v}}`,r.cssRules.length)});else{const f=Object.keys(C).map(v=>`${v}:${C[v]}`).join(";");r.insertRule(`${y}{${f}}`,r.cssRules.length)}})}addScript(e){return new Promise((function(t,r){var i,s=!1;if(!this.document){t(!1);return}i=this.document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(i)}).bind(this))}addClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.add(e))}removeClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),Ir.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(Ir.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var t=this.window.getSelection();this.triggerSelectedEvent(t)}).bind(this),250)}triggerSelectedEvent(e){var t,r;e&&e.rangeCount>0&&(t=e.getRangeAt(0),t.collapsed||(r=new Ze(t,this.cfiBase).toString(),this.emit(we.CONTENTS.SELECTED,r),this.emit(we.CONTENTS.SELECTED_RANGE,t)))}range(e,t){var r=new Ze(e);return r.toRange(this.document,t)}cfiFromRange(e,t){return new Ze(e,this.cfiBase,t).toString()}cfiFromNode(e,t){return new Ze(e,this.cfiBase,t).toString()}map(e){var t=new jr(e);return t.section()}size(e,t){var r={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),r.width=e,this.css("padding","0 "+e/12+"px")),t>=0&&(this.height(t),r.height=t),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(r)}columns(e,t,r,i,s){let n=rr("column-axis"),a=rr("column-gap"),u=rr("column-width"),c=rr("column-fill"),p=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&p==="horizontal"&&this.direction(s),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),p==="vertical"?(this.css("padding-top",i/2+"px",!0),this.css("padding-bottom",i/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(n,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",i/2+"px",!0),this.css("padding-right",i/2+"px",!0),this.css(n,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(c,"auto"),this.css(a,i+"px"),this.css(u,r+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,t,r){var i="scale("+e+")",s="";this.css("transform-origin","top left"),(t>=0||r>=0)&&(s=" translate("+(t||0)+"px, "+(r||0)+"px )"),this.css("transform",i+s)}fit(e,t,r){var i=this.viewport(),s=parseInt(i.width),n=parseInt(i.height),a=e/s,u=t/n,c=a<u?a:u;if(this.layoutStyle("paginated"),this.width(s),this.height(n),this.overflow("hidden"),this.scaler(c,0,0),this.css("background-size",s*c+"px "+n*c+"px"),this.css("background-color","transparent"),r&&r.properties.includes("page-spread-left")){var d=e-s*c;this.css("margin-left",d+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,t,r,i,s){var n=new jr(t,s);return n.page(this,e,r,i)}linksHandler(){Do(this.content,e=>{this.emit(we.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let t=rr("writing-mode");return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(r){switch(r){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}Ft(cn.prototype);class Fo{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,t,r,i,s,n){let a=encodeURI(t+e),c=new Ze(t).spinePos,d=new ta({type:e,cfiRange:t,data:r,sectionIndex:c,cb:i,className:s,styles:n});return this._annotations[a]=d,c in this._annotationsBySectionIndex?this._annotationsBySectionIndex[c].push(a):this._annotationsBySectionIndex[c]=[a],this.rendition.views().forEach(b=>{d.sectionIndex===b.index&&d.attach(b)}),d}remove(e,t){let r=encodeURI(e+t);if(r in this._annotations){let i=this._annotations[r];if(t&&i.type!==t)return;this.rendition.views().forEach(n=>{this._removeFromAnnotationBySectionIndex(i.sectionIndex,r),i.sectionIndex===n.index&&i.detach(n)}),delete this._annotations[r]}}_removeFromAnnotationBySectionIndex(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(r=>r!==t)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,t,r,i,s){return this.add("highlight",e,t,r,i,s)}underline(e,t,r,i,s){return this.add("underline",e,t,r,i,s)}mark(e,t,r){return this.add("mark",e,t,r)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(i=>{this._annotations[i].attach(e)})}clear(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(i=>{this._annotations[i].detach(e)})}show(){}hide(){}}class ta{constructor({type:e,cfiRange:t,data:r,sectionIndex:i,cb:s,className:n,styles:a}){this.type=e,this.cfiRange=t,this.data=r,this.sectionIndex=i,this.mark=void 0,this.cb=s,this.className=n,this.styles=a}update(e){this.data=e}attach(e){let{cfiRange:t,data:r,type:i,mark:s,cb:n,className:a,styles:u}=this,c;return i==="highlight"?c=e.highlight(t,r,n,a,u):i==="underline"?c=e.underline(t,r,n,a,u):i==="mark"&&(c=e.mark(t,r,n)),this.mark=c,this.emit(we.ANNOTATION.ATTACH,c),c}detach(e){let{cfiRange:t,type:r}=this,i;return e&&(r==="highlight"?i=e.unhighlight(t):r==="underline"?i=e.ununderline(t):r==="mark"&&(i=e.unmark(t))),this.mark=void 0,this.emit(we.ANNOTATION.DETACH,i),i}text(){}}Ft(ta.prototype);var Tt={},gr={},es;function Po(){if(es)return gr;es=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.createElement=o;function o(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}return gr.default={createElement:o},gr}var tr={},ts;function zo(){if(ts)return tr;ts=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.proxyMouse=o,tr.clone=e,tr.default={proxyMouse:o};function o(r,i){function s(c){for(var d=i.length-1;d>=0;d--){var p=i[d],b=c.clientX,y=c.clientY;if(c.touches&&c.touches.length&&(b=c.touches[0].clientX,y=c.touches[0].clientY),!!t(p,r,b,y)){p.dispatchEvent(e(c));break}}}if(r.nodeName==="iframe"||r.nodeName==="IFRAME")try{this.target=r.contentDocument}catch{this.target=r}else this.target=r;for(var n=["mouseup","mousedown","click","touchstart"],a=0;a<n.length;a++){var u=n[a];this.target.addEventListener(u,function(c){return s(c)},!1)}}function e(r){var i=Object.assign({},r,{bubbles:!1});try{return new MouseEvent(r.type,i)}catch{var s=document.createEvent("MouseEvents");return s.initMouseEvent(r.type,!1,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget),s}}function t(r,i,s,n){var a=i.getBoundingClientRect();function u(y,C,w){var f=y.top-a.top,v=y.left-a.left,m=f+y.height,D=v+y.width;return f<=w&&v<=C&&m>w&&D>C}var c=r.getBoundingClientRect();if(!u(c,s,n))return!1;for(var d=r.getClientRects(),p=0,b=d.length;p<b;p++)if(u(d[p],s,n))return!0;return!1}return tr}var rs;function Uo(){if(rs)return Tt;rs=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.Underline=Tt.Highlight=Tt.Mark=Tt.Pane=void 0;var o=function w(f,v,m){f===null&&(f=Function.prototype);var D=Object.getOwnPropertyDescriptor(f,v);if(D===void 0){var I=Object.getPrototypeOf(f);return I===null?void 0:w(I,v,m)}else{if("value"in D)return D.value;var _=D.get;return _===void 0?void 0:_.call(m)}},e=(function(){function w(f,v){for(var m=0;m<v.length;m++){var D=v[m];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(f,D.key,D)}}return function(f,v,m){return v&&w(f.prototype,v),m&&w(f,m),f}})(),t=Po(),r=n(t),i=zo(),s=n(i);function n(w){return w&&w.__esModule?w:{default:w}}function a(w,f){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:w}function u(w,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);w.prototype=Object.create(f&&f.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(w,f):w.__proto__=f)}function c(w,f){if(!(w instanceof f))throw new TypeError("Cannot call a class as a function")}Tt.Pane=(function(){function w(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;c(this,w),this.target=f,this.element=r.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),s.default.proxyMouse(this.target,this.marks),this.container=v,this.container.appendChild(this.element),this.render()}return e(w,[{key:"addMark",value:function(v){var m=r.default.createElement("g");return this.element.appendChild(m),v.bind(m,this.container),this.marks.push(v),v.render(),v}},{key:"removeMark",value:function(v){var m=this.marks.indexOf(v);if(m!==-1){var D=v.unbind();this.element.removeChild(D),this.marks.splice(m,1)}}},{key:"render",value:function(){y(this.element,b(this.target,this.container));var v=!0,m=!1,D=void 0;try{for(var I=this.marks[Symbol.iterator](),_;!(v=(_=I.next()).done);v=!0){var T=_.value;T.render()}}catch(N){m=!0,D=N}finally{try{!v&&I.return&&I.return()}finally{if(m)throw D}}}}]),w})();var d=Tt.Mark=(function(){function w(){c(this,w),this.element=null}return e(w,[{key:"bind",value:function(v,m){this.element=v,this.container=m}},{key:"unbind",value:function(){var v=this.element;return this.element=null,v}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(v){this.element&&this.element.dispatchEvent(v)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var v=[],m=this.element.firstChild;m;)v.push(m.getBoundingClientRect()),m=m.nextSibling;return v}},{key:"filteredRanges",value:function(){var v=Array.from(this.range.getClientRects());return v.filter(function(m){for(var D=0;D<v.length;D++){if(v[D]===m)return!0;var I=C(v[D],m);if(I)return!1}return!0})}}]),w})(),p=Tt.Highlight=(function(w){u(f,w);function f(v,m,D,I){c(this,f);var _=a(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return _.range=v,_.className=m,_.data=D||{},_.attributes=I||{},_}return e(f,[{key:"bind",value:function(m,D){o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"bind",this).call(this,m,D);for(var I in this.data)this.data.hasOwnProperty(I)&&(this.element.dataset[I]=this.data[I]);for(var I in this.attributes)this.attributes.hasOwnProperty(I)&&this.element.setAttribute(I,this.attributes[I]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var m=this.element.ownerDocument.createDocumentFragment(),D=this.filteredRanges(),I=this.element.getBoundingClientRect(),_=this.container.getBoundingClientRect(),T=0,N=D.length;T<N;T++){var O=D[T],R=r.default.createElement("rect");R.setAttribute("x",O.left-I.left+_.left),R.setAttribute("y",O.top-I.top+_.top),R.setAttribute("height",O.height),R.setAttribute("width",O.width),m.appendChild(R)}this.element.appendChild(m)}}]),f})(d);Tt.Underline=(function(w){u(f,w);function f(v,m,D,I){return c(this,f),a(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,v,m,D,I))}return e(f,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var m=this.element.ownerDocument.createDocumentFragment(),D=this.filteredRanges(),I=this.element.getBoundingClientRect(),_=this.container.getBoundingClientRect(),T=0,N=D.length;T<N;T++){var O=D[T],R=r.default.createElement("rect");R.setAttribute("x",O.left-I.left+_.left),R.setAttribute("y",O.top-I.top+_.top),R.setAttribute("height",O.height),R.setAttribute("width",O.width),R.setAttribute("fill","none");var B=r.default.createElement("line");B.setAttribute("x1",O.left-I.left+_.left),B.setAttribute("x2",O.left-I.left+_.left+O.width),B.setAttribute("y1",O.top-I.top+_.top+O.height-1),B.setAttribute("y2",O.top-I.top+_.top+O.height-1),B.setAttribute("stroke-width",1),B.setAttribute("stroke","black"),B.setAttribute("stroke-linecap","square"),m.appendChild(R),m.appendChild(B)}this.element.appendChild(m)}}]),f})(p);function b(w,f){var v=f.getBoundingClientRect(),m=w.getBoundingClientRect();return{top:m.top-v.top,left:m.left-v.left,height:w.scrollHeight,width:w.scrollWidth}}function y(w,f){w.style.setProperty("top",f.top+"px","important"),w.style.setProperty("left",f.left+"px","important"),w.style.setProperty("height",f.height+"px","important"),w.style.setProperty("width",f.width+"px","important")}function C(w,f){return f.right<=w.right&&f.left>=w.left&&f.top>=w.top&&f.bottom<=w.bottom}return Tt}var kr=Uo();class ra{constructor(e,t){this.settings=yt({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},t||{}),this.id="epubjs-view-"+Zr(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Ze,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var t=document.createElement("div");return t.classList.add("epub-view"),t.style.height="0px",t.style.width="0px",t.style.overflow="hidden",t.style.position="relative",t.style.display="block",e&&e=="horizontal"?t.style.flex="none":t.style.flex="initial",t}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Nr(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,t){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(r){return this.load(r)}).bind(this)).then((function(){let r=this.contents.writingMode(),i;return this.settings.flow==="scrolled"?i=r.indexOf("vertical")===0?"horizontal":"vertical":i=r.indexOf("vertical")===0?"vertical":"horizontal",r.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(i),this.emit(we.VIEWS.AXIS,i),this.setWritingMode(r),this.emit(we.VIEWS.WRITING_MODE,r),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,n)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}).bind(this),(function(r){return this.emit(we.VIEWS.LOAD_ERROR,r),new Promise((i,s)=>{s(r)})}).bind(this)).then((function(){this.emit(we.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,t){var r=e||this.settings.width,i=t||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",r,i):this.settings.axis==="horizontal"?this.lock("height",r,i):this.lock("width",r,i),this.settings.width=r,this.settings.height=i}lock(e,t,r){var i=Pr(this.element),s;this.iframe?s=Pr(this.iframe):s={width:0,height:0},e=="width"&&ht(t)&&(this.lockedWidth=t-i.width-s.width),e=="height"&&ht(r)&&(this.lockedHeight=r-i.height-s.height),e==="both"&&ht(t)&&ht(r)&&(this.lockedWidth=t-i.width-s.width,this.lockedHeight=r-i.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var t=this.lockedWidth,r=this.lockedHeight,i;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(t=this.layout.columnWidth,r=this.layout.height):this.settings.axis==="horizontal"?(t=this.contents.textWidth(),t%this.layout.pageWidth>0&&(t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(i=t/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&i%2>0&&(t+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(r=this.contents.textHeight(),this.settings.flow==="paginated"&&r%this.layout.height>0&&(r=Math.ceil(r/this.layout.height)*this.layout.height)),(this._needsReframe||t!=this._width||r!=this._height)&&this.reframe(t,r),this._expanding=!1)}reframe(e,t){var r;ht(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),ht(t)&&(this.element.style.height=t+"px",this.iframe.style.height=t+"px",this._height=t);let i=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?t-this.prevBounds.height:t;r={width:e,height:t,widthDelta:i,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let n;for(let a in this.marks)this.marks.hasOwnProperty(a)&&(n=this.marks[a],this.placeMark(n.element,n.range))}),this.onResize(this,r),this.emit(we.VIEWS.RESIZED,r),this.prevBounds=r,this.elementBounds=Nr(this.element)}load(e){var t=new Ve,r=t.promise;if(!this.iframe)return t.reject(new Error("No Iframe Available")),r;if(this.iframe.onload=(function(s){this.onLoad(s,t)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=Ur(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error("No Document Available")),r;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var i=this;MSApp.execUnsafeLocalFunction(function(){i.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return r}onLoad(e,t){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new cn(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(r)),this.contents.on(we.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(we.CONTENTS.RESIZE,i=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),t.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var t=new Ve;return this.displayed?t.resolve(this):this.render(e).then((function(){this.emit(we.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}).bind(this),function(r){t.reject(r,this)}),t.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(we.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(we.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var t=this.contents.locationOf(e,this.settings.ignoreClass);return{left:t.left,top:t.top}}onDisplayed(e){}onResize(e,t){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=Nr(this.element)),this.elementBounds}highlight(e,t={},r,i="epubjs-hl",s={}){if(!this.contents)return;const n=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s);let a=this.contents.range(e),u=()=>{this.emit(we.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new kr.Pane(this.iframe,this.element));let c=new kr.Highlight(a,i,t,n),d=this.pane.addMark(c);return this.highlights[e]={mark:d,element:d.element,listeners:[u,r]},d.element.setAttribute("ref",i),d.element.addEventListener("click",u),d.element.addEventListener("touchstart",u),r&&(d.element.addEventListener("click",r),d.element.addEventListener("touchstart",r)),d}underline(e,t={},r,i="epubjs-ul",s={}){if(!this.contents)return;const n=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s);let a=this.contents.range(e),u=()=>{this.emit(we.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new kr.Pane(this.iframe,this.element));let c=new kr.Underline(a,i,t,n),d=this.pane.addMark(c);return this.underlines[e]={mark:d,element:d.element,listeners:[u,r]},d.element.setAttribute("ref",i),d.element.addEventListener("click",u),d.element.addEventListener("touchstart",u),r&&(d.element.addEventListener("click",r),d.element.addEventListener("touchstart",r)),d}mark(e,t={},r){if(!this.contents)return;if(e in this.marks)return this.marks[e];let i=this.contents.range(e);if(!i)return;let s=i.commonAncestorContainer,n=s.nodeType===1?s:s.parentNode,a=c=>{this.emit(we.VIEWS.MARK_CLICKED,e,t)};i.collapsed&&s.nodeType===1?(i=new Range,i.selectNodeContents(s)):i.collapsed&&(i=new Range,i.selectNodeContents(n));let u=this.document.createElement("a");return u.setAttribute("ref","epubjs-mk"),u.style.position="absolute",u.dataset.epubcfi=e,t&&Object.keys(t).forEach(c=>{u.dataset[c]=t[c]}),r&&(u.addEventListener("click",r),u.addEventListener("touchstart",r)),u.addEventListener("click",a),u.addEventListener("touchstart",a),this.placeMark(u,i),this.element.appendChild(u),this.marks[e]={element:u,range:i,listeners:[a,r]},n}placeMark(e,t){let r,i,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let a=t.getBoundingClientRect();r=a.top,i=a.right}else{let a=t.getClientRects(),u;for(var n=0;n!=a.length;n++)u=a[n],(!s||u.left<s)&&(s=u.left,i=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,r=u.top)}e.style.top=`${r}px`,e.style.left=`${i}px`}unhighlight(e){let t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.highlights[e])}ununderline(e){let t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.underlines[e])}unmark(e){let t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&Zs(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}Ft(ra.prototype);function Mo(){var o="reverse",e=qo();return document.body.appendChild(e),e.scrollLeft>0?o="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(o="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(o="negative")),document.body.removeChild(e),o}function qo(){var o=document.createElement("div");o.dir="rtl",o.style.position="fixed",o.style.width="1px",o.style.height="1px",o.style.top="0px",o.style.left="0px",o.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var t=document.createElement("span");t.style.width="1px",t.style.display="inline-block";var r=document.createElement("span");return r.style.width="1px",r.style.display="inline-block",e.appendChild(t),e.appendChild(r),o.appendChild(e),o}var Ti,is;function fn(){if(is)return Ti;is=1;function o(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Ti=o,Ti}var ki,ns;function jo(){if(ns)return ki;ns=1;var o=typeof Ct=="object"&&Ct&&Ct.Object===Object&&Ct;return ki=o,ki}var Ri,ss;function ia(){if(ss)return Ri;ss=1;var o=jo(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=o||e||Function("return this")();return Ri=t,Ri}var Ni,as;function Wo(){if(as)return Ni;as=1;var o=ia(),e=function(){return o.Date.now()};return Ni=e,Ni}var Ii,os;function Ho(){if(os)return Ii;os=1;var o=/\s/;function e(t){for(var r=t.length;r--&&o.test(t.charAt(r)););return r}return Ii=e,Ii}var Oi,us;function Vo(){if(us)return Oi;us=1;var o=Ho(),e=/^\s+/;function t(r){return r&&r.slice(0,o(r)+1).replace(e,"")}return Oi=t,Oi}var Bi,ls;function na(){if(ls)return Bi;ls=1;var o=ia(),e=o.Symbol;return Bi=e,Bi}var Li,hs;function Zo(){if(hs)return Li;hs=1;var o=na(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=o?o.toStringTag:void 0;function s(n){var a=t.call(n,i),u=n[i];try{n[i]=void 0;var c=!0}catch{}var d=r.call(n);return c&&(a?n[i]=u:delete n[i]),d}return Li=s,Li}var Fi,cs;function Go(){if(cs)return Fi;cs=1;var o=Object.prototype,e=o.toString;function t(r){return e.call(r)}return Fi=t,Fi}var Pi,fs;function Xo(){if(fs)return Pi;fs=1;var o=na(),e=Zo(),t=Go(),r="[object Null]",i="[object Undefined]",s=o?o.toStringTag:void 0;function n(a){return a==null?a===void 0?i:r:s&&s in Object(a)?e(a):t(a)}return Pi=n,Pi}var zi,ds;function $o(){if(ds)return zi;ds=1;function o(e){return e!=null&&typeof e=="object"}return zi=o,zi}var Ui,ps;function Yo(){if(ps)return Ui;ps=1;var o=Xo(),e=$o(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&o(i)==t}return Ui=r,Ui}var Mi,gs;function Ko(){if(gs)return Mi;gs=1;var o=Vo(),e=fn(),t=Yo(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,n=/^0o[0-7]+$/i,a=parseInt;function u(c){if(typeof c=="number")return c;if(t(c))return r;if(e(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=e(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=o(c);var p=s.test(c);return p||n.test(c)?a(c.slice(2),p?2:8):i.test(c)?r:+c}return Mi=u,Mi}var qi,vs;function sa(){if(vs)return qi;vs=1;var o=fn(),e=Wo(),t=Ko(),r="Expected a function",i=Math.max,s=Math.min;function n(a,u,c){var d,p,b,y,C,w,f=0,v=!1,m=!1,D=!0;if(typeof a!="function")throw new TypeError(r);u=t(u)||0,o(c)&&(v=!!c.leading,m="maxWait"in c,b=m?i(t(c.maxWait)||0,u):b,D="trailing"in c?!!c.trailing:D);function I(Y){var ie=d,se=p;return d=p=void 0,f=Y,y=a.apply(se,ie),y}function _(Y){return f=Y,C=setTimeout(O,u),v?I(Y):y}function T(Y){var ie=Y-w,se=Y-f,fe=u-ie;return m?s(fe,b-se):fe}function N(Y){var ie=Y-w,se=Y-f;return w===void 0||ie>=u||ie<0||m&&se>=b}function O(){var Y=e();if(N(Y))return R(Y);C=setTimeout(O,T(Y))}function R(Y){return C=void 0,D&&d?I(Y):(d=p=void 0,y)}function B(){C!==void 0&&clearTimeout(C),f=0,d=w=p=C=void 0}function $(){return C===void 0?y:R(e())}function V(){var Y=e(),ie=N(Y);if(d=arguments,p=this,w=Y,ie){if(C===void 0)return _(w);if(m)return clearTimeout(C),C=setTimeout(O,u),I(w)}return C===void 0&&(C=setTimeout(O,u)),y}return V.cancel=B,V.flush=$,V}return qi=n,qi}var ji,ms;function Jo(){if(ms)return ji;ms=1;var o=sa(),e=fn(),t="Expected a function";function r(i,s,n){var a=!0,u=!0;if(typeof i!="function")throw new TypeError(t);return e(n)&&(a="leading"in n?!!n.leading:a,u="trailing"in n?!!n.trailing:u),o(i,s,{leading:a,maxWait:s,trailing:u})}return ji=r,ji}var Qo=Jo();const eu=ur(Qo);class tu{constructor(e){this.settings=e||{},this.id="epubjs-container-"+Zr(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let t=e.height,r=e.width,i=e.overflow||!1,s=e.axis||"vertical",n=e.direction;yt(this.settings,e),e.height&&ht(e.height)&&(t=e.height+"px"),e.width&&ht(e.width)&&(r=e.width+"px");let a=document.createElement("div");return a.id=this.id,a.classList.add("epub-container"),a.style.wordSpacing="0",a.style.lineHeight="0",a.style.verticalAlign="top",a.style.position="relative",s==="horizontal"&&(a.style.display="flex",a.style.flexDirection="row",a.style.flexWrap="nowrap"),r&&(a.style.width=r),t&&(a.style.height=t),i&&(i==="scroll"&&s==="vertical"?(a.style["overflow-y"]=i,a.style["overflow-x"]="hidden"):i==="scroll"&&s==="horizontal"?(a.style["overflow-y"]="hidden",a.style["overflow-x"]=i):a.style.overflow=i),n&&(a.dir=n,a.style.direction=n),n&&this.settings.fullsize&&(document.body.style.direction=n),a}wrap(e){var t=document.createElement("div");return t.style.visibility="hidden",t.style.overflow="hidden",t.style.width="0",t.style.height="0",t.appendChild(e),t}getElement(e){var t;if(qs(e)?t=e:typeof e=="string"&&(t=document.getElementById(e)),!t)throw new Error("Not an Element");return t}attachTo(e){var t=this.getElement(e),r;if(t)return this.settings.hidden?r=this.wrapper:r=this.container,t.appendChild(r),this.element=t,t}getContainer(){return this.container}onResize(e){(!ht(this.settings.width)||!ht(this.settings.height))&&(this.resizeFunc=eu(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,t){var r;let i=e||this.settings.width,s=t||this.settings.height;e===null?(r=this.element.getBoundingClientRect(),r.width&&(e=Math.floor(r.width),this.container.style.width=e+"px")):ht(e)?this.container.style.width=e+"px":this.container.style.width=e,t===null?(r=r||this.element.getBoundingClientRect(),r.height&&(t=r.height,this.container.style.height=t+"px")):ht(t)?this.container.style.height=t+"px":this.container.style.height=t,ht(e)||(e=this.container.clientWidth),ht(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let n=zr(),a=window.getComputedStyle(document.body),u={left:parseFloat(a["padding-left"])||0,right:parseFloat(a["padding-right"])||0,top:parseFloat(a["padding-top"])||0,bottom:parseFloat(a["padding-bottom"])||0};return i||(e=n.width-u.left-u.right),(this.settings.fullsize&&!s||!s)&&(t=n.height-u.top-u.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?zr():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,t){var r="#"+this.id+" ",i="";this.sheet||(this.sheet=this.getSheet()),t.forEach(function(s){for(var n in s)s.hasOwnProperty(n)&&(i+=n+":"+s[n]+";")}),this.sheet.insertRule(r+e+" {"+i+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class ru{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}remove(e){var t=this._views.indexOf(e);t>-1&&this._views.splice(t,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,t=this.length;if(this.length){for(var r=0;r<t;r++)e=this._views[r],this.destroy(e);this._views=[],this.length=0}}find(e){for(var t,r=this.length,i=0;i<r;i++)if(t=this._views[i],t.displayed&&t.section.index==e.index)return t}displayed(){for(var e=[],t,r=this.length,i=0;i<r;i++)t=this._views[i],t.displayed&&e.push(t);return e}show(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.hide();this.hidden=!0}}class Wr{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new hn(this),this.settings=yt(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),yt(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,t){let r=e.tagName;typeof this.settings.fullsize>"u"&&r&&(r.toLowerCase()=="body"||r.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=t,this.settings.rtlScrollType=Mo(),this.stage=new tu({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new ru(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(t){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:t}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(we.MANAGERS.ORIENTATION_CHANGE,t)}).bind(this),500)}onResized(e){this.resize()}resize(e,t,r){let i=this.stage.size(e,t);if(this.winBounds=zr(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===i.width&&this._stageSize.height===i.height||(this._stageSize=i,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(we.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},r))}createView(e,t){return new this.View(e,yt(this.viewSettings,{forceRight:t}))}handleNextPrePaginated(e,t,r){let i;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||t.index===0)return;if(i=t.next(),i&&!i.properties.includes("page-spread-left"))return r.call(this,i)}}display(e,t){var r=new Ve,i=r.promise;(t===e.href||ht(t))&&(t=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let a=s.offset();if(this.settings.direction==="ltr")this.scrollTo(a.left,a.top,!0);else{let u=s.width();this.scrollTo(a.left+u,a.top,!0)}if(t){let u=s.locationOf(t),c=s.width();this.moveTo(u,c)}return r.resolve(),i}this.clear();let n=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(n=!0),this.add(e,n).then((function(a){if(t){let u=a.locationOf(t),c=a.width();this.moveTo(u,c)}}).bind(this),a=>{r.reject(a)}).then((function(){return this.handleNextPrePaginated(n,e,this.add)}).bind(this)).then((function(){this.views.show(),r.resolve()}).bind(this)),i}afterDisplayed(e){this.emit(we.MANAGERS.ADDED,e)}afterResized(e){this.emit(we.MANAGERS.RESIZE,e.section)}moveTo(e,t){var r=0,i=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollWidth&&(r=this.container.scrollWidth-this.layout.delta),i=Math.floor(e.top/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollHeight&&(i=this.container.scrollHeight-this.layout.delta)):i=e.top,this.settings.direction==="rtl"&&(r=r+this.layout.delta,r=r-t),this.scrollTo(r,i,!0)}add(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(we.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(we.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}append(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(we.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(we.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}prepend(e,t){var r=this.createView(e,t);return r.on(we.VIEWS.RESIZED,i=>{this.counter(i)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(we.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(we.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,t;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,t<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft,t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=this.container.scrollLeft+this.layout.delta*-1,t>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(i=!0),this.append(e,i).then((function(){return this.handleNextPrePaginated(i,e,this.append)}).bind(this),s=>s).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,t;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft+this.container.offsetWidth,t<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=this.container.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(i=!0),this.prepend(e,i).then((function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}).bind(this),s=>s).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=t.height<window.innerHeight?t.height:window.innerHeight,i=t.width<window.innerWidth?t.width:window.innerWidth,s=this.settings.axis==="vertical";this.settings.direction;let n=0,a=0;return this.settings.fullsize&&(n=s?window.scrollY:window.scrollX),e.map(c=>{let{index:d,href:p}=c.section,b=c.position(),y=c.width(),C=c.height(),w,f,v,m;s?(w=n+t.top-b.top+a,f=w+r-a,m=this.layout.count(C,r).pages,v=r):(w=n+t.left-b.left+a,f=w+i-a,m=this.layout.count(y,i).pages,v=i);let D=Math.ceil(w/v),I=[],_=Math.ceil(f/v);if(this.settings.direction==="rtl"&&!s){let O=D;D=m-_,_=m-O}I=[];for(var T=D;T<=_;T++){let O=T+1;I.push(O)}let N=this.mapping.page(c.contents,c.section.cfiBase,w,f);return{index:d,href:p,pages:I,totalPages:m,mapping:N}})}paginatedLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=0,i=0;return this.settings.fullsize&&(r=window.scrollX),e.map(n=>{let{index:a,href:u}=n.section,c,d=n.position(),p=n.width(),b,y,C;this.settings.direction==="rtl"?(c=t.right-r,C=Math.min(Math.abs(c-d.left),this.layout.width)-i,y=d.width-(d.right-c)-i,b=y-C):(c=t.left+r,C=Math.min(d.right-c,this.layout.width)-i,b=c-d.left+i,y=b+C),i+=C;let w=this.mapping.page(n.contents,n.section.cfiBase,b,y),f=this.layout.count(p).pages,v=Math.floor(b/this.layout.pageWidth),m=[],D=Math.floor(y/this.layout.pageWidth);if(v<0&&(v=0,D=D+1),this.settings.direction==="rtl"){let _=v;v=f-D,D=f-_}for(var I=v+1;I<=D;I++){let _=I;m.push(_)}return{index:a,href:u,pages:m,totalPages:f,mapping:w}})}isVisible(e,t,r,i){var s=e.position(),n=i||this.bounds();return this.settings.axis==="horizontal"&&s.right>n.left-t&&s.left<n.right+r?!0:this.settings.axis==="vertical"&&s.bottom>n.top-t&&s.top<n.bottom+r}visible(){for(var e=this.bounds(),t=this.views.displayed(),r=t.length,i=[],s,n,a=0;a<r;a++)n=t[a],s=this.isVisible(n,0,0,e),s===!0&&i.push(n);return i}scrollBy(e,t,r){let i=this.settings.direction==="rtl"?-1:1;r&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*i,t*i):(e&&(this.container.scrollLeft+=e*i),t&&(this.container.scrollTop+=t)),this.scrolled=!0}scrollTo(e,t,r){r&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}onScroll(){let e,t;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(we.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(we.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new jr(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,t){!t&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new jr(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,t="auto"){let r=e==="paginated"||e==="auto";this.isPaginated=r,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=r?"hidden":t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(t){const r=t&&t.contents;r&&e.push(r)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}Ft(Wr.prototype);const iu={easeInCubic:function(o){return Math.pow(o,3)}};class en{constructor(e,t){this.settings=yt({duration:80,minVelocity:.2,minDistance:10,easing:iu.easeInCubic},t||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(we.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(we.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let t=e.contents;["touchstart","touchmove","touchend"].forEach(r=>{t.on(r,i=>this.triggerViewEvent(i,t))})}triggerViewEvent(e,t){this.emit(e.type,e,t)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:t,screenY:r}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=t,this.startTouchY=r,this.startTime=this.now()),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchMove(e){let{screenX:t,screenY:r}=e.touches[0],i=Math.abs(r-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&i<10&&(this.element.scrollLeft-=t-this.endTouchX),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let t=this.wasSwiped();t!==0?this.snap(t):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,r=Math.abs(t),i=this.endTime-this.startTime,s=t/i,n=this.settings.minVelocity;if(r<=this.settings.minDistance||r>=e)return 0;if(s>n)return-1;if(s<-n)return 1}needsSnap(){let e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return e%t!==0}snap(e=0){let t=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor,i=Math.round(t/r)*r;return e&&(i+=e*r),this.smoothScrollTo(i)}smoothScrollTo(e){const t=new Ve,r=this.scrollLeft,i=this.now(),s=this.settings.duration,n=this.settings.easing;this.snapping=!0;function a(){const u=this.now(),c=Math.min(1,(u-i)/s);if(n(c),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,t.resolve();return}c<1?(window.requestAnimationFrame(a.bind(this)),this.scrollTo(r+(e-r)*c,0)):(this.scrollTo(e,0),this.snapping=!1,t.resolve())}return a.call(this),t.promise}scrollTo(e=0,t=0){this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}Ft(en.prototype);var nu=sa();const su=ur(nu);class au extends Wr{constructor(e){super(e),this.name="continuous",this.settings=yt(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),yt(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,t){return Wr.prototype.display.call(this,e,t).then((function(){return this.fill()}).bind(this))}fill(e){var t=e||new Ve;return this.q.enqueue(()=>this.check()).then(r=>{r?this.fill(t):t.resolve()}),t.promise}moveTo(e){var t=0,r=0;this.isPaginated?(t=Math.floor(e.left/this.layout.delta)*this.layout.delta,t+this.settings.offsetDelta):(r=e.top,e.top+this.settings.offsetDelta),(t>0||r>0)&&this.scrollBy(t,r,!0)}afterResized(e){this.emit(we.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var t=this.createView(e);return this.views.append(t),t.on(we.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(we.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(we.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),t.onDisplayed=this.afterDisplayed.bind(this),t.onResize=this.afterResized.bind(this),t.display(this.request)}append(e){var t=this.createView(e);return t.on(we.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(we.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(we.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.append(t),t.onDisplayed=this.afterDisplayed.bind(this),t}prepend(e){var t=this.createView(e);return t.on(we.VIEWS.RESIZED,r=>{this.counter(r),t.expanded=!0}),t.on(we.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(we.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.prepend(t),t.onDisplayed=this.afterDisplayed.bind(this),t}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var t=this.bounds(),r=this.views.all(),i=r.length,s=typeof e<"u"?e:this.settings.offset||0,n,a,u=new Ve,c=[],d=0;d<i;d++)if(a=r[d],n=this.isVisible(a,s,s,t),n===!0)if(a.displayed)a.show();else{let p=a.display(this.request).then(function(b){b.show()},b=>{a.hide()});c.push(p)}else this.q.enqueue(a.destroy.bind(a)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return c.length?Promise.all(c).catch(p=>{u.reject(p)}):(u.resolve(),u.promise)}check(e,t){var r=new Ve,i=[],s=this.settings.axis==="horizontal",n=this.settings.offset||0;e&&s&&(n=e),t&&!s&&(n=t);var a=this._bounds;let u=s?this.scrollLeft:this.scrollTop,c=s?Math.floor(a.width):a.height,d=s?this.container.scrollWidth:this.container.scrollHeight,p=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",b=this.settings.rtlScrollType,y=this.settings.direction==="rtl";this.settings.fullsize?(s&&y&&b==="negative"||!s&&y&&b==="default")&&(u=u*-1):(y&&b==="default"&&p==="horizontal"&&(u=d-c-u),y&&b==="negative"&&p==="horizontal"&&(u=u*-1));let C=()=>{let D=this.views.first(),I=D&&D.section.prev();I&&i.push(this.prepend(I))},w=()=>{let D=this.views.last(),I=D&&D.section.next();I&&i.push(this.append(I))},f=u+c+n,v=u-n;f>=d&&w(),v<0&&C();let m=i.map(D=>D.display(this.request));return i.length?Promise.all(m).then(()=>this.check()).then(()=>this.update(n),D=>D):(this.q.enqueue((function(){this.update()}).bind(this)),r.resolve(!1),r.promise)}trim(){for(var e=new Ve,t=this.views.displayed(),r=t[0],i=t[t.length-1],s=this.views.indexOf(r),n=this.views.indexOf(i),a=this.views.slice(0,s),u=this.views.slice(n+1),c=0;c<a.length-1;c++)this.erase(a[c],a);for(var d=1;d<u.length;d++)this.erase(u[d]);return e.resolve(),e.promise}erase(e,t){var r,i;this.settings.fullsize?(r=window.scrollY,i=window.scrollX):(r=this.container.scrollTop,i=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),t&&(this.settings.axis==="vertical"?this.scrollTo(0,r-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(i+Math.floor(s.width),0,!0):this.scrollTo(i,0,!0):this.scrollTo(i-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(t){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new en(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=on;let t=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*t,this.scrollLeft=window.scrollX*t):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=su(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,t,r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*r,t=window.scrollX*r):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(we.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(we.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new en(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class dn{constructor(e,t){this.settings=yt(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),yt(this.settings,t),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new It(this),this.hooks.serialize=new It(this),this.hooks.content=new It(this),this.hooks.unloaded=new It(this),this.hooks.layout=new It(this),this.hooks.render=new It(this),this.hooks.show=new It(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new Oo(this),this.annotations=new Fo(this),this.epubcfi=new Ze,this.q=new hn(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new Ve,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var t;return typeof e=="string"&&e==="default"?t=Wr:typeof e=="string"&&e==="continuous"?t=au:t=e,t}requireView(e){var t;return typeof e=="string"&&e==="iframe"?t=ra:t=e,t}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(we.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(we.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(we.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(we.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(we.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(we.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(we.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var t=new Ve,r=t.promise,i;return this.displaying=t,this.book.locations.length()&&js(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),i=this.book.spine.get(e),i?(this.manager.display(i,e).then(()=>{t.resolve(i),this.displaying=void 0,this.emit(we.RENDITION.DISPLAYED,i),this.reportLocation()},s=>{this.emit(we.RENDITION.DISPLAY_ERROR,s)}),r):(t.reject(new Error("No Section Found")),r)}}afterDisplayed(e){e.on(we.VIEWS.MARK_CLICKED,(t,r)=>this.triggerMarkEvent(t,r,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(we.RENDITION.RENDERED,e.section,e)}):this.emit(we.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(we.RENDITION.REMOVED,e.section,e)})}onResized(e,t){this.emit(we.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}onOrientationChange(e){this.emit(we.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,t,r){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,r)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var t,r=this.settings.layout||e.layout||"reflowable",i=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",n=this.settings.flow||e.flow||"auto",a=e.viewport||"",u=this.settings.minSpreadWidth||e.minSpreadWidth||800,c=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),t={layout:r,spread:i,orientation:s,flow:n,viewport:a,minSpreadWidth:u,direction:c},t}flow(e){var t=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(t="scrolled"),(e==="auto"||e==="paginated")&&(t="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new Qs(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(we.LAYOUT.UPDATED,(t,r)=>{this.emit(we.RENDITION.LAYOUT,t,r)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var r=this.manager.currentLocation();if(r&&r.then&&typeof r.then=="function")r.then((function(i){let s=this.located(i);!s||!s.start||!s.end||(this.location=s,this.emit(we.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(we.RENDITION.RELOCATED,this.location))}).bind(this));else if(r){let i=this.located(r);if(!i||!i.start||!i.end)return;this.location=i,this.emit(we.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(we.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(t){return this.located(t)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let t=e[0],r=e[e.length-1],i={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:r.index,href:r.href,cfi:r.mapping.end,displayed:{page:r.pages[r.pages.length-1]||1,total:r.totalPages}}},s=this.book.locations.locationFromCfi(t.mapping.start),n=this.book.locations.locationFromCfi(r.mapping.end);s!=null&&(i.start.location=s,i.start.percentage=this.book.locations.percentageFromLocation(s)),n!=null&&(i.end.location=n,i.end.percentage=this.book.locations.percentageFromLocation(n));let a=this.book.pageList.pageFromCfi(t.mapping.start),u=this.book.pageList.pageFromCfi(r.mapping.end);return a!=-1&&(i.start.page=a),u!=-1&&(i.end.page=u),r.index===this.book.spine.last().index&&i.end.displayed.page>=i.end.displayed.total&&(i.atEnd=!0),t.index===this.book.spine.first().index&&i.start.displayed.page===1&&(i.atStart=!0),i}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){Ir.forEach(t=>{e.on(t,r=>this.triggerViewEvent(r,e))}),e.on(we.CONTENTS.SELECTED,t=>this.triggerSelectedEvent(t,e))}triggerViewEvent(e,t){this.emit(e.type,e,t)}triggerSelectedEvent(e,t){this.emit(we.RENDITION.SELECTED,e,t)}triggerMarkEvent(e,t,r){this.emit(we.RENDITION.MARK_CLICKED,e,t,r)}getRange(e,t){var r=new Ze(e),i=this.manager.visible().filter(function(s){if(r.spinePos===s.index)return!0});if(i.length)return i[0].contents.range(r,t)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let t=e.window.getComputedStyle(e.content,null),r=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95,i=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,n){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(we.CONTENTS.LINK_CLICKED,t=>{let r=this.book.path.relative(t);this.display(r)})}injectStylesheet(e,t){let r=e.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(r)}injectScript(e,t){let r=e.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",e.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(e,t){let r=this.book.packaging.metadata.identifier,i=e.createElement("meta");i.setAttribute("name","dc.relation.ispartof"),r&&i.setAttribute("content",r),e.getElementsByTagName("head")[0].appendChild(i)}}Ft(dn.prototype);var Wi={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var ys;function ou(){return ys||(ys=1,(function(o,e){(function(t){o.exports=t()})(function(){return(function t(r,i,s){function n(c,d){if(!i[c]){if(!r[c]){var p=typeof Vt=="function"&&Vt;if(!d&&p)return p(c,!0);if(a)return a(c,!0);var b=new Error("Cannot find module '"+c+"'");throw b.code="MODULE_NOT_FOUND",b}var y=i[c]={exports:{}};r[c][0].call(y.exports,function(C){var w=r[c][1][C];return n(w||C)},y,y.exports,t,r,i,s)}return i[c].exports}for(var a=typeof Vt=="function"&&Vt,u=0;u<s.length;u++)n(s[u]);return n})({1:[function(t,r,i){var s=t("./utils"),n=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var c=[],d,p,b,y,C,w,f,v=0,m=u.length,D=m,I=s.getTypeOf(u)!=="string";v<u.length;)D=m-v,I?(d=u[v++],p=v<m?u[v++]:0,b=v<m?u[v++]:0):(d=u.charCodeAt(v++),p=v<m?u.charCodeAt(v++):0,b=v<m?u.charCodeAt(v++):0),y=d>>2,C=(d&3)<<4|p>>4,w=D>1?(p&15)<<2|b>>6:64,f=D>2?b&63:64,c.push(a.charAt(y)+a.charAt(C)+a.charAt(w)+a.charAt(f));return c.join("")},i.decode=function(u){var c,d,p,b,y,C,w,f=0,v=0,m="data:";if(u.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");u=u.replace(/[^A-Za-z0-9+/=]/g,"");var D=u.length*3/4;if(u.charAt(u.length-1)===a.charAt(64)&&D--,u.charAt(u.length-2)===a.charAt(64)&&D--,D%1!==0)throw new Error("Invalid base64 input, bad content length.");var I;for(n.uint8array?I=new Uint8Array(D|0):I=new Array(D|0);f<u.length;)b=a.indexOf(u.charAt(f++)),y=a.indexOf(u.charAt(f++)),C=a.indexOf(u.charAt(f++)),w=a.indexOf(u.charAt(f++)),c=b<<2|y>>4,d=(y&15)<<4|C>>2,p=(C&3)<<6|w,I[v++]=c,C!==64&&(I[v++]=d),w!==64&&(I[v++]=p);return I}},{"./support":30,"./utils":32}],2:[function(t,r,i){var s=t("./external"),n=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function c(d,p,b,y,C){this.compressedSize=d,this.uncompressedSize=p,this.crc32=b,this.compression=y,this.compressedContent=C}c.prototype={getContentWorker:function(){var d=new n(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),p=this;return d.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new n(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,p,b){return d.pipe(new a).pipe(new u("uncompressedSize")).pipe(p.compressWorker(b)).pipe(new u("compressedSize")).withStreamInfo("compression",p)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var s=t("./utils");function n(){for(var d,p=[],b=0;b<256;b++){d=b;for(var y=0;y<8;y++)d=d&1?3988292384^d>>>1:d>>>1;p[b]=d}return p}var a=n();function u(d,p,b,y){var C=a,w=y+b;d=d^-1;for(var f=y;f<w;f++)d=d>>>8^C[(d^p[f])&255];return d^-1}function c(d,p,b,y){var C=a,w=y+b;d=d^-1;for(var f=y;f<w;f++)d=d>>>8^C[(d^p.charCodeAt(f))&255];return d^-1}r.exports=function(p,b){if(typeof p>"u"||!p.length)return 0;var y=s.getTypeOf(p)!=="string";return y?u(b|0,p,p.length,0):c(b|0,p,p.length,0)}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var s=null;typeof Promise<"u"?s=Promise:s=t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",n=t("pako"),a=t("./utils"),u=t("./stream/GenericWorker"),c=s?"uint8array":"array";i.magic="\b\0";function d(p,b){u.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=b,this.meta={}}a.inherits(d,u),d.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,p.data),!1)},d.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(b){p.push({data:b,meta:p.meta})}},i.compressWorker=function(p){return new d("Deflate",p)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){var s=t("../utils"),n=t("../stream/GenericWorker"),a=t("../utf8"),u=t("../crc32"),c=t("../signature"),d=function(v,m){var D="",I;for(I=0;I<m;I++)D+=String.fromCharCode(v&255),v=v>>>8;return D},p=function(v,m){var D=v;return v||(D=m?16893:33204),(D&65535)<<16},b=function(v){return(v||0)&63},y=function(v,m,D,I,_,T){var N=v.file,O=v.compression,R=T!==a.utf8encode,B=s.transformTo("string",T(N.name)),$=s.transformTo("string",a.utf8encode(N.name)),V=N.comment,Y=s.transformTo("string",T(V)),ie=s.transformTo("string",a.utf8encode(V)),se=$.length!==N.name.length,fe=ie.length!==V.length,ae,ee,pe="",Ce="",ue="",ce=N.dir,Ne=N.date,Ee={crc32:0,compressedSize:0,uncompressedSize:0};(!m||D)&&(Ee.crc32=v.crc32,Ee.compressedSize=v.compressedSize,Ee.uncompressedSize=v.uncompressedSize);var Te=0;m&&(Te|=8),!R&&(se||fe)&&(Te|=2048);var rt=0,We=0;ce&&(rt|=16),_==="UNIX"?(We=798,rt|=p(N.unixPermissions,ce)):(We=20,rt|=b(N.dosPermissions)),ae=Ne.getUTCHours(),ae=ae<<6,ae=ae|Ne.getUTCMinutes(),ae=ae<<5,ae=ae|Ne.getUTCSeconds()/2,ee=Ne.getUTCFullYear()-1980,ee=ee<<4,ee=ee|Ne.getUTCMonth()+1,ee=ee<<5,ee=ee|Ne.getUTCDate(),se&&(Ce=d(1,1)+d(u(B),4)+$,pe+="up"+d(Ce.length,2)+Ce),fe&&(ue=d(1,1)+d(u(Y),4)+ie,pe+="uc"+d(ue.length,2)+ue);var xe="";xe+=`
\0`,xe+=d(Te,2),xe+=O.magic,xe+=d(ae,2),xe+=d(ee,2),xe+=d(Ee.crc32,4),xe+=d(Ee.compressedSize,4),xe+=d(Ee.uncompressedSize,4),xe+=d(B.length,2),xe+=d(pe.length,2);var Ge=c.LOCAL_FILE_HEADER+xe+B+pe,Je=c.CENTRAL_FILE_HEADER+d(We,2)+xe+d(Y.length,2)+"\0\0\0\0"+d(rt,4)+d(I,4)+B+pe+Y;return{fileRecord:Ge,dirRecord:Je}},C=function(v,m,D,I,_){var T="",N=s.transformTo("string",_(I));return T=c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(v,2)+d(v,2)+d(m,4)+d(D,4)+d(N.length,2)+N,T},w=function(v){var m="";return m=c.DATA_DESCRIPTOR+d(v.crc32,4)+d(v.compressedSize,4)+d(v.uncompressedSize,4),m};function f(v,m,D,I){n.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=D,this.encodeFileName=I,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(f,n),f.prototype.push=function(v){var m=v.meta.percent||0,D=this.entriesCount,I=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,n.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:D?(m+100*(D-I-1))/D:100}}))},f.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var m=this.streamFiles&&!v.file.dir;if(m){var D=y(v,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:D.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(v){this.accumulate=!1;var m=this.streamFiles&&!v.file.dir,D=y(v,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(D.dirRecord),m)this.push({data:w(v),meta:{percent:100}});else for(this.push({data:D.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var v=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var D=this.bytesWritten-v,I=C(this.dirRecords.length,D,v,this.zipComment,this.encodeFileName);this.push({data:I,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(v){this._sources.push(v);var m=this;return v.on("data",function(D){m.processChunk(D)}),v.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),v.on("error",function(D){m.error(D)}),this},f.prototype.resume=function(){if(!n.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},f.prototype.error=function(v){var m=this._sources;if(!n.prototype.error.call(this,v))return!1;for(var D=0;D<m.length;D++)try{m[D].error(v)}catch{}return!0},f.prototype.lock=function(){n.prototype.lock.call(this);for(var v=this._sources,m=0;m<v.length;m++)v[m].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var s=t("../compressions"),n=t("./ZipFileWorker"),a=function(u,c){var d=u||c,p=s[d];if(!p)throw new Error(d+" is not a valid compression method !");return p};i.generateWorker=function(u,c,d){var p=new n(c.streamFiles,d,c.platform,c.encodeFileName),b=0;try{u.forEach(function(y,C){b++;var w=a(C.options.compression,c.compression),f=C.options.compressionOptions||c.compressionOptions||{},v=C.dir,m=C.date;C._compressWorker(w,f).withStreamInfo("file",{name:y,dir:v,date:m,comment:C.comment||"",unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions}).pipe(p)}),p.entriesCount=b}catch(y){p.error(y)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var n=new s;for(var a in this)typeof this[a]!="function"&&(n[a]=this[a]);return n}}s.prototype=t("./object"),s.prototype.loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(n,a){return new s().loadAsync(n,a)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var s=t("./utils"),n=t("./external"),a=t("./utf8"),u=t("./zipEntries"),c=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function p(b){return new n.Promise(function(y,C){var w=b.decompressed.getContentWorker().pipe(new c);w.on("error",function(f){C(f)}).on("end",function(){w.streamInfo.crc32!==b.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(b,y){var C=this;return y=s.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(b)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",b,!0,y.optimizedBinaryString,y.base64).then(function(w){var f=new u(y);return f.load(w),f}).then(function(f){var v=[n.Promise.resolve(f)],m=f.files;if(y.checkCRC32)for(var D=0;D<m.length;D++)v.push(p(m[D]));return n.Promise.all(v)}).then(function(f){for(var v=f.shift(),m=v.files,D=0;D<m.length;D++){var I=m[D],_=I.fileNameStr,T=s.resolve(I.fileNameStr);C.file(T,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:y.createFolders}),I.dir||(C.file(T).unsafeOriginalName=_)}return v.zipComment.length&&(C.comment=v.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var s=t("../utils"),n=t("../stream/GenericWorker");function a(u,c){n.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,n),a.prototype._bindStream=function(u){var c=this;this._stream=u,u.pause(),u.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return n.prototype.pause.call(this)?(this._stream.pause(),!0):!1},a.prototype.resume=function(){return n.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var s=t("readable-stream").Readable,n=t("../utils");n.inherits(a,s);function a(u,c,d){s.call(this,c),this._helper=u;var p=this;u.on("data",function(b,y){p.push(b)||p._helper.pause(),d&&d(y)}).on("error",function(b){p.emit("error",b)}).on("end",function(){p.push(null)})}a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,n);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,n)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var n=new Buffer(s);return n.fill(0),n},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,i){var s=t("./utf8"),n=t("./utils"),a=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),c=t("./defaults"),d=t("./compressedObject"),p=t("./zipObject"),b=t("./generate"),y=t("./nodejsUtils"),C=t("./nodejs/NodejsStreamInputAdapter"),w=function(_,T,N){var O=n.getTypeOf(T),R,B=n.extend(N||{},c);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&B.unixPermissions&16384&&(B.dir=!0),B.dosPermissions&&B.dosPermissions&16&&(B.dir=!0),B.dir&&(_=v(_)),B.createFolders&&(R=f(_))&&m.call(this,R,!0);var $=O==="string"&&B.binary===!1&&B.base64===!1;(!N||typeof N.binary>"u")&&(B.binary=!$);var V=T instanceof d&&T.uncompressedSize===0;(V||B.dir||!T||T.length===0)&&(B.base64=!1,B.binary=!0,T="",B.compression="STORE",O="string");var Y=null;T instanceof d||T instanceof a?Y=T:y.isNode&&y.isStream(T)?Y=new C(_,T):Y=n.prepareContent(_,T,B.binary,B.optimizedBinaryString,B.base64);var ie=new p(_,Y,B);this.files[_]=ie},f=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var T=_.lastIndexOf("/");return T>0?_.substring(0,T):""},v=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},m=function(_,T){return T=typeof T<"u"?T:c.createFolders,_=v(_),this.files[_]||w.call(this,_,null,{dir:!0,createFolders:T}),this.files[_]};function D(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var T,N,O;for(T in this.files)O=this.files[T],N=T.slice(this.root.length,T.length),N&&T.slice(0,this.root.length)===this.root&&_(N,O)},filter:function(_){var T=[];return this.forEach(function(N,O){_(N,O)&&T.push(O)}),T},file:function(_,T,N){if(arguments.length===1)if(D(_)){var O=_;return this.filter(function(B,$){return!$.dir&&O.test(B)})}else{var R=this.files[this.root+_];return R&&!R.dir?R:null}else _=this.root+_,w.call(this,_,T,N);return this},folder:function(_){if(!_)return this;if(D(_))return this.filter(function(R,B){return B.dir&&_.test(R)});var T=this.root+_,N=m.call(this,T),O=this.clone();return O.root=N.name,O},remove:function(_){_=this.root+_;var T=this.files[_];if(T||(_.slice(-1)!=="/"&&(_+="/"),T=this.files[_]),T&&!T.dir)delete this.files[_];else for(var N=this.filter(function(R,B){return B.name.slice(0,_.length)===_}),O=0;O<N.length;O++)delete this.files[N[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var T,N={};try{if(N=n.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode}),N.type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");n.checkSupport(N.type),(N.platform==="darwin"||N.platform==="freebsd"||N.platform==="linux"||N.platform==="sunos")&&(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var O=N.comment||this.comment||"";T=b.generateWorker(this,N,O)}catch(R){T=new a("error"),T.error(R)}return new u(T,N.type||"string",N.mimeType)},generateAsync:function(_,T){return this.generateInternalStream(_).accumulate(T)},generateNodeStream:function(_,T){return _=_||{},_.type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(T)}};r.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var s=t("./DataReader"),n=t("../utils");function a(u){s.call(this,u);for(var c=0;c<this.data.length;c++)u[c]=u[c]&255}n.inherits(a,s),a.prototype.byteAt=function(u){return this.data[this.zero+u]},a.prototype.lastIndexOfSignature=function(u){for(var c=u.charCodeAt(0),d=u.charCodeAt(1),p=u.charCodeAt(2),b=u.charCodeAt(3),y=this.length-4;y>=0;--y)if(this.data[y]===c&&this.data[y+1]===d&&this.data[y+2]===p&&this.data[y+3]===b)return y-this.zero;return-1},a.prototype.readAndCheckSignature=function(u){var c=u.charCodeAt(0),d=u.charCodeAt(1),p=u.charCodeAt(2),b=u.charCodeAt(3),y=this.readData(4);return c===y[0]&&d===y[1]&&p===y[2]&&b===y[3]},a.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,c},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var s=t("../utils");function n(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u=0,c;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}},r.exports=n},{"../utils":32}],19:[function(t,r,i){var s=t("./Uint8ArrayReader"),n=t("../utils");function a(u){s.call(this,u)}n.inherits(a,s),a.prototype.readData=function(u){this.checkOffset(u);var c=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,c},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var s=t("./DataReader"),n=t("../utils");function a(u){s.call(this,u)}n.inherits(a,s),a.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},a.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},a.prototype.readAndCheckSignature=function(u){var c=this.readData(4);return u===c},a.prototype.readData=function(u){this.checkOffset(u);var c=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,c},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var s=t("./ArrayReader"),n=t("../utils");function a(u){s.call(this,u)}n.inherits(a,s),a.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,c},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var s=t("../utils"),n=t("../support"),a=t("./ArrayReader"),u=t("./StringReader"),c=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");r.exports=function(p){var b=s.getTypeOf(p);return s.checkSupport(b),b==="string"&&!n.uint8array?new u(p):b==="nodebuffer"?new c(p):n.uint8array?new d(s.transformTo("uint8array",p)):new a(s.transformTo("array",p))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var s=t("./GenericWorker"),n=t("../utils");function a(u){s.call(this,"ConvertWorker to "+u),this.destType=u}n.inherits(a,s),a.prototype.processChunk=function(u){this.push({data:n.transformTo(this.destType,u.data),meta:u.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var s=t("./GenericWorker"),n=t("../crc32"),a=t("../utils");function u(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a.inherits(u,s),u.prototype.processChunk=function(c){this.streamInfo.crc32=n(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var s=t("../utils"),n=t("./GenericWorker");function a(u){n.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(a,n),a.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}n.prototype.processChunk.call(this,u)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var s=t("../utils"),n=t("./GenericWorker"),a=16*1024;function u(c){n.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(p){d.dataIsReady=!0,d.data=p,d.max=p&&p.length||0,d.type=s.getTypeOf(p),d.isPaused||d._tickAndRepeat()},function(p){d.error(p)})}s.inherits(u,n),u.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return n.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0):!1},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=a,d=null,p=Math.min(this.max,this.index+c);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,p);break;case"uint8array":d=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":d=this.data.slice(this.index,p);break}return this.index=p,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function s(n){this.name=n||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(n){this.emit("data",n)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(n){this.emit("error",n)}return!0},error:function(n){return this.isFinished?!1:(this.isPaused?this.generatedError=n:(this.isFinished=!0,this.emit("error",n),this.previous&&this.previous.error(n),this.cleanUp()),!0)},on:function(n,a){return this._listeners[n].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(n,a){if(this._listeners[n])for(var u=0;u<this._listeners[n].length;u++)this._listeners[n][u].call(this,a)},pipe:function(n){return n.registerPrevious(this)},registerPrevious:function(n){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=n.streamInfo,this.mergeStreamInfo(),this.previous=n;var a=this;return n.on("data",function(u){a.processChunk(u)}),n.on("end",function(){a.end()}),n.on("error",function(u){a.error(u)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var n=!1;return this.generatedError&&(this.error(this.generatedError),n=!0),this.previous&&this.previous.resume(),!n},flush:function(){},processChunk:function(n){this.push(n)},withStreamInfo:function(n,a){return this.extraStreamInfo[n]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var n in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,n)&&(this.streamInfo[n]=this.extraStreamInfo[n])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var n="Worker "+this.name;return this.previous?this.previous+" -> "+n:n}},r.exports=s},{}],29:[function(t,r,i){var s=t("../utils"),n=t("./ConvertWorker"),a=t("./GenericWorker"),u=t("../base64"),c=t("../support"),d=t("../external"),p=null;if(c.nodestream)try{p=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(f,v,m){switch(f){case"blob":return s.newBlob(s.transformTo("arraybuffer",v),m);case"base64":return u.encode(v);default:return s.transformTo(f,v)}}function y(f,v){var m,D=0,I=null,_=0;for(m=0;m<v.length;m++)_+=v[m].length;switch(f){case"string":return v.join("");case"array":return Array.prototype.concat.apply([],v);case"uint8array":for(I=new Uint8Array(_),m=0;m<v.length;m++)I.set(v[m],D),D+=v[m].length;return I;case"nodebuffer":return Buffer.concat(v);default:throw new Error("concat : unsupported type '"+f+"'")}}function C(f,v){return new d.Promise(function(m,D){var I=[],_=f._internalType,T=f._outputType,N=f._mimeType;f.on("data",function(O,R){I.push(O),v&&v(R)}).on("error",function(O){I=[],D(O)}).on("end",function(){try{var O=b(T,y(_,I),N);m(O)}catch(R){D(R)}I=[]}).resume()})}function w(f,v,m){var D=v;switch(v){case"blob":case"arraybuffer":D="uint8array";break;case"base64":D="string";break}try{this._internalType=D,this._outputType=v,this._mimeType=m,s.checkSupport(D),this._worker=f.pipe(new n(D)),f.lock()}catch(I){this._worker=new a("error"),this._worker.error(I)}}w.prototype={accumulate:function(f){return C(this,f)},on:function(f,v){var m=this;return f==="data"?this._worker.on(f,function(D){v.call(m,D.data,D.meta)}):this._worker.on(f,function(){s.delay(v,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},f)}},r.exports=w},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var n=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,a=new n;a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var s=t("./utils"),n=t("./support"),a=t("./nodejsUtils"),u=t("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;c[254]=c[254]=1;var p=function(f){var v,m,D,I,_,T=f.length,N=0;for(I=0;I<T;I++)m=f.charCodeAt(I),(m&64512)===55296&&I+1<T&&(D=f.charCodeAt(I+1),(D&64512)===56320&&(m=65536+(m-55296<<10)+(D-56320),I++)),N+=m<128?1:m<2048?2:m<65536?3:4;for(n.uint8array?v=new Uint8Array(N):v=new Array(N),_=0,I=0;_<N;I++)m=f.charCodeAt(I),(m&64512)===55296&&I+1<T&&(D=f.charCodeAt(I+1),(D&64512)===56320&&(m=65536+(m-55296<<10)+(D-56320),I++)),m<128?v[_++]=m:m<2048?(v[_++]=192|m>>>6,v[_++]=128|m&63):m<65536?(v[_++]=224|m>>>12,v[_++]=128|m>>>6&63,v[_++]=128|m&63):(v[_++]=240|m>>>18,v[_++]=128|m>>>12&63,v[_++]=128|m>>>6&63,v[_++]=128|m&63);return v},b=function(f,v){var m;for(v=v||f.length,v>f.length&&(v=f.length),m=v-1;m>=0&&(f[m]&192)===128;)m--;return m<0||m===0?v:m+c[f[m]]>v?m:v},y=function(f){var v,m,D,I,_=f.length,T=new Array(_*2);for(m=0,v=0;v<_;){if(D=f[v++],D<128){T[m++]=D;continue}if(I=c[D],I>4){T[m++]=65533,v+=I-1;continue}for(D&=I===2?31:I===3?15:7;I>1&&v<_;)D=D<<6|f[v++]&63,I--;if(I>1){T[m++]=65533;continue}D<65536?T[m++]=D:(D-=65536,T[m++]=55296|D>>10&1023,T[m++]=56320|D&1023)}return T.length!==m&&(T.subarray?T=T.subarray(0,m):T.length=m),s.applyFromCharCode(T)};i.utf8encode=function(v){return n.nodebuffer?a.newBufferFrom(v,"utf-8"):p(v)},i.utf8decode=function(v){return n.nodebuffer?s.transformTo("nodebuffer",v).toString("utf-8"):(v=s.transformTo(n.uint8array?"uint8array":"array",v),y(v))};function C(){u.call(this,"utf-8 decode"),this.leftOver=null}s.inherits(C,u),C.prototype.processChunk=function(f){var v=s.transformTo(n.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var m=v;v=new Uint8Array(m.length+this.leftOver.length),v.set(this.leftOver,0),v.set(m,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var D=b(v),I=v;D!==v.length&&(n.uint8array?(I=v.subarray(0,D),this.leftOver=v.subarray(D,v.length)):(I=v.slice(0,D),this.leftOver=v.slice(D,v.length))),this.push({data:i.utf8decode(I),meta:f.meta})},C.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=C;function w(){u.call(this,"utf-8 encode")}s.inherits(w,u),w.prototype.processChunk=function(f){this.push({data:i.utf8encode(f.data),meta:f.meta})},i.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var s=t("./support"),n=t("./base64"),a=t("./nodejsUtils"),u=t("./external");t("setimmediate");function c(f){var v=null;return s.uint8array?v=new Uint8Array(f.length):v=new Array(f.length),p(f,v)}i.newBlob=function(f,v){i.checkSupport("blob");try{return new Blob([f],{type:v})}catch{try{var m=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,D=new m;return D.append(f),D.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};function d(f){return f}function p(f,v){for(var m=0;m<f.length;++m)v[m]=f.charCodeAt(m)&255;return v}var b={stringifyByChunk:function(f,v,m){var D=[],I=0,_=f.length;if(_<=m)return String.fromCharCode.apply(null,f);for(;I<_;)v==="array"||v==="nodebuffer"?D.push(String.fromCharCode.apply(null,f.slice(I,Math.min(I+m,_)))):D.push(String.fromCharCode.apply(null,f.subarray(I,Math.min(I+m,_)))),I+=m;return D.join("")},stringifyByChar:function(f){for(var v="",m=0;m<f.length;m++)v+=String.fromCharCode(f[m]);return v},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function y(f){var v=65536,m=i.getTypeOf(f),D=!0;if(m==="uint8array"?D=b.applyCanBeUsed.uint8array:m==="nodebuffer"&&(D=b.applyCanBeUsed.nodebuffer),D)for(;v>1;)try{return b.stringifyByChunk(f,m,v)}catch{v=Math.floor(v/2)}return b.stringifyByChar(f)}i.applyFromCharCode=y;function C(f,v){for(var m=0;m<f.length;m++)v[m]=f[m];return v}var w={};w.string={string:d,array:function(f){return p(f,new Array(f.length))},arraybuffer:function(f){return w.string.uint8array(f).buffer},uint8array:function(f){return p(f,new Uint8Array(f.length))},nodebuffer:function(f){return p(f,a.allocBuffer(f.length))}},w.array={string:y,array:d,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(f)}},w.arraybuffer={string:function(f){return y(new Uint8Array(f))},array:function(f){return C(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:d,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(new Uint8Array(f))}},w.uint8array={string:y,array:function(f){return C(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:d,nodebuffer:function(f){return a.newBufferFrom(f)}},w.nodebuffer={string:y,array:function(f){return C(f,new Array(f.length))},arraybuffer:function(f){return w.nodebuffer.uint8array(f).buffer},uint8array:function(f){return C(f,new Uint8Array(f.length))},nodebuffer:d},i.transformTo=function(f,v){if(v||(v=""),!f)return v;i.checkSupport(f);var m=i.getTypeOf(v),D=w[m][f](v);return D},i.resolve=function(f){for(var v=f.split("/"),m=[],D=0;D<v.length;D++){var I=v[D];I==="."||I===""&&D!==0&&D!==v.length-1||(I===".."?m.pop():m.push(I))}return m.join("/")},i.getTypeOf=function(f){if(typeof f=="string")return"string";if(Object.prototype.toString.call(f)==="[object Array]")return"array";if(s.nodebuffer&&a.isBuffer(f))return"nodebuffer";if(s.uint8array&&f instanceof Uint8Array)return"uint8array";if(s.arraybuffer&&f instanceof ArrayBuffer)return"arraybuffer"},i.checkSupport=function(f){var v=s[f.toLowerCase()];if(!v)throw new Error(f+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(f){var v="",m,D;for(D=0;D<(f||"").length;D++)m=f.charCodeAt(D),v+="\\x"+(m<16?"0":"")+m.toString(16).toUpperCase();return v},i.delay=function(f,v,m){setImmediate(function(){f.apply(m||null,v||[])})},i.inherits=function(f,v){var m=function(){};m.prototype=v.prototype,f.prototype=new m},i.extend=function(){var f={},v,m;for(v=0;v<arguments.length;v++)for(m in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],m)&&typeof f[m]>"u"&&(f[m]=arguments[v][m]);return f},i.prepareContent=function(f,v,m,D,I){var _=u.Promise.resolve(v).then(function(T){var N=s.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1);return N&&typeof FileReader<"u"?new u.Promise(function(O,R){var B=new FileReader;B.onload=function($){O($.target.result)},B.onerror=function($){R($.target.error)},B.readAsArrayBuffer(T)}):T});return _.then(function(T){var N=i.getTypeOf(T);return N?(N==="arraybuffer"?T=i.transformTo("uint8array",T):N==="string"&&(I?T=n.decode(T):m&&D!==!0&&(T=c(T))),T):u.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var s=t("./reader/readerFor"),n=t("./utils"),a=t("./signature"),u=t("./zipEntry"),c=t("./support");function d(p){this.files=[],this.loadOptions=p}d.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(b)+", expected "+n.pretty(p)+")")}},isSignature:function(p,b){var y=this.reader.index;this.reader.setIndex(p);var C=this.reader.readString(4),w=C===b;return this.reader.setIndex(y),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),b=c.uint8array?"uint8array":"array",y=n.transformTo(b,p);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p=this.zip64EndOfCentralSize-44,b=0,y,C,w;b<p;)y=this.reader.readInt(2),C=this.reader.readInt(4),w=this.reader.readData(C),this.zip64ExtensibleData[y]={id:y,length:C,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,b;for(p=0;p<this.files.length;p++)b=this.files[p],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)p=new u({zip64:this.zip64},this.loadOptions),p.readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(p<0){var b=!this.isSignature(0,a.LOCAL_FILE_HEADER);throw b?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(p);var y=p;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,p=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),p<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var C=this.centralDirOffset+this.centralDirSize;this.zip64&&(C+=20,C+=12+this.zip64EndOfCentralSize);var w=y-C;if(w>0)this.isSignature(y,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(p){this.reader=s(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var s=t("./reader/readerFor"),n=t("./utils"),a=t("./compressedObject"),u=t("./crc32"),c=t("./utf8"),d=t("./compressions"),p=t("./support"),b=0,y=3,C=function(f){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===f)return d[v];return null};function w(f,v){this.options=f,this.loadOptions=v}w.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(f){var v,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(v=C(this.compressionMethod),v===null)throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,v,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var v=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(v),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),f===b&&(this.dosPermissions=this.externalFileAttributes&63),f===y&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var v=f.index+this.extraFieldsLength,m,D,I;for(this.extraFields||(this.extraFields={});f.index+4<v;)m=f.readInt(2),D=f.readInt(2),I=f.readData(D),this.extraFields[m]={id:m,length:D,value:I};f.setIndex(v)},handleUTF8:function(){var f=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var m=n.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var D=this.findExtraFieldUnicodeComment();if(D!==null)this.fileCommentStr=D;else{var I=n.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(I)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var v=s(f.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var v=s(f.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(f.length-5))}return null}},r.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){var s=t("./stream/StreamHelper"),n=t("./stream/DataWorker"),a=t("./utf8"),u=t("./compressedObject"),c=t("./stream/GenericWorker"),d=function(C,w,f){this.name=C,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=w,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}};d.prototype={internalStream:function(C){var w=null,f="string";try{if(!C)throw new Error("No output type specified.");f=C.toLowerCase();var v=f==="string"||f==="text";(f==="binarystring"||f==="text")&&(f="string"),w=this._decompressWorker();var m=!this._dataBinary;m&&!v&&(w=w.pipe(new a.Utf8EncodeWorker)),!m&&v&&(w=w.pipe(new a.Utf8DecodeWorker))}catch(D){w=new c("error"),w.error(D)}return new s(w,f,"")},async:function(C,w){return this.internalStream(C).accumulate(w)},nodeStream:function(C,w){return this.internalStream(C||"nodebuffer").toNodejsStream(w)},_compressWorker:function(C,w){if(this._data instanceof u&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new a.Utf8EncodeWorker)),u.createWorkerFrom(f,C,w)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new n(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<p.length;y++)d.prototype[p[y]]=b;r.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(s){var n=s.MutationObserver||s.WebKitMutationObserver,a;if(n){var u=0,c=new n(C),d=s.document.createTextNode("");c.observe(d,{characterData:!0}),a=function(){d.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var p=new s.MessageChannel;p.port1.onmessage=C,a=function(){p.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var f=s.document.createElement("script");f.onreadystatechange=function(){C(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},s.document.documentElement.appendChild(f)}:a=function(){setTimeout(C,0)};var b,y=[];function C(){b=!0;for(var f,v,m=y.length;m;){for(v=y,y=[],f=-1;++f<m;)v[f]();m=y.length}b=!1}r.exports=w;function w(f){y.push(f)===1&&!b&&a()}}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var s=t("immediate");function n(){}var a={},u=["REJECTED"],c=["FULFILLED"],d=["PENDING"];r.exports=p;function p(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,_!==n&&w(this,_)}p.prototype.finally=function(_){if(typeof _!="function")return this;var T=this.constructor;return this.then(N,O);function N(R){function B(){return R}return T.resolve(_()).then(B)}function O(R){function B(){throw R}return T.resolve(_()).then(B)}},p.prototype.catch=function(_){return this.then(null,_)},p.prototype.then=function(_,T){if(typeof _!="function"&&this.state===c||typeof T!="function"&&this.state===u)return this;var N=new this.constructor(n);if(this.state!==d){var O=this.state===c?_:T;y(N,O,this.outcome)}else this.queue.push(new b(N,_,T));return N};function b(_,T,N){this.promise=_,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},b.prototype.otherCallFulfilled=function(_){y(this.promise,this.onFulfilled,_)},b.prototype.callRejected=function(_){a.reject(this.promise,_)},b.prototype.otherCallRejected=function(_){y(this.promise,this.onRejected,_)};function y(_,T,N){s(function(){var O;try{O=T(N)}catch(R){return a.reject(_,R)}O===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,O)})}a.resolve=function(_,T){var N=f(C,T);if(N.status==="error")return a.reject(_,N.value);var O=N.value;if(O)w(_,O);else{_.state=c,_.outcome=T;for(var R=-1,B=_.queue.length;++R<B;)_.queue[R].callFulfilled(T)}return _},a.reject=function(_,T){_.state=u,_.outcome=T;for(var N=-1,O=_.queue.length;++N<O;)_.queue[N].callRejected(T);return _};function C(_){var T=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof T=="function")return function(){T.apply(_,arguments)}}function w(_,T){var N=!1;function O(V){N||(N=!0,a.reject(_,V))}function R(V){N||(N=!0,a.resolve(_,V))}function B(){T(R,O)}var $=f(B);$.status==="error"&&O($.value)}function f(_,T){var N={};try{N.value=_(T),N.status="success"}catch(O){N.status="error",N.value=O}return N}p.resolve=v;function v(_){return _ instanceof this?_:a.resolve(new this(n),_)}p.reject=m;function m(_){var T=new this(n);return a.reject(T,_)}p.all=D;function D(_){var T=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=_.length,O=!1;if(!N)return this.resolve([]);for(var R=new Array(N),B=0,$=-1,V=new this(n);++$<N;)Y(_[$],$);return V;function Y(ie,se){T.resolve(ie).then(fe,function(ae){O||(O=!0,a.reject(V,ae))});function fe(ae){R[se]=ae,++B===N&&!O&&(O=!0,a.resolve(V,R))}}}p.race=I;function I(_){var T=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=_.length,O=!1;if(!N)return this.resolve([]);for(var R=-1,B=new this(n);++R<N;)$(_[R]);return B;function $(V){T.resolve(V).then(function(Y){O||(O=!0,a.resolve(B,Y))},function(Y){O||(O=!0,a.reject(B,Y))})}}},{immediate:36}],38:[function(t,r,i){var s=t("./lib/utils/common").assign,n=t("./lib/deflate"),a=t("./lib/inflate"),u=t("./lib/zlib/constants"),c={};s(c,n,a,u),r.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var s=t("./zlib/deflate"),n=t("./utils/common"),a=t("./utils/strings"),u=t("./zlib/messages"),c=t("./zlib/zstream"),d=Object.prototype.toString,p=0,b=4,y=0,C=1,w=2,f=-1,v=0,m=8;function D(N){if(!(this instanceof D))return new D(N);this.options=n.assign({level:f,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},N||{});var O=this.options;O.raw&&O.windowBits>0?O.windowBits=-O.windowBits:O.gzip&&O.windowBits>0&&O.windowBits<16&&(O.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var R=s.deflateInit2(this.strm,O.level,O.method,O.windowBits,O.memLevel,O.strategy);if(R!==y)throw new Error(u[R]);if(O.header&&s.deflateSetHeader(this.strm,O.header),O.dictionary){var B;if(typeof O.dictionary=="string"?B=a.string2buf(O.dictionary):d.call(O.dictionary)==="[object ArrayBuffer]"?B=new Uint8Array(O.dictionary):B=O.dictionary,R=s.deflateSetDictionary(this.strm,B),R!==y)throw new Error(u[R]);this._dict_set=!0}}D.prototype.push=function(N,O){var R=this.strm,B=this.options.chunkSize,$,V;if(this.ended)return!1;V=O===~~O?O:O===!0?b:p,typeof N=="string"?R.input=a.string2buf(N):d.call(N)==="[object ArrayBuffer]"?R.input=new Uint8Array(N):R.input=N,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new n.Buf8(B),R.next_out=0,R.avail_out=B),$=s.deflate(R,V),$!==C&&$!==y)return this.onEnd($),this.ended=!0,!1;(R.avail_out===0||R.avail_in===0&&(V===b||V===w))&&(this.options.to==="string"?this.onData(a.buf2binstring(n.shrinkBuf(R.output,R.next_out))):this.onData(n.shrinkBuf(R.output,R.next_out)))}while((R.avail_in>0||R.avail_out===0)&&$!==C);return V===b?($=s.deflateEnd(this.strm),this.onEnd($),this.ended=!0,$===y):(V===w&&(this.onEnd(y),R.avail_out=0),!0)},D.prototype.onData=function(N){this.chunks.push(N)},D.prototype.onEnd=function(N){N===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg};function I(N,O){var R=new D(O);if(R.push(N,!0),R.err)throw R.msg||u[R.err];return R.result}function _(N,O){return O=O||{},O.raw=!0,I(N,O)}function T(N,O){return O=O||{},O.gzip=!0,I(N,O)}i.Deflate=D,i.deflate=I,i.deflateRaw=_,i.gzip=T},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var s=t("./zlib/inflate"),n=t("./utils/common"),a=t("./utils/strings"),u=t("./zlib/constants"),c=t("./zlib/messages"),d=t("./zlib/zstream"),p=t("./zlib/gzheader"),b=Object.prototype.toString;function y(f){if(!(this instanceof y))return new y(f);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},f||{});var v=this.options;v.raw&&v.windowBits>=0&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),v.windowBits>=0&&v.windowBits<16&&!(f&&f.windowBits)&&(v.windowBits+=32),v.windowBits>15&&v.windowBits<48&&(v.windowBits&15)===0&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,v.windowBits);if(m!==u.Z_OK)throw new Error(c[m]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}y.prototype.push=function(f,v){var m=this.strm,D=this.options.chunkSize,I=this.options.dictionary,_,T,N,O,R,B,$=!1;if(this.ended)return!1;T=v===~~v?v:v===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof f=="string"?m.input=a.binstring2buf(f):b.call(f)==="[object ArrayBuffer]"?m.input=new Uint8Array(f):m.input=f,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new n.Buf8(D),m.next_out=0,m.avail_out=D),_=s.inflate(m,u.Z_NO_FLUSH),_===u.Z_NEED_DICT&&I&&(typeof I=="string"?B=a.string2buf(I):b.call(I)==="[object ArrayBuffer]"?B=new Uint8Array(I):B=I,_=s.inflateSetDictionary(this.strm,B)),_===u.Z_BUF_ERROR&&$===!0&&(_=u.Z_OK,$=!1),_!==u.Z_STREAM_END&&_!==u.Z_OK)return this.onEnd(_),this.ended=!0,!1;m.next_out&&(m.avail_out===0||_===u.Z_STREAM_END||m.avail_in===0&&(T===u.Z_FINISH||T===u.Z_SYNC_FLUSH))&&(this.options.to==="string"?(N=a.utf8border(m.output,m.next_out),O=m.next_out-N,R=a.buf2string(m.output,N),m.next_out=O,m.avail_out=D-O,O&&n.arraySet(m.output,m.output,N,O,0),this.onData(R)):this.onData(n.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&($=!0)}while((m.avail_in>0||m.avail_out===0)&&_!==u.Z_STREAM_END);return _===u.Z_STREAM_END&&(T=u.Z_FINISH),T===u.Z_FINISH?(_=s.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===u.Z_OK):(T===u.Z_SYNC_FLUSH&&(this.onEnd(u.Z_OK),m.avail_out=0),!0)},y.prototype.onData=function(f){this.chunks.push(f)},y.prototype.onEnd=function(f){f===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg};function C(f,v){var m=new y(v);if(m.push(f,!0),m.err)throw m.msg||c[m.err];return m.result}function w(f,v){return v=v||{},v.raw=!0,C(f,v)}i.Inflate=y,i.inflate=C,i.inflateRaw=w,i.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var p in d)d.hasOwnProperty(p)&&(u[p]=d[p])}}return u},i.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var n={arraySet:function(u,c,d,p,b){if(c.subarray&&u.subarray){u.set(c.subarray(d,d+p),b);return}for(var y=0;y<p;y++)u[b+y]=c[d+y]},flattenChunks:function(u){var c,d,p,b,y,C;for(p=0,c=0,d=u.length;c<d;c++)p+=u[c].length;for(C=new Uint8Array(p),b=0,c=0,d=u.length;c<d;c++)y=u[c],C.set(y,b),b+=y.length;return C}},a={arraySet:function(u,c,d,p,b){for(var y=0;y<p;y++)u[b+y]=c[d+y]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(t,r,i){var s=t("./common"),n=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new s.Buf8(256),c=0;c<256;c++)u[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;u[254]=u[254]=1,i.string2buf=function(p){var b,y,C,w,f,v=p.length,m=0;for(w=0;w<v;w++)y=p.charCodeAt(w),(y&64512)===55296&&w+1<v&&(C=p.charCodeAt(w+1),(C&64512)===56320&&(y=65536+(y-55296<<10)+(C-56320),w++)),m+=y<128?1:y<2048?2:y<65536?3:4;for(b=new s.Buf8(m),f=0,w=0;f<m;w++)y=p.charCodeAt(w),(y&64512)===55296&&w+1<v&&(C=p.charCodeAt(w+1),(C&64512)===56320&&(y=65536+(y-55296<<10)+(C-56320),w++)),y<128?b[f++]=y:y<2048?(b[f++]=192|y>>>6,b[f++]=128|y&63):y<65536?(b[f++]=224|y>>>12,b[f++]=128|y>>>6&63,b[f++]=128|y&63):(b[f++]=240|y>>>18,b[f++]=128|y>>>12&63,b[f++]=128|y>>>6&63,b[f++]=128|y&63);return b};function d(p,b){if(b<65537&&(p.subarray&&a||!p.subarray&&n))return String.fromCharCode.apply(null,s.shrinkBuf(p,b));for(var y="",C=0;C<b;C++)y+=String.fromCharCode(p[C]);return y}i.buf2binstring=function(p){return d(p,p.length)},i.binstring2buf=function(p){for(var b=new s.Buf8(p.length),y=0,C=b.length;y<C;y++)b[y]=p.charCodeAt(y);return b},i.buf2string=function(p,b){var y,C,w,f,v=b||p.length,m=new Array(v*2);for(C=0,y=0;y<v;){if(w=p[y++],w<128){m[C++]=w;continue}if(f=u[w],f>4){m[C++]=65533,y+=f-1;continue}for(w&=f===2?31:f===3?15:7;f>1&&y<v;)w=w<<6|p[y++]&63,f--;if(f>1){m[C++]=65533;continue}w<65536?m[C++]=w:(w-=65536,m[C++]=55296|w>>10&1023,m[C++]=56320|w&1023)}return d(m,C)},i.utf8border=function(p,b){var y;for(b=b||p.length,b>p.length&&(b=p.length),y=b-1;y>=0&&(p[y]&192)===128;)y--;return y<0||y===0?b:y+u[p[y]]>b?y:b}},{"./common":41}],43:[function(t,r,i){function s(n,a,u,c){for(var d=n&65535|0,p=n>>>16&65535|0,b=0;u!==0;){b=u>2e3?2e3:u,u-=b;do d=d+a[c++]|0,p=p+d|0;while(--b);d%=65521,p%=65521}return d|p<<16|0}r.exports=s},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){function s(){for(var u,c=[],d=0;d<256;d++){u=d;for(var p=0;p<8;p++)u=u&1?3988292384^u>>>1:u>>>1;c[d]=u}return c}var n=s();function a(u,c,d,p){var b=n,y=p+d;u^=-1;for(var C=p;C<y;C++)u=u>>>8^b[(u^c[C])&255];return u^-1}r.exports=a},{}],46:[function(t,r,i){var s=t("../utils/common"),n=t("./trees"),a=t("./adler32"),u=t("./crc32"),c=t("./messages"),d=0,p=1,b=3,y=4,C=5,w=0,f=1,v=-2,m=-3,D=-5,I=-1,_=1,T=2,N=3,O=4,R=0,B=2,$=8,V=9,Y=15,ie=8,se=29,fe=256,ae=fe+1+se,ee=30,pe=19,Ce=2*ae+1,ue=15,ce=3,Ne=258,Ee=Ne+ce+1,Te=32,rt=42,We=69,xe=73,Ge=91,Je=103,Ie=113,ze=666,Le=1,Ue=2,Ke=3,He=4,je=3;function st(h,q){return h.msg=c[q],q}function U(h){return(h<<1)-(h>4?9:0)}function P(h){for(var q=h.length;--q>=0;)h[q]=0}function W(h){var q=h.state,G=q.pending;G>h.avail_out&&(G=h.avail_out),G!==0&&(s.arraySet(h.output,q.pending_buf,q.pending_out,G,h.next_out),h.next_out+=G,q.pending_out+=G,h.total_out+=G,h.avail_out-=G,q.pending-=G,q.pending===0&&(q.pending_out=0))}function J(h,q){n._tr_flush_block(h,h.block_start>=0?h.block_start:-1,h.strstart-h.block_start,q),h.block_start=h.strstart,W(h.strm)}function Q(h,q){h.pending_buf[h.pending++]=q}function de(h,q){h.pending_buf[h.pending++]=q>>>8&255,h.pending_buf[h.pending++]=q&255}function Ae(h,q,G,E){var L=h.avail_in;return L>E&&(L=E),L===0?0:(h.avail_in-=L,s.arraySet(q,h.input,h.next_in,L,G),h.state.wrap===1?h.adler=a(h.adler,q,L,G):h.state.wrap===2&&(h.adler=u(h.adler,q,L,G)),h.next_in+=L,h.total_in+=L,L)}function Se(h,q){var G=h.max_chain_length,E=h.strstart,L,X,be=h.prev_length,ve=h.nice_match,me=h.strstart>h.w_size-Ee?h.strstart-(h.w_size-Ee):0,Oe=h.window,ut=h.w_mask,Ye=h.prev,Pe=h.strstart+Ne,Me=Oe[E+be-1],ct=Oe[E+be];h.prev_length>=h.good_match&&(G>>=2),ve>h.lookahead&&(ve=h.lookahead);do if(L=q,!(Oe[L+be]!==ct||Oe[L+be-1]!==Me||Oe[L]!==Oe[E]||Oe[++L]!==Oe[E+1])){E+=2,L++;do;while(Oe[++E]===Oe[++L]&&Oe[++E]===Oe[++L]&&Oe[++E]===Oe[++L]&&Oe[++E]===Oe[++L]&&Oe[++E]===Oe[++L]&&Oe[++E]===Oe[++L]&&Oe[++E]===Oe[++L]&&Oe[++E]===Oe[++L]&&E<Pe);if(X=Ne-(Pe-E),E=Pe-Ne,X>be){if(h.match_start=q,be=X,X>=ve)break;Me=Oe[E+be-1],ct=Oe[E+be]}}while((q=Ye[q&ut])>me&&--G!==0);return be<=h.lookahead?be:h.lookahead}function De(h){var q=h.w_size,G,E,L,X,be;do{if(X=h.window_size-h.lookahead-h.strstart,h.strstart>=q+(q-Ee)){s.arraySet(h.window,h.window,q,q,0),h.match_start-=q,h.strstart-=q,h.block_start-=q,E=h.hash_size,G=E;do L=h.head[--G],h.head[G]=L>=q?L-q:0;while(--E);E=q,G=E;do L=h.prev[--G],h.prev[G]=L>=q?L-q:0;while(--E);X+=q}if(h.strm.avail_in===0)break;if(E=Ae(h.strm,h.window,h.strstart+h.lookahead,X),h.lookahead+=E,h.lookahead+h.insert>=ce)for(be=h.strstart-h.insert,h.ins_h=h.window[be],h.ins_h=(h.ins_h<<h.hash_shift^h.window[be+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[be+ce-1])&h.hash_mask,h.prev[be&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=be,be++,h.insert--,!(h.lookahead+h.insert<ce)););}while(h.lookahead<Ee&&h.strm.avail_in!==0)}function Fe(h,q){var G=65535;for(G>h.pending_buf_size-5&&(G=h.pending_buf_size-5);;){if(h.lookahead<=1){if(De(h),h.lookahead===0&&q===d)return Le;if(h.lookahead===0)break}h.strstart+=h.lookahead,h.lookahead=0;var E=h.block_start+G;if((h.strstart===0||h.strstart>=E)&&(h.lookahead=h.strstart-E,h.strstart=E,J(h,!1),h.strm.avail_out===0)||h.strstart-h.block_start>=h.w_size-Ee&&(J(h,!1),h.strm.avail_out===0))return Le}return h.insert=0,q===y?(J(h,!0),h.strm.avail_out===0?Ke:He):(h.strstart>h.block_start&&(J(h,!1),h.strm.avail_out===0),Le)}function Be(h,q){for(var G,E;;){if(h.lookahead<Ee){if(De(h),h.lookahead<Ee&&q===d)return Le;if(h.lookahead===0)break}if(G=0,h.lookahead>=ce&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ce-1])&h.hash_mask,G=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),G!==0&&h.strstart-G<=h.w_size-Ee&&(h.match_length=Se(h,G)),h.match_length>=ce)if(E=n._tr_tally(h,h.strstart-h.match_start,h.match_length-ce),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=ce){h.match_length--;do h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ce-1])&h.hash_mask,G=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart;while(--h.match_length!==0);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else E=n._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(E&&(J(h,!1),h.strm.avail_out===0))return Le}return h.insert=h.strstart<ce-1?h.strstart:ce-1,q===y?(J(h,!0),h.strm.avail_out===0?Ke:He):h.last_lit&&(J(h,!1),h.strm.avail_out===0)?Le:Ue}function Xe(h,q){for(var G,E,L;;){if(h.lookahead<Ee){if(De(h),h.lookahead<Ee&&q===d)return Le;if(h.lookahead===0)break}if(G=0,h.lookahead>=ce&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ce-1])&h.hash_mask,G=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=ce-1,G!==0&&h.prev_length<h.max_lazy_match&&h.strstart-G<=h.w_size-Ee&&(h.match_length=Se(h,G),h.match_length<=5&&(h.strategy===_||h.match_length===ce&&h.strstart-h.match_start>4096)&&(h.match_length=ce-1)),h.prev_length>=ce&&h.match_length<=h.prev_length){L=h.strstart+h.lookahead-ce,E=n._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-ce),h.lookahead-=h.prev_length-1,h.prev_length-=2;do++h.strstart<=L&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ce-1])&h.hash_mask,G=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart);while(--h.prev_length!==0);if(h.match_available=0,h.match_length=ce-1,h.strstart++,E&&(J(h,!1),h.strm.avail_out===0))return Le}else if(h.match_available){if(E=n._tr_tally(h,0,h.window[h.strstart-1]),E&&J(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return Le}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(E=n._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<ce-1?h.strstart:ce-1,q===y?(J(h,!0),h.strm.avail_out===0?Ke:He):h.last_lit&&(J(h,!1),h.strm.avail_out===0)?Le:Ue}function at(h,q){for(var G,E,L,X,be=h.window;;){if(h.lookahead<=Ne){if(De(h),h.lookahead<=Ne&&q===d)return Le;if(h.lookahead===0)break}if(h.match_length=0,h.lookahead>=ce&&h.strstart>0&&(L=h.strstart-1,E=be[L],E===be[++L]&&E===be[++L]&&E===be[++L])){X=h.strstart+Ne;do;while(E===be[++L]&&E===be[++L]&&E===be[++L]&&E===be[++L]&&E===be[++L]&&E===be[++L]&&E===be[++L]&&E===be[++L]&&L<X);h.match_length=Ne-(X-L),h.match_length>h.lookahead&&(h.match_length=h.lookahead)}if(h.match_length>=ce?(G=n._tr_tally(h,1,h.match_length-ce),h.lookahead-=h.match_length,h.strstart+=h.match_length,h.match_length=0):(G=n._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++),G&&(J(h,!1),h.strm.avail_out===0))return Le}return h.insert=0,q===y?(J(h,!0),h.strm.avail_out===0?Ke:He):h.last_lit&&(J(h,!1),h.strm.avail_out===0)?Le:Ue}function et(h,q){for(var G;;){if(h.lookahead===0&&(De(h),h.lookahead===0)){if(q===d)return Le;break}if(h.match_length=0,G=n._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++,G&&(J(h,!1),h.strm.avail_out===0))return Le}return h.insert=0,q===y?(J(h,!0),h.strm.avail_out===0?Ke:He):h.last_lit&&(J(h,!1),h.strm.avail_out===0)?Le:Ue}function Re(h,q,G,E,L){this.good_length=h,this.max_lazy=q,this.nice_length=G,this.max_chain=E,this.func=L}var it;it=[new Re(0,0,0,0,Fe),new Re(4,4,8,4,Be),new Re(4,5,16,8,Be),new Re(4,6,32,32,Be),new Re(4,4,16,16,Xe),new Re(8,16,32,32,Xe),new Re(8,16,128,128,Xe),new Re(8,32,128,256,Xe),new Re(32,128,258,1024,Xe),new Re(32,258,258,4096,Xe)];function gt(h){h.window_size=2*h.w_size,P(h.head),h.max_lazy_match=it[h.level].max_lazy,h.good_match=it[h.level].good_length,h.nice_match=it[h.level].nice_length,h.max_chain_length=it[h.level].max_chain,h.strstart=0,h.block_start=0,h.lookahead=0,h.insert=0,h.match_length=h.prev_length=ce-1,h.match_available=0,h.ins_h=0}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(Ce*2),this.dyn_dtree=new s.Buf16((2*ee+1)*2),this.bl_tree=new s.Buf16((2*pe+1)*2),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(ue+1),this.heap=new s.Buf16(2*ae+1),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*ae+1),P(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function te(h){var q;return!h||!h.state?st(h,v):(h.total_in=h.total_out=0,h.data_type=B,q=h.state,q.pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap?rt:Ie,h.adler=q.wrap===2?0:1,q.last_flush=d,n._tr_init(q),w)}function ne(h){var q=te(h);return q===w&&gt(h.state),q}function ye(h,q){return!h||!h.state||h.state.wrap!==2?v:(h.state.gzhead=q,w)}function z(h,q,G,E,L,X){if(!h)return v;var be=1;if(q===I&&(q=6),E<0?(be=0,E=-E):E>15&&(be=2,E-=16),L<1||L>V||G!==$||E<8||E>15||q<0||q>9||X<0||X>O)return st(h,v);E===8&&(E=9);var ve=new S;return h.state=ve,ve.strm=h,ve.wrap=be,ve.gzhead=null,ve.w_bits=E,ve.w_size=1<<ve.w_bits,ve.w_mask=ve.w_size-1,ve.hash_bits=L+7,ve.hash_size=1<<ve.hash_bits,ve.hash_mask=ve.hash_size-1,ve.hash_shift=~~((ve.hash_bits+ce-1)/ce),ve.window=new s.Buf8(ve.w_size*2),ve.head=new s.Buf16(ve.hash_size),ve.prev=new s.Buf16(ve.w_size),ve.lit_bufsize=1<<L+6,ve.pending_buf_size=ve.lit_bufsize*4,ve.pending_buf=new s.Buf8(ve.pending_buf_size),ve.d_buf=1*ve.lit_bufsize,ve.l_buf=3*ve.lit_bufsize,ve.level=q,ve.strategy=X,ve.method=G,ne(h)}function g(h,q){return z(h,q,$,Y,ie,R)}function l(h,q){var G,E,L,X;if(!h||!h.state||q>C||q<0)return h?st(h,v):v;if(E=h.state,!h.output||!h.input&&h.avail_in!==0||E.status===ze&&q!==y)return st(h,h.avail_out===0?D:v);if(E.strm=h,G=E.last_flush,E.last_flush=q,E.status===rt)if(E.wrap===2)h.adler=0,Q(E,31),Q(E,139),Q(E,8),E.gzhead?(Q(E,(E.gzhead.text?1:0)+(E.gzhead.hcrc?2:0)+(E.gzhead.extra?4:0)+(E.gzhead.name?8:0)+(E.gzhead.comment?16:0)),Q(E,E.gzhead.time&255),Q(E,E.gzhead.time>>8&255),Q(E,E.gzhead.time>>16&255),Q(E,E.gzhead.time>>24&255),Q(E,E.level===9?2:E.strategy>=T||E.level<2?4:0),Q(E,E.gzhead.os&255),E.gzhead.extra&&E.gzhead.extra.length&&(Q(E,E.gzhead.extra.length&255),Q(E,E.gzhead.extra.length>>8&255)),E.gzhead.hcrc&&(h.adler=u(h.adler,E.pending_buf,E.pending,0)),E.gzindex=0,E.status=We):(Q(E,0),Q(E,0),Q(E,0),Q(E,0),Q(E,0),Q(E,E.level===9?2:E.strategy>=T||E.level<2?4:0),Q(E,je),E.status=Ie);else{var be=$+(E.w_bits-8<<4)<<8,ve=-1;E.strategy>=T||E.level<2?ve=0:E.level<6?ve=1:E.level===6?ve=2:ve=3,be|=ve<<6,E.strstart!==0&&(be|=Te),be+=31-be%31,E.status=Ie,de(E,be),E.strstart!==0&&(de(E,h.adler>>>16),de(E,h.adler&65535)),h.adler=1}if(E.status===We)if(E.gzhead.extra){for(L=E.pending;E.gzindex<(E.gzhead.extra.length&65535)&&!(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>L&&(h.adler=u(h.adler,E.pending_buf,E.pending-L,L)),W(h),L=E.pending,E.pending===E.pending_buf_size));)Q(E,E.gzhead.extra[E.gzindex]&255),E.gzindex++;E.gzhead.hcrc&&E.pending>L&&(h.adler=u(h.adler,E.pending_buf,E.pending-L,L)),E.gzindex===E.gzhead.extra.length&&(E.gzindex=0,E.status=xe)}else E.status=xe;if(E.status===xe)if(E.gzhead.name){L=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>L&&(h.adler=u(h.adler,E.pending_buf,E.pending-L,L)),W(h),L=E.pending,E.pending===E.pending_buf_size)){X=1;break}E.gzindex<E.gzhead.name.length?X=E.gzhead.name.charCodeAt(E.gzindex++)&255:X=0,Q(E,X)}while(X!==0);E.gzhead.hcrc&&E.pending>L&&(h.adler=u(h.adler,E.pending_buf,E.pending-L,L)),X===0&&(E.gzindex=0,E.status=Ge)}else E.status=Ge;if(E.status===Ge)if(E.gzhead.comment){L=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>L&&(h.adler=u(h.adler,E.pending_buf,E.pending-L,L)),W(h),L=E.pending,E.pending===E.pending_buf_size)){X=1;break}E.gzindex<E.gzhead.comment.length?X=E.gzhead.comment.charCodeAt(E.gzindex++)&255:X=0,Q(E,X)}while(X!==0);E.gzhead.hcrc&&E.pending>L&&(h.adler=u(h.adler,E.pending_buf,E.pending-L,L)),X===0&&(E.status=Je)}else E.status=Je;if(E.status===Je&&(E.gzhead.hcrc?(E.pending+2>E.pending_buf_size&&W(h),E.pending+2<=E.pending_buf_size&&(Q(E,h.adler&255),Q(E,h.adler>>8&255),h.adler=0,E.status=Ie)):E.status=Ie),E.pending!==0){if(W(h),h.avail_out===0)return E.last_flush=-1,w}else if(h.avail_in===0&&U(q)<=U(G)&&q!==y)return st(h,D);if(E.status===ze&&h.avail_in!==0)return st(h,D);if(h.avail_in!==0||E.lookahead!==0||q!==d&&E.status!==ze){var me=E.strategy===T?et(E,q):E.strategy===N?at(E,q):it[E.level].func(E,q);if((me===Ke||me===He)&&(E.status=ze),me===Le||me===Ke)return h.avail_out===0&&(E.last_flush=-1),w;if(me===Ue&&(q===p?n._tr_align(E):q!==C&&(n._tr_stored_block(E,0,0,!1),q===b&&(P(E.head),E.lookahead===0&&(E.strstart=0,E.block_start=0,E.insert=0))),W(h),h.avail_out===0))return E.last_flush=-1,w}return q!==y?w:E.wrap<=0?f:(E.wrap===2?(Q(E,h.adler&255),Q(E,h.adler>>8&255),Q(E,h.adler>>16&255),Q(E,h.adler>>24&255),Q(E,h.total_in&255),Q(E,h.total_in>>8&255),Q(E,h.total_in>>16&255),Q(E,h.total_in>>24&255)):(de(E,h.adler>>>16),de(E,h.adler&65535)),W(h),E.wrap>0&&(E.wrap=-E.wrap),E.pending!==0?w:f)}function x(h){var q;return!h||!h.state?v:(q=h.state.status,q!==rt&&q!==We&&q!==xe&&q!==Ge&&q!==Je&&q!==Ie&&q!==ze?st(h,v):(h.state=null,q===Ie?st(h,m):w))}function M(h,q){var G=q.length,E,L,X,be,ve,me,Oe,ut;if(!h||!h.state||(E=h.state,be=E.wrap,be===2||be===1&&E.status!==rt||E.lookahead))return v;for(be===1&&(h.adler=a(h.adler,q,G,0)),E.wrap=0,G>=E.w_size&&(be===0&&(P(E.head),E.strstart=0,E.block_start=0,E.insert=0),ut=new s.Buf8(E.w_size),s.arraySet(ut,q,G-E.w_size,E.w_size,0),q=ut,G=E.w_size),ve=h.avail_in,me=h.next_in,Oe=h.input,h.avail_in=G,h.next_in=0,h.input=q,De(E);E.lookahead>=ce;){L=E.strstart,X=E.lookahead-(ce-1);do E.ins_h=(E.ins_h<<E.hash_shift^E.window[L+ce-1])&E.hash_mask,E.prev[L&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=L,L++;while(--X);E.strstart=L,E.lookahead=ce-1,De(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=ce-1,E.match_available=0,h.next_in=me,h.input=Oe,h.avail_in=ve,E.wrap=be,w}i.deflateInit=g,i.deflateInit2=z,i.deflateReset=ne,i.deflateResetKeep=te,i.deflateSetHeader=ye,i.deflate=l,i.deflateEnd=x,i.deflateSetDictionary=M,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r.exports=s},{}],48:[function(t,r,i){var s=30,n=12;r.exports=function(u,c){var d,p,b,y,C,w,f,v,m,D,I,_,T,N,O,R,B,$,V,Y,ie,se,fe,ae,ee;d=u.state,p=u.next_in,ae=u.input,b=p+(u.avail_in-5),y=u.next_out,ee=u.output,C=y-(c-u.avail_out),w=y+(u.avail_out-257),f=d.dmax,v=d.wsize,m=d.whave,D=d.wnext,I=d.window,_=d.hold,T=d.bits,N=d.lencode,O=d.distcode,R=(1<<d.lenbits)-1,B=(1<<d.distbits)-1;e:do{T<15&&(_+=ae[p++]<<T,T+=8,_+=ae[p++]<<T,T+=8),$=N[_&R];t:for(;;){if(V=$>>>24,_>>>=V,T-=V,V=$>>>16&255,V===0)ee[y++]=$&65535;else if(V&16){Y=$&65535,V&=15,V&&(T<V&&(_+=ae[p++]<<T,T+=8),Y+=_&(1<<V)-1,_>>>=V,T-=V),T<15&&(_+=ae[p++]<<T,T+=8,_+=ae[p++]<<T,T+=8),$=O[_&B];r:for(;;){if(V=$>>>24,_>>>=V,T-=V,V=$>>>16&255,V&16){if(ie=$&65535,V&=15,T<V&&(_+=ae[p++]<<T,T+=8,T<V&&(_+=ae[p++]<<T,T+=8)),ie+=_&(1<<V)-1,ie>f){u.msg="invalid distance too far back",d.mode=s;break e}if(_>>>=V,T-=V,V=y-C,ie>V){if(V=ie-V,V>m&&d.sane){u.msg="invalid distance too far back",d.mode=s;break e}if(se=0,fe=I,D===0){if(se+=v-V,V<Y){Y-=V;do ee[y++]=I[se++];while(--V);se=y-ie,fe=ee}}else if(D<V){if(se+=v+D-V,V-=D,V<Y){Y-=V;do ee[y++]=I[se++];while(--V);if(se=0,D<Y){V=D,Y-=V;do ee[y++]=I[se++];while(--V);se=y-ie,fe=ee}}}else if(se+=D-V,V<Y){Y-=V;do ee[y++]=I[se++];while(--V);se=y-ie,fe=ee}for(;Y>2;)ee[y++]=fe[se++],ee[y++]=fe[se++],ee[y++]=fe[se++],Y-=3;Y&&(ee[y++]=fe[se++],Y>1&&(ee[y++]=fe[se++]))}else{se=y-ie;do ee[y++]=ee[se++],ee[y++]=ee[se++],ee[y++]=ee[se++],Y-=3;while(Y>2);Y&&(ee[y++]=ee[se++],Y>1&&(ee[y++]=ee[se++]))}}else if((V&64)===0){$=O[($&65535)+(_&(1<<V)-1)];continue r}else{u.msg="invalid distance code",d.mode=s;break e}break}}else if((V&64)===0){$=N[($&65535)+(_&(1<<V)-1)];continue t}else if(V&32){d.mode=n;break e}else{u.msg="invalid literal/length code",d.mode=s;break e}break}}while(p<b&&y<w);Y=T>>3,p-=Y,T-=Y<<3,_&=(1<<T)-1,u.next_in=p,u.next_out=y,u.avail_in=p<b?5+(b-p):5-(p-b),u.avail_out=y<w?257+(w-y):257-(y-w),d.hold=_,d.bits=T}},{}],49:[function(t,r,i){var s=t("../utils/common"),n=t("./adler32"),a=t("./crc32"),u=t("./inffast"),c=t("./inftrees"),d=0,p=1,b=2,y=4,C=5,w=6,f=0,v=1,m=2,D=-2,I=-3,_=-4,T=-5,N=8,O=1,R=2,B=3,$=4,V=5,Y=6,ie=7,se=8,fe=9,ae=10,ee=11,pe=12,Ce=13,ue=14,ce=15,Ne=16,Ee=17,Te=18,rt=19,We=20,xe=21,Ge=22,Je=23,Ie=24,ze=25,Le=26,Ue=27,Ke=28,He=29,je=30,st=31,U=32,P=852,W=592,J=15,Q=J;function de(z){return(z>>>24&255)+(z>>>8&65280)+((z&65280)<<8)+((z&255)<<24)}function Ae(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Se(z){var g;return!z||!z.state?D:(g=z.state,z.total_in=z.total_out=g.total=0,z.msg="",g.wrap&&(z.adler=g.wrap&1),g.mode=O,g.last=0,g.havedict=0,g.dmax=32768,g.head=null,g.hold=0,g.bits=0,g.lencode=g.lendyn=new s.Buf32(P),g.distcode=g.distdyn=new s.Buf32(W),g.sane=1,g.back=-1,f)}function De(z){var g;return!z||!z.state?D:(g=z.state,g.wsize=0,g.whave=0,g.wnext=0,Se(z))}function Fe(z,g){var l,x;return!z||!z.state||(x=z.state,g<0?(l=0,g=-g):(l=(g>>4)+1,g<48&&(g&=15)),g&&(g<8||g>15))?D:(x.window!==null&&x.wbits!==g&&(x.window=null),x.wrap=l,x.wbits=g,De(z))}function Be(z,g){var l,x;return z?(x=new Ae,z.state=x,x.window=null,l=Fe(z,g),l!==f&&(z.state=null),l):D}function Xe(z){return Be(z,Q)}var at=!0,et,Re;function it(z){if(at){var g;for(et=new s.Buf32(512),Re=new s.Buf32(32),g=0;g<144;)z.lens[g++]=8;for(;g<256;)z.lens[g++]=9;for(;g<280;)z.lens[g++]=7;for(;g<288;)z.lens[g++]=8;for(c(p,z.lens,0,288,et,0,z.work,{bits:9}),g=0;g<32;)z.lens[g++]=5;c(b,z.lens,0,32,Re,0,z.work,{bits:5}),at=!1}z.lencode=et,z.lenbits=9,z.distcode=Re,z.distbits=5}function gt(z,g,l,x){var M,h=z.state;return h.window===null&&(h.wsize=1<<h.wbits,h.wnext=0,h.whave=0,h.window=new s.Buf8(h.wsize)),x>=h.wsize?(s.arraySet(h.window,g,l-h.wsize,h.wsize,0),h.wnext=0,h.whave=h.wsize):(M=h.wsize-h.wnext,M>x&&(M=x),s.arraySet(h.window,g,l-x,M,h.wnext),x-=M,x?(s.arraySet(h.window,g,l-x,x,0),h.wnext=x,h.whave=h.wsize):(h.wnext+=M,h.wnext===h.wsize&&(h.wnext=0),h.whave<h.wsize&&(h.whave+=M))),0}function S(z,g){var l,x,M,h,q,G,E,L,X,be,ve,me,Oe,ut,Ye=0,Pe,Me,ct,ot,Pt,Yt,lt,bt,vt=new s.Buf8(4),St,xt,Dr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!z||!z.state||!z.output||!z.input&&z.avail_in!==0)return D;l=z.state,l.mode===pe&&(l.mode=Ce),q=z.next_out,M=z.output,E=z.avail_out,h=z.next_in,x=z.input,G=z.avail_in,L=l.hold,X=l.bits,be=G,ve=E,bt=f;e:for(;;)switch(l.mode){case O:if(l.wrap===0){l.mode=Ce;break}for(;X<16;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if(l.wrap&2&&L===35615){l.check=0,vt[0]=L&255,vt[1]=L>>>8&255,l.check=a(l.check,vt,2,0),L=0,X=0,l.mode=R;break}if(l.flags=0,l.head&&(l.head.done=!1),!(l.wrap&1)||(((L&255)<<8)+(L>>8))%31){z.msg="incorrect header check",l.mode=je;break}if((L&15)!==N){z.msg="unknown compression method",l.mode=je;break}if(L>>>=4,X-=4,lt=(L&15)+8,l.wbits===0)l.wbits=lt;else if(lt>l.wbits){z.msg="invalid window size",l.mode=je;break}l.dmax=1<<lt,z.adler=l.check=1,l.mode=L&512?ae:pe,L=0,X=0;break;case R:for(;X<16;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if(l.flags=L,(l.flags&255)!==N){z.msg="unknown compression method",l.mode=je;break}if(l.flags&57344){z.msg="unknown header flags set",l.mode=je;break}l.head&&(l.head.text=L>>8&1),l.flags&512&&(vt[0]=L&255,vt[1]=L>>>8&255,l.check=a(l.check,vt,2,0)),L=0,X=0,l.mode=B;case B:for(;X<32;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}l.head&&(l.head.time=L),l.flags&512&&(vt[0]=L&255,vt[1]=L>>>8&255,vt[2]=L>>>16&255,vt[3]=L>>>24&255,l.check=a(l.check,vt,4,0)),L=0,X=0,l.mode=$;case $:for(;X<16;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}l.head&&(l.head.xflags=L&255,l.head.os=L>>8),l.flags&512&&(vt[0]=L&255,vt[1]=L>>>8&255,l.check=a(l.check,vt,2,0)),L=0,X=0,l.mode=V;case V:if(l.flags&1024){for(;X<16;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}l.length=L,l.head&&(l.head.extra_len=L),l.flags&512&&(vt[0]=L&255,vt[1]=L>>>8&255,l.check=a(l.check,vt,2,0)),L=0,X=0}else l.head&&(l.head.extra=null);l.mode=Y;case Y:if(l.flags&1024&&(me=l.length,me>G&&(me=G),me&&(l.head&&(lt=l.head.extra_len-l.length,l.head.extra||(l.head.extra=new Array(l.head.extra_len)),s.arraySet(l.head.extra,x,h,me,lt)),l.flags&512&&(l.check=a(l.check,x,me,h)),G-=me,h+=me,l.length-=me),l.length))break e;l.length=0,l.mode=ie;case ie:if(l.flags&2048){if(G===0)break e;me=0;do lt=x[h+me++],l.head&&lt&&l.length<65536&&(l.head.name+=String.fromCharCode(lt));while(lt&&me<G);if(l.flags&512&&(l.check=a(l.check,x,me,h)),G-=me,h+=me,lt)break e}else l.head&&(l.head.name=null);l.length=0,l.mode=se;case se:if(l.flags&4096){if(G===0)break e;me=0;do lt=x[h+me++],l.head&&lt&&l.length<65536&&(l.head.comment+=String.fromCharCode(lt));while(lt&&me<G);if(l.flags&512&&(l.check=a(l.check,x,me,h)),G-=me,h+=me,lt)break e}else l.head&&(l.head.comment=null);l.mode=fe;case fe:if(l.flags&512){for(;X<16;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if(L!==(l.check&65535)){z.msg="header crc mismatch",l.mode=je;break}L=0,X=0}l.head&&(l.head.hcrc=l.flags>>9&1,l.head.done=!0),z.adler=l.check=0,l.mode=pe;break;case ae:for(;X<32;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}z.adler=l.check=de(L),L=0,X=0,l.mode=ee;case ee:if(l.havedict===0)return z.next_out=q,z.avail_out=E,z.next_in=h,z.avail_in=G,l.hold=L,l.bits=X,m;z.adler=l.check=1,l.mode=pe;case pe:if(g===C||g===w)break e;case Ce:if(l.last){L>>>=X&7,X-=X&7,l.mode=Ue;break}for(;X<3;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}switch(l.last=L&1,L>>>=1,X-=1,L&3){case 0:l.mode=ue;break;case 1:if(it(l),l.mode=We,g===w){L>>>=2,X-=2;break e}break;case 2:l.mode=Ee;break;case 3:z.msg="invalid block type",l.mode=je}L>>>=2,X-=2;break;case ue:for(L>>>=X&7,X-=X&7;X<32;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if((L&65535)!==(L>>>16^65535)){z.msg="invalid stored block lengths",l.mode=je;break}if(l.length=L&65535,L=0,X=0,l.mode=ce,g===w)break e;case ce:l.mode=Ne;case Ne:if(me=l.length,me){if(me>G&&(me=G),me>E&&(me=E),me===0)break e;s.arraySet(M,x,h,me,q),G-=me,h+=me,E-=me,q+=me,l.length-=me;break}l.mode=pe;break;case Ee:for(;X<14;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if(l.nlen=(L&31)+257,L>>>=5,X-=5,l.ndist=(L&31)+1,L>>>=5,X-=5,l.ncode=(L&15)+4,L>>>=4,X-=4,l.nlen>286||l.ndist>30){z.msg="too many length or distance symbols",l.mode=je;break}l.have=0,l.mode=Te;case Te:for(;l.have<l.ncode;){for(;X<3;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}l.lens[Dr[l.have++]]=L&7,L>>>=3,X-=3}for(;l.have<19;)l.lens[Dr[l.have++]]=0;if(l.lencode=l.lendyn,l.lenbits=7,St={bits:l.lenbits},bt=c(d,l.lens,0,19,l.lencode,0,l.work,St),l.lenbits=St.bits,bt){z.msg="invalid code lengths set",l.mode=je;break}l.have=0,l.mode=rt;case rt:for(;l.have<l.nlen+l.ndist;){for(;Ye=l.lencode[L&(1<<l.lenbits)-1],Pe=Ye>>>24,Me=Ye>>>16&255,ct=Ye&65535,!(Pe<=X);){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if(ct<16)L>>>=Pe,X-=Pe,l.lens[l.have++]=ct;else{if(ct===16){for(xt=Pe+2;X<xt;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if(L>>>=Pe,X-=Pe,l.have===0){z.msg="invalid bit length repeat",l.mode=je;break}lt=l.lens[l.have-1],me=3+(L&3),L>>>=2,X-=2}else if(ct===17){for(xt=Pe+3;X<xt;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}L>>>=Pe,X-=Pe,lt=0,me=3+(L&7),L>>>=3,X-=3}else{for(xt=Pe+7;X<xt;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}L>>>=Pe,X-=Pe,lt=0,me=11+(L&127),L>>>=7,X-=7}if(l.have+me>l.nlen+l.ndist){z.msg="invalid bit length repeat",l.mode=je;break}for(;me--;)l.lens[l.have++]=lt}}if(l.mode===je)break;if(l.lens[256]===0){z.msg="invalid code -- missing end-of-block",l.mode=je;break}if(l.lenbits=9,St={bits:l.lenbits},bt=c(p,l.lens,0,l.nlen,l.lencode,0,l.work,St),l.lenbits=St.bits,bt){z.msg="invalid literal/lengths set",l.mode=je;break}if(l.distbits=6,l.distcode=l.distdyn,St={bits:l.distbits},bt=c(b,l.lens,l.nlen,l.ndist,l.distcode,0,l.work,St),l.distbits=St.bits,bt){z.msg="invalid distances set",l.mode=je;break}if(l.mode=We,g===w)break e;case We:l.mode=xe;case xe:if(G>=6&&E>=258){z.next_out=q,z.avail_out=E,z.next_in=h,z.avail_in=G,l.hold=L,l.bits=X,u(z,ve),q=z.next_out,M=z.output,E=z.avail_out,h=z.next_in,x=z.input,G=z.avail_in,L=l.hold,X=l.bits,l.mode===pe&&(l.back=-1);break}for(l.back=0;Ye=l.lencode[L&(1<<l.lenbits)-1],Pe=Ye>>>24,Me=Ye>>>16&255,ct=Ye&65535,!(Pe<=X);){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if(Me&&(Me&240)===0){for(ot=Pe,Pt=Me,Yt=ct;Ye=l.lencode[Yt+((L&(1<<ot+Pt)-1)>>ot)],Pe=Ye>>>24,Me=Ye>>>16&255,ct=Ye&65535,!(ot+Pe<=X);){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}L>>>=ot,X-=ot,l.back+=ot}if(L>>>=Pe,X-=Pe,l.back+=Pe,l.length=ct,Me===0){l.mode=Le;break}if(Me&32){l.back=-1,l.mode=pe;break}if(Me&64){z.msg="invalid literal/length code",l.mode=je;break}l.extra=Me&15,l.mode=Ge;case Ge:if(l.extra){for(xt=l.extra;X<xt;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}l.length+=L&(1<<l.extra)-1,L>>>=l.extra,X-=l.extra,l.back+=l.extra}l.was=l.length,l.mode=Je;case Je:for(;Ye=l.distcode[L&(1<<l.distbits)-1],Pe=Ye>>>24,Me=Ye>>>16&255,ct=Ye&65535,!(Pe<=X);){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if((Me&240)===0){for(ot=Pe,Pt=Me,Yt=ct;Ye=l.distcode[Yt+((L&(1<<ot+Pt)-1)>>ot)],Pe=Ye>>>24,Me=Ye>>>16&255,ct=Ye&65535,!(ot+Pe<=X);){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}L>>>=ot,X-=ot,l.back+=ot}if(L>>>=Pe,X-=Pe,l.back+=Pe,Me&64){z.msg="invalid distance code",l.mode=je;break}l.offset=ct,l.extra=Me&15,l.mode=Ie;case Ie:if(l.extra){for(xt=l.extra;X<xt;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}l.offset+=L&(1<<l.extra)-1,L>>>=l.extra,X-=l.extra,l.back+=l.extra}if(l.offset>l.dmax){z.msg="invalid distance too far back",l.mode=je;break}l.mode=ze;case ze:if(E===0)break e;if(me=ve-E,l.offset>me){if(me=l.offset-me,me>l.whave&&l.sane){z.msg="invalid distance too far back",l.mode=je;break}me>l.wnext?(me-=l.wnext,Oe=l.wsize-me):Oe=l.wnext-me,me>l.length&&(me=l.length),ut=l.window}else ut=M,Oe=q-l.offset,me=l.length;me>E&&(me=E),E-=me,l.length-=me;do M[q++]=ut[Oe++];while(--me);l.length===0&&(l.mode=xe);break;case Le:if(E===0)break e;M[q++]=l.length,E--,l.mode=xe;break;case Ue:if(l.wrap){for(;X<32;){if(G===0)break e;G--,L|=x[h++]<<X,X+=8}if(ve-=E,z.total_out+=ve,l.total+=ve,ve&&(z.adler=l.check=l.flags?a(l.check,M,ve,q-ve):n(l.check,M,ve,q-ve)),ve=E,(l.flags?L:de(L))!==l.check){z.msg="incorrect data check",l.mode=je;break}L=0,X=0}l.mode=Ke;case Ke:if(l.wrap&&l.flags){for(;X<32;){if(G===0)break e;G--,L+=x[h++]<<X,X+=8}if(L!==(l.total&4294967295)){z.msg="incorrect length check",l.mode=je;break}L=0,X=0}l.mode=He;case He:bt=v;break e;case je:bt=I;break e;case st:return _;case U:default:return D}return z.next_out=q,z.avail_out=E,z.next_in=h,z.avail_in=G,l.hold=L,l.bits=X,(l.wsize||ve!==z.avail_out&&l.mode<je&&(l.mode<Ue||g!==y))&&gt(z,z.output,z.next_out,ve-z.avail_out),be-=z.avail_in,ve-=z.avail_out,z.total_in+=be,z.total_out+=ve,l.total+=ve,l.wrap&&ve&&(z.adler=l.check=l.flags?a(l.check,M,ve,z.next_out-ve):n(l.check,M,ve,z.next_out-ve)),z.data_type=l.bits+(l.last?64:0)+(l.mode===pe?128:0)+(l.mode===We||l.mode===ce?256:0),(be===0&&ve===0||g===y)&&bt===f&&(bt=T),bt}function te(z){if(!z||!z.state)return D;var g=z.state;return g.window&&(g.window=null),z.state=null,f}function ne(z,g){var l;return!z||!z.state||(l=z.state,(l.wrap&2)===0)?D:(l.head=g,g.done=!1,f)}function ye(z,g){var l=g.length,x,M,h;return!z||!z.state||(x=z.state,x.wrap!==0&&x.mode!==ee)?D:x.mode===ee&&(M=1,M=n(M,g,l,0),M!==x.check)?I:(h=gt(z,g,l,l),h?(x.mode=st,_):(x.havedict=1,f))}i.inflateReset=De,i.inflateReset2=Fe,i.inflateResetKeep=Se,i.inflateInit=Xe,i.inflateInit2=Be,i.inflate=S,i.inflateEnd=te,i.inflateGetHeader=ne,i.inflateSetDictionary=ye,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var s=t("../utils/common"),n=15,a=852,u=592,c=0,d=1,p=2,b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],w=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(v,m,D,I,_,T,N,O){var R=O.bits,B=0,$=0,V=0,Y=0,ie=0,se=0,fe=0,ae=0,ee=0,pe=0,Ce,ue,ce,Ne,Ee,Te=null,rt=0,We,xe=new s.Buf16(n+1),Ge=new s.Buf16(n+1),Je=null,Ie=0,ze,Le,Ue;for(B=0;B<=n;B++)xe[B]=0;for($=0;$<I;$++)xe[m[D+$]]++;for(ie=R,Y=n;Y>=1&&xe[Y]===0;Y--);if(ie>Y&&(ie=Y),Y===0)return _[T++]=1<<24|64<<16|0,_[T++]=1<<24|64<<16|0,O.bits=1,0;for(V=1;V<Y&&xe[V]===0;V++);for(ie<V&&(ie=V),ae=1,B=1;B<=n;B++)if(ae<<=1,ae-=xe[B],ae<0)return-1;if(ae>0&&(v===c||Y!==1))return-1;for(Ge[1]=0,B=1;B<n;B++)Ge[B+1]=Ge[B]+xe[B];for($=0;$<I;$++)m[D+$]!==0&&(N[Ge[m[D+$]]++]=$);if(v===c?(Te=Je=N,We=19):v===d?(Te=b,rt-=257,Je=y,Ie-=257,We=256):(Te=C,Je=w,We=-1),pe=0,$=0,B=V,Ee=T,se=ie,fe=0,ce=-1,ee=1<<ie,Ne=ee-1,v===d&&ee>a||v===p&&ee>u)return 1;for(;;){ze=B-fe,N[$]<We?(Le=0,Ue=N[$]):N[$]>We?(Le=Je[Ie+N[$]],Ue=Te[rt+N[$]]):(Le=96,Ue=0),Ce=1<<B-fe,ue=1<<se,V=ue;do ue-=Ce,_[Ee+(pe>>fe)+ue]=ze<<24|Le<<16|Ue|0;while(ue!==0);for(Ce=1<<B-1;pe&Ce;)Ce>>=1;if(Ce!==0?(pe&=Ce-1,pe+=Ce):pe=0,$++,--xe[B]===0){if(B===Y)break;B=m[D+N[$]]}if(B>ie&&(pe&Ne)!==ce){for(fe===0&&(fe=ie),Ee+=V,se=B-fe,ae=1<<se;se+fe<Y&&(ae-=xe[se+fe],!(ae<=0));)se++,ae<<=1;if(ee+=1<<se,v===d&&ee>a||v===p&&ee>u)return 1;ce=pe&Ne,_[ce]=ie<<24|se<<16|Ee-T|0}}return pe!==0&&(_[Ee+pe]=B-fe<<24|64<<16|0),O.bits=ie,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var s=t("../utils/common"),n=4,a=0,u=1,c=2;function d(S){for(var te=S.length;--te>=0;)S[te]=0}var p=0,b=1,y=2,C=3,w=258,f=29,v=256,m=v+1+f,D=30,I=19,_=2*m+1,T=15,N=16,O=7,R=256,B=16,$=17,V=18,Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ie=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=512,ee=new Array((m+2)*2);d(ee);var pe=new Array(D*2);d(pe);var Ce=new Array(ae);d(Ce);var ue=new Array(w-C+1);d(ue);var ce=new Array(f);d(ce);var Ne=new Array(D);d(Ne);function Ee(S,te,ne,ye,z){this.static_tree=S,this.extra_bits=te,this.extra_base=ne,this.elems=ye,this.max_length=z,this.has_stree=S&&S.length}var Te,rt,We;function xe(S,te){this.dyn_tree=S,this.max_code=0,this.stat_desc=te}function Ge(S){return S<256?Ce[S]:Ce[256+(S>>>7)]}function Je(S,te){S.pending_buf[S.pending++]=te&255,S.pending_buf[S.pending++]=te>>>8&255}function Ie(S,te,ne){S.bi_valid>N-ne?(S.bi_buf|=te<<S.bi_valid&65535,Je(S,S.bi_buf),S.bi_buf=te>>N-S.bi_valid,S.bi_valid+=ne-N):(S.bi_buf|=te<<S.bi_valid&65535,S.bi_valid+=ne)}function ze(S,te,ne){Ie(S,ne[te*2],ne[te*2+1])}function Le(S,te){var ne=0;do ne|=S&1,S>>>=1,ne<<=1;while(--te>0);return ne>>>1}function Ue(S){S.bi_valid===16?(Je(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):S.bi_valid>=8&&(S.pending_buf[S.pending++]=S.bi_buf&255,S.bi_buf>>=8,S.bi_valid-=8)}function Ke(S,te){var ne=te.dyn_tree,ye=te.max_code,z=te.stat_desc.static_tree,g=te.stat_desc.has_stree,l=te.stat_desc.extra_bits,x=te.stat_desc.extra_base,M=te.stat_desc.max_length,h,q,G,E,L,X,be=0;for(E=0;E<=T;E++)S.bl_count[E]=0;for(ne[S.heap[S.heap_max]*2+1]=0,h=S.heap_max+1;h<_;h++)q=S.heap[h],E=ne[ne[q*2+1]*2+1]+1,E>M&&(E=M,be++),ne[q*2+1]=E,!(q>ye)&&(S.bl_count[E]++,L=0,q>=x&&(L=l[q-x]),X=ne[q*2],S.opt_len+=X*(E+L),g&&(S.static_len+=X*(z[q*2+1]+L)));if(be!==0){do{for(E=M-1;S.bl_count[E]===0;)E--;S.bl_count[E]--,S.bl_count[E+1]+=2,S.bl_count[M]--,be-=2}while(be>0);for(E=M;E!==0;E--)for(q=S.bl_count[E];q!==0;)G=S.heap[--h],!(G>ye)&&(ne[G*2+1]!==E&&(S.opt_len+=(E-ne[G*2+1])*ne[G*2],ne[G*2+1]=E),q--)}}function He(S,te,ne){var ye=new Array(T+1),z=0,g,l;for(g=1;g<=T;g++)ye[g]=z=z+ne[g-1]<<1;for(l=0;l<=te;l++){var x=S[l*2+1];x!==0&&(S[l*2]=Le(ye[x]++,x))}}function je(){var S,te,ne,ye,z,g=new Array(T+1);for(ne=0,ye=0;ye<f-1;ye++)for(ce[ye]=ne,S=0;S<1<<Y[ye];S++)ue[ne++]=ye;for(ue[ne-1]=ye,z=0,ye=0;ye<16;ye++)for(Ne[ye]=z,S=0;S<1<<ie[ye];S++)Ce[z++]=ye;for(z>>=7;ye<D;ye++)for(Ne[ye]=z<<7,S=0;S<1<<ie[ye]-7;S++)Ce[256+z++]=ye;for(te=0;te<=T;te++)g[te]=0;for(S=0;S<=143;)ee[S*2+1]=8,S++,g[8]++;for(;S<=255;)ee[S*2+1]=9,S++,g[9]++;for(;S<=279;)ee[S*2+1]=7,S++,g[7]++;for(;S<=287;)ee[S*2+1]=8,S++,g[8]++;for(He(ee,m+1,g),S=0;S<D;S++)pe[S*2+1]=5,pe[S*2]=Le(S,5);Te=new Ee(ee,Y,v+1,m,T),rt=new Ee(pe,ie,0,D,T),We=new Ee(new Array(0),se,0,I,O)}function st(S){var te;for(te=0;te<m;te++)S.dyn_ltree[te*2]=0;for(te=0;te<D;te++)S.dyn_dtree[te*2]=0;for(te=0;te<I;te++)S.bl_tree[te*2]=0;S.dyn_ltree[R*2]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function U(S){S.bi_valid>8?Je(S,S.bi_buf):S.bi_valid>0&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function P(S,te,ne,ye){U(S),Je(S,ne),Je(S,~ne),s.arraySet(S.pending_buf,S.window,te,ne,S.pending),S.pending+=ne}function W(S,te,ne,ye){var z=te*2,g=ne*2;return S[z]<S[g]||S[z]===S[g]&&ye[te]<=ye[ne]}function J(S,te,ne){for(var ye=S.heap[ne],z=ne<<1;z<=S.heap_len&&(z<S.heap_len&&W(te,S.heap[z+1],S.heap[z],S.depth)&&z++,!W(te,ye,S.heap[z],S.depth));)S.heap[ne]=S.heap[z],ne=z,z<<=1;S.heap[ne]=ye}function Q(S,te,ne){var ye,z,g=0,l,x;if(S.last_lit!==0)do ye=S.pending_buf[S.d_buf+g*2]<<8|S.pending_buf[S.d_buf+g*2+1],z=S.pending_buf[S.l_buf+g],g++,ye===0?ze(S,z,te):(l=ue[z],ze(S,l+v+1,te),x=Y[l],x!==0&&(z-=ce[l],Ie(S,z,x)),ye--,l=Ge(ye),ze(S,l,ne),x=ie[l],x!==0&&(ye-=Ne[l],Ie(S,ye,x)));while(g<S.last_lit);ze(S,R,te)}function de(S,te){var ne=te.dyn_tree,ye=te.stat_desc.static_tree,z=te.stat_desc.has_stree,g=te.stat_desc.elems,l,x,M=-1,h;for(S.heap_len=0,S.heap_max=_,l=0;l<g;l++)ne[l*2]!==0?(S.heap[++S.heap_len]=M=l,S.depth[l]=0):ne[l*2+1]=0;for(;S.heap_len<2;)h=S.heap[++S.heap_len]=M<2?++M:0,ne[h*2]=1,S.depth[h]=0,S.opt_len--,z&&(S.static_len-=ye[h*2+1]);for(te.max_code=M,l=S.heap_len>>1;l>=1;l--)J(S,ne,l);h=g;do l=S.heap[1],S.heap[1]=S.heap[S.heap_len--],J(S,ne,1),x=S.heap[1],S.heap[--S.heap_max]=l,S.heap[--S.heap_max]=x,ne[h*2]=ne[l*2]+ne[x*2],S.depth[h]=(S.depth[l]>=S.depth[x]?S.depth[l]:S.depth[x])+1,ne[l*2+1]=ne[x*2+1]=h,S.heap[1]=h++,J(S,ne,1);while(S.heap_len>=2);S.heap[--S.heap_max]=S.heap[1],Ke(S,te),He(ne,M,S.bl_count)}function Ae(S,te,ne){var ye,z=-1,g,l=te[1],x=0,M=7,h=4;for(l===0&&(M=138,h=3),te[(ne+1)*2+1]=65535,ye=0;ye<=ne;ye++)g=l,l=te[(ye+1)*2+1],!(++x<M&&g===l)&&(x<h?S.bl_tree[g*2]+=x:g!==0?(g!==z&&S.bl_tree[g*2]++,S.bl_tree[B*2]++):x<=10?S.bl_tree[$*2]++:S.bl_tree[V*2]++,x=0,z=g,l===0?(M=138,h=3):g===l?(M=6,h=3):(M=7,h=4))}function Se(S,te,ne){var ye,z=-1,g,l=te[1],x=0,M=7,h=4;for(l===0&&(M=138,h=3),ye=0;ye<=ne;ye++)if(g=l,l=te[(ye+1)*2+1],!(++x<M&&g===l)){if(x<h)do ze(S,g,S.bl_tree);while(--x!==0);else g!==0?(g!==z&&(ze(S,g,S.bl_tree),x--),ze(S,B,S.bl_tree),Ie(S,x-3,2)):x<=10?(ze(S,$,S.bl_tree),Ie(S,x-3,3)):(ze(S,V,S.bl_tree),Ie(S,x-11,7));x=0,z=g,l===0?(M=138,h=3):g===l?(M=6,h=3):(M=7,h=4)}}function De(S){var te;for(Ae(S,S.dyn_ltree,S.l_desc.max_code),Ae(S,S.dyn_dtree,S.d_desc.max_code),de(S,S.bl_desc),te=I-1;te>=3&&S.bl_tree[fe[te]*2+1]===0;te--);return S.opt_len+=3*(te+1)+5+5+4,te}function Fe(S,te,ne,ye){var z;for(Ie(S,te-257,5),Ie(S,ne-1,5),Ie(S,ye-4,4),z=0;z<ye;z++)Ie(S,S.bl_tree[fe[z]*2+1],3);Se(S,S.dyn_ltree,te-1),Se(S,S.dyn_dtree,ne-1)}function Be(S){var te=4093624447,ne;for(ne=0;ne<=31;ne++,te>>>=1)if(te&1&&S.dyn_ltree[ne*2]!==0)return a;if(S.dyn_ltree[18]!==0||S.dyn_ltree[20]!==0||S.dyn_ltree[26]!==0)return u;for(ne=32;ne<v;ne++)if(S.dyn_ltree[ne*2]!==0)return u;return a}var Xe=!1;function at(S){Xe||(je(),Xe=!0),S.l_desc=new xe(S.dyn_ltree,Te),S.d_desc=new xe(S.dyn_dtree,rt),S.bl_desc=new xe(S.bl_tree,We),S.bi_buf=0,S.bi_valid=0,st(S)}function et(S,te,ne,ye){Ie(S,(p<<1)+(ye?1:0),3),P(S,te,ne)}function Re(S){Ie(S,b<<1,3),ze(S,R,ee),Ue(S)}function it(S,te,ne,ye){var z,g,l=0;S.level>0?(S.strm.data_type===c&&(S.strm.data_type=Be(S)),de(S,S.l_desc),de(S,S.d_desc),l=De(S),z=S.opt_len+3+7>>>3,g=S.static_len+3+7>>>3,g<=z&&(z=g)):z=g=ne+5,ne+4<=z&&te!==-1?et(S,te,ne,ye):S.strategy===n||g===z?(Ie(S,(b<<1)+(ye?1:0),3),Q(S,ee,pe)):(Ie(S,(y<<1)+(ye?1:0),3),Fe(S,S.l_desc.max_code+1,S.d_desc.max_code+1,l+1),Q(S,S.dyn_ltree,S.dyn_dtree)),st(S),ye&&U(S)}function gt(S,te,ne){return S.pending_buf[S.d_buf+S.last_lit*2]=te>>>8&255,S.pending_buf[S.d_buf+S.last_lit*2+1]=te&255,S.pending_buf[S.l_buf+S.last_lit]=ne&255,S.last_lit++,te===0?S.dyn_ltree[ne*2]++:(S.matches++,te--,S.dyn_ltree[(ue[ne]+v+1)*2]++,S.dyn_dtree[Ge(te)*2]++),S.last_lit===S.lit_bufsize-1}i._tr_init=at,i._tr_stored_block=et,i._tr_flush_block=it,i._tr_tally=gt,i._tr_align=Re},{"../utils/common":41}],53:[function(t,r,i){function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r.exports=s},{}],54:[function(t,r,i){(function(s){(function(n,a){if(n.setImmediate)return;var u=1,c={},d=!1,p=n.document,b;function y(O){typeof O!="function"&&(O=new Function(""+O));for(var R=new Array(arguments.length-1),B=0;B<R.length;B++)R[B]=arguments[B+1];var $={callback:O,args:R};return c[u]=$,b(u),u++}function C(O){delete c[O]}function w(O){var R=O.callback,B=O.args;switch(B.length){case 0:R();break;case 1:R(B[0]);break;case 2:R(B[0],B[1]);break;case 3:R(B[0],B[1],B[2]);break;default:R.apply(a,B);break}}function f(O){if(d)setTimeout(f,0,O);else{var R=c[O];if(R){d=!0;try{w(R)}finally{C(O),d=!1}}}}function v(){b=function(O){process.nextTick(function(){f(O)})}}function m(){if(n.postMessage&&!n.importScripts){var O=!0,R=n.onmessage;return n.onmessage=function(){O=!1},n.postMessage("","*"),n.onmessage=R,O}}function D(){var O="setImmediate$"+Math.random()+"$",R=function(B){B.source===n&&typeof B.data=="string"&&B.data.indexOf(O)===0&&f(+B.data.slice(O.length))};n.addEventListener?n.addEventListener("message",R,!1):n.attachEvent("onmessage",R),b=function(B){n.postMessage(O+B,"*")}}function I(){var O=new MessageChannel;O.port1.onmessage=function(R){var B=R.data;f(B)},b=function(R){O.port2.postMessage(R)}}function _(){var O=p.documentElement;b=function(R){var B=p.createElement("script");B.onreadystatechange=function(){f(R),B.onreadystatechange=null,O.removeChild(B),B=null},O.appendChild(B)}}function T(){b=function(O){setTimeout(f,0,O)}}var N=Object.getPrototypeOf&&Object.getPrototypeOf(n);N=N&&N.setTimeout?N:n,{}.toString.call(n.process)==="[object process]"?v():m()?D():n.MessageChannel?I():p&&"onreadystatechange"in p.createElement("script")?_():T(),N.setImmediate=y,N.clearImmediate=C})(typeof self>"u"?typeof s>"u"?this:s:self)}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Wi)),Wi.exports}var uu=ou();const lu=ur(uu);class hu{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new lu}catch{throw new Error("JSZip lib not loaded")}}open(e,t){return this.zip.loadAsync(e,{base64:t})}openUrl(e,t){return wr(e,"binary").then((function(r){return this.zip.loadAsync(r,{base64:t})}).bind(this))}request(e,t){var r=new Ve,i,s=new jt(e);return t||(t=s.extension),t=="blob"?i=this.getBlob(e):i=this.getText(e),i?i.then((function(n){let a=this.handleResponse(n,t);r.resolve(a)}).bind(this)):r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):yr(t)?r=Lt(e,"text/xml"):t=="xhtml"?r=Lt(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=Lt(e,"text/html"):r=e,r}getBlob(e,t){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return t=t||sr.lookup(i.name),i.async("uint8array").then(function(s){return new Blob([s],{type:t})})}getText(e,t){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return i.async("string").then(function(s){return s})}getBase64(e,t){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return t=t||sr.lookup(i.name),i.async("base64").then(function(s){return"data:"+t+";base64,"+s})}createUrl(e,t){var r=new Ve,i=window.URL||window.webkitURL||window.mozURL,s,n,a=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(a?(n=this.getBase64(e),n&&n.then((function(u){this.urlCache[e]=u,r.resolve(u)}).bind(this))):(n=this.getBlob(e),n&&n.then((function(u){s=i.createObjectURL(u),this.urlCache[e]=s,r.resolve(s)}).bind(this))),n||r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}}class aa{constructor(e,t,r){this.urlCache={},this.storage=void 0,this.name=e,this.requester=t||wr,this.resolver=r,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof $e>"u"&&(e=$e),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(e,t){let r=e.resources.map(i=>{let{href:s}=i,n=this.resolver(s),a=window.encodeURIComponent(n);return this.storage.getItem(a).then(u=>!u||t?this.requester(n,"binary").then(c=>this.storage.setItem(a,c)):u)});return Promise.all(r)}put(e,t,r){let i=window.encodeURIComponent(e);return this.storage.getItem(i).then(s=>s||this.requester(e,"binary",t,r).then(n=>this.storage.setItem(i,n)))}request(e,t,r,i){return this.online?this.requester(e,t,r,i).then(s=>(this.put(e),s)):this.retrieve(e,t)}retrieve(e,t){new Ve;var r,i=new jt(e);return t||(t=i.extension),t=="blob"?r=this.getBlob(e):r=this.getText(e),r.then(s=>{var n=new Ve,a;return s?(a=this.handleResponse(s,t),n.resolve(a)):n.reject({message:"File not found in storage: "+e,stack:new Error().stack}),n.promise})}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):yr(t)?r=Lt(e,"text/xml"):t=="xhtml"?r=Lt(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=Lt(e,"text/html"):r=e,r}getBlob(e,t){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(i){if(i)return t=t||sr.lookup(e),new Blob([i],{type:t})})}getText(e,t){let r=window.encodeURIComponent(e);return t=t||sr.lookup(e),this.storage.getItem(r).then(function(i){var s=new Ve,n=new FileReader,a;if(i)return a=new Blob([i],{type:t}),n.addEventListener("loadend",()=>{s.resolve(n.result)}),n.readAsText(a,t),s.promise})}getBase64(e,t){let r=window.encodeURIComponent(e);return t=t||sr.lookup(e),this.storage.getItem(r).then(i=>{var s=new Ve,n=new FileReader,a;if(i)return a=new Blob([i],{type:t}),n.addEventListener("loadend",()=>{s.resolve(n.result)}),n.readAsDataURL(a,t),s.promise})}createUrl(e,t){var r=new Ve,i=window.URL||window.webkitURL||window.mozURL,s,n,a=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(a?(n=this.getBase64(e),n&&n.then((function(u){this.urlCache[e]=u,r.resolve(u)}).bind(this))):(n=this.getBlob(e),n&&n.then((function(u){s=i.createObjectURL(u),this.urlCache[e]=s,r.resolve(s)}).bind(this))),n||r.reject({message:"File not found in storage: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}Ft(aa.prototype);class Hi{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const t=nt(e,"display_options");return t?(qt(t,"option").forEach(i=>{let s="";switch(i.childNodes.length&&(s=i.childNodes[0].nodeValue),i.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const ws="META-INF/container.xml",cu="META-INF/com.apple.ibooks.display-options.xml",kt={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class pn{constructor(e,t){typeof t>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(t=e,e=void 0),this.settings=yt(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),yt(this.settings,t),this.opening=new Ve,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new Ve,spine:new Ve,metadata:new Ve,cover:new Ve,navigation:new Ve,pageList:new Ve,resources:new Ve,displayOptions:new Ve},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||wr,this.spine=new So,this.locations=new Js(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(r=>{var i=new Error("Cannot load book at "+e);this.emit(we.BOOK.OPEN_FAILED,i)})}open(e,t){var r,i=t||this.determineType(e);return i===kt.BINARY?(this.archived=!0,this.url=new Nt("/",""),r=this.openEpub(e)):i===kt.BASE64?(this.archived=!0,this.url=new Nt("/",""),r=this.openEpub(e,i)):i===kt.EPUB?(this.archived=!0,this.url=new Nt("/",""),r=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):i==kt.OPF?(this.url=new Nt(e),r=this.openPackaging(this.url.Path.toString())):i==kt.MANIFEST?(this.url=new Nt(e),r=this.openManifest(this.url.Path.toString())):(this.url=new Nt(e),r=this.openContainer(ws).then(this.openPackaging.bind(this))),r}openEpub(e,t){return this.unarchive(e,t||this.settings.encoding).then(()=>this.openContainer(ws)).then(r=>this.openPackaging(r))}openContainer(e){return this.load(e).then(t=>(this.container=new To(t),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new jt(e),this.load(e).then(t=>(this.packaging=new Jn(t),this.unpack(this.packaging)))}openManifest(e){return this.path=new jt(e),this.load(e).then(t=>(this.packaging=new Jn,this.packaging.load(t),this.unpack(this.packaging)))}load(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,t){if(e){var r=e,i=e.indexOf("://")>-1;return i?e:(this.path&&(r=this.path.resolve(e)),t!=!1&&this.url&&(r=this.url.resolve(r)),r)}}canonical(e){var t=e;return e?(this.settings.canonical?t=this.settings.canonical(e):t=this.resolve(e,!0),t):""}determineType(e){var t,r,i;if(this.settings.encoding==="base64")return kt.BASE64;if(typeof e!="string")return kt.BINARY;if(t=new Nt(e),r=t.path(),i=r.extension,i&&(i=i.replace(/\?.*$/,"")),!i)return kt.DIRECTORY;if(i==="epub")return kt.EPUB;if(i==="opf")return kt.OPF;if(i==="json")return kt.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(cu)).then(t=>{this.displayOptions=new Hi(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new Hi,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new Hi,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new Io(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let t=e.navPath||e.ncxPath,r=e.toc;return r?new Promise((i,s)=>{this.navigation=new Ci(r),e.pageList&&(this.pageList=new Si(e.pageList)),i(this.navigation)}):t?this.load(t,"xml").then(i=>(this.navigation=new Ci(i),this.pageList=new Si(i),this.navigation)):new Promise((i,s)=>{this.navigation=new Ci,this.pageList=new Si,i(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,t){return this.rendition=new dn(this,t),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,t){return this.archive=new hu,this.archive.open(e,t)}store(e){let t=this.settings.replacements&&this.settings.replacements!=="none",r=this.url,i=this.settings.requestMethod||wr.bind(this);return this.storage=new aa(e,i,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(n,a)=>{a.output=this.resources.substitute(n,a.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Nt("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=r,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,t)=>{t.output=this.resources.substitute(e,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var t=new Ze(e),r=this.spine.get(t.spinePos),i=this.load.bind(this);return r?r.load(i).then(function(s){var n=t.toRange(r.document);return n}):new Promise((s,n)=>{n("CFI could not be found")})}key(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${Gr}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}Ft(pn.prototype);function Mt(o,e){return new pn(o,e)}Mt.VERSION=Gr;typeof global<"u"&&(global.EPUBJS_VERSION=Gr);Mt.Book=pn;Mt.Rendition=dn;Mt.Contents=cn;Mt.CFI=Ze;Mt.utils=wo;const mt=[];for(let o=0;o<256;++o)mt.push((o+256).toString(16).slice(1));function fu(o,e=0){return(mt[o[e+0]]+mt[o[e+1]]+mt[o[e+2]]+mt[o[e+3]]+"-"+mt[o[e+4]]+mt[o[e+5]]+"-"+mt[o[e+6]]+mt[o[e+7]]+"-"+mt[o[e+8]]+mt[o[e+9]]+"-"+mt[o[e+10]]+mt[o[e+11]]+mt[o[e+12]]+mt[o[e+13]]+mt[o[e+14]]+mt[o[e+15]]).toLowerCase()}let Vi;const du=new Uint8Array(16);function pu(){if(!Vi){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Vi=crypto.getRandomValues.bind(crypto)}return Vi(du)}const gu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bs={randomUUID:gu};function vr(o,e,t){var i;if(bs.randomUUID&&!o)return bs.randomUUID();o=o||{};const r=o.random??((i=o.rng)==null?void 0:i.call(o))??pu();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,fu(r)}function oa(o,e){return function(){return o.apply(e,arguments)}}const{toString:vu}=Object.prototype,{getPrototypeOf:gn}=Object,{iterator:Xr,toStringTag:ua}=Symbol,$r=(o=>e=>{const t=vu.call(e);return o[t]||(o[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ot=o=>(o=o.toLowerCase(),e=>$r(e)===o),Yr=o=>e=>typeof e===o,{isArray:lr}=Array,or=Yr("undefined");function br(o){return o!==null&&!or(o)&&o.constructor!==null&&!or(o.constructor)&&_t(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const la=Ot("ArrayBuffer");function mu(o){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(o):e=o&&o.buffer&&la(o.buffer),e}const yu=Yr("string"),_t=Yr("function"),ha=Yr("number"),_r=o=>o!==null&&typeof o=="object",wu=o=>o===!0||o===!1,Or=o=>{if($r(o)!=="object")return!1;const e=gn(o);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ua in o)&&!(Xr in o)},bu=o=>{if(!_r(o)||br(o))return!1;try{return Object.keys(o).length===0&&Object.getPrototypeOf(o)===Object.prototype}catch{return!1}},_u=Ot("Date"),Eu=Ot("File"),xu=Ot("Blob"),Au=Ot("FileList"),Du=o=>_r(o)&&_t(o.pipe),Cu=o=>{let e;return o&&(typeof FormData=="function"&&o instanceof FormData||_t(o.append)&&((e=$r(o))==="formdata"||e==="object"&&_t(o.toString)&&o.toString()==="[object FormData]"))},Su=Ot("URLSearchParams"),[Tu,ku,Ru,Nu]=["ReadableStream","Request","Response","Headers"].map(Ot),Iu=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Er(o,e,{allOwnKeys:t=!1}={}){if(o===null||typeof o>"u")return;let r,i;if(typeof o!="object"&&(o=[o]),lr(o))for(r=0,i=o.length;r<i;r++)e.call(null,o[r],r,o);else{if(br(o))return;const s=t?Object.getOwnPropertyNames(o):Object.keys(o),n=s.length;let a;for(r=0;r<n;r++)a=s[r],e.call(null,o[a],a,o)}}function ca(o,e){if(br(o))return null;e=e.toLowerCase();const t=Object.keys(o);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Gt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fa=o=>!or(o)&&o!==Gt;function tn(){const{caseless:o,skipUndefined:e}=fa(this)&&this||{},t={},r=(i,s)=>{const n=o&&ca(t,s)||s;Or(t[n])&&Or(i)?t[n]=tn(t[n],i):Or(i)?t[n]=tn({},i):lr(i)?t[n]=i.slice():(!e||!or(i))&&(t[n]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Er(arguments[i],r);return t}const Ou=(o,e,t,{allOwnKeys:r}={})=>(Er(e,(i,s)=>{t&&_t(i)?Object.defineProperty(o,s,{value:oa(i,t),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(o,s,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),o),Bu=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),Lu=(o,e,t,r)=>{o.prototype=Object.create(e.prototype,r),Object.defineProperty(o.prototype,"constructor",{value:o,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(o,"super",{value:e.prototype}),t&&Object.assign(o.prototype,t)},Fu=(o,e,t,r)=>{let i,s,n;const a={};if(e=e||{},o==null)return e;do{for(i=Object.getOwnPropertyNames(o),s=i.length;s-- >0;)n=i[s],(!r||r(n,o,e))&&!a[n]&&(e[n]=o[n],a[n]=!0);o=t!==!1&&gn(o)}while(o&&(!t||t(o,e))&&o!==Object.prototype);return e},Pu=(o,e,t)=>{o=String(o),(t===void 0||t>o.length)&&(t=o.length),t-=e.length;const r=o.indexOf(e,t);return r!==-1&&r===t},zu=o=>{if(!o)return null;if(lr(o))return o;let e=o.length;if(!ha(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=o[e];return t},Uu=(o=>e=>o&&e instanceof o)(typeof Uint8Array<"u"&&gn(Uint8Array)),Mu=(o,e)=>{const r=(o&&o[Xr]).call(o);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(o,s[0],s[1])}},qu=(o,e)=>{let t;const r=[];for(;(t=o.exec(e))!==null;)r.push(t);return r},ju=Ot("HTMLFormElement"),Wu=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),_s=(({hasOwnProperty:o})=>(e,t)=>o.call(e,t))(Object.prototype),Hu=Ot("RegExp"),da=(o,e)=>{const t=Object.getOwnPropertyDescriptors(o),r={};Er(t,(i,s)=>{let n;(n=e(i,s,o))!==!1&&(r[s]=n||i)}),Object.defineProperties(o,r)},Vu=o=>{da(o,(e,t)=>{if(_t(o)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=o[t];if(_t(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Zu=(o,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return lr(o)?r(o):r(String(o).split(e)),t},Gu=()=>{},Xu=(o,e)=>o!=null&&Number.isFinite(o=+o)?o:e;function $u(o){return!!(o&&_t(o.append)&&o[ua]==="FormData"&&o[Xr])}const Yu=o=>{const e=new Array(10),t=(r,i)=>{if(_r(r)){if(e.indexOf(r)>=0)return;if(br(r))return r;if(!("toJSON"in r)){e[i]=r;const s=lr(r)?[]:{};return Er(r,(n,a)=>{const u=t(n,i+1);!or(u)&&(s[a]=u)}),e[i]=void 0,s}}return r};return t(o,0)},Ku=Ot("AsyncFunction"),Ju=o=>o&&(_r(o)||_t(o))&&_t(o.then)&&_t(o.catch),pa=((o,e)=>o?setImmediate:e?((t,r)=>(Gt.addEventListener("message",({source:i,data:s})=>{i===Gt&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Gt.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",_t(Gt.postMessage)),Qu=typeof queueMicrotask<"u"?queueMicrotask.bind(Gt):typeof process<"u"&&process.nextTick||pa,el=o=>o!=null&&_t(o[Xr]),K={isArray:lr,isArrayBuffer:la,isBuffer:br,isFormData:Cu,isArrayBufferView:mu,isString:yu,isNumber:ha,isBoolean:wu,isObject:_r,isPlainObject:Or,isEmptyObject:bu,isReadableStream:Tu,isRequest:ku,isResponse:Ru,isHeaders:Nu,isUndefined:or,isDate:_u,isFile:Eu,isBlob:xu,isRegExp:Hu,isFunction:_t,isStream:Du,isURLSearchParams:Su,isTypedArray:Uu,isFileList:Au,forEach:Er,merge:tn,extend:Ou,trim:Iu,stripBOM:Bu,inherits:Lu,toFlatObject:Fu,kindOf:$r,kindOfTest:Ot,endsWith:Pu,toArray:zu,forEachEntry:Mu,matchAll:qu,isHTMLForm:ju,hasOwnProperty:_s,hasOwnProp:_s,reduceDescriptors:da,freezeMethods:Vu,toObjectSet:Zu,toCamelCase:Wu,noop:Gu,toFiniteNumber:Xu,findKey:ca,global:Gt,isContextDefined:fa,isSpecCompliantForm:$u,toJSONObject:Yu,isAsyncFn:Ku,isThenable:Ju,setImmediate:pa,asap:Qu,isIterable:el};let ke=class ga extends Error{static from(e,t,r,i,s,n){const a=new ga(e.message,t||e.code,r,i,s);return a.cause=e,a.name=e.name,n&&Object.assign(a,n),a}constructor(e,t,r,i,s){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.status}}};ke.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ke.ERR_BAD_OPTION="ERR_BAD_OPTION";ke.ECONNABORTED="ECONNABORTED";ke.ETIMEDOUT="ETIMEDOUT";ke.ERR_NETWORK="ERR_NETWORK";ke.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ke.ERR_DEPRECATED="ERR_DEPRECATED";ke.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ke.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ke.ERR_CANCELED="ERR_CANCELED";ke.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ke.ERR_INVALID_URL="ERR_INVALID_URL";const tl=null;function rn(o){return K.isPlainObject(o)||K.isArray(o)}function va(o){return K.endsWith(o,"[]")?o.slice(0,-2):o}function Es(o,e,t){return o?o.concat(e).map(function(i,s){return i=va(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function rl(o){return K.isArray(o)&&!o.some(rn)}const il=K.toFlatObject(K,{},null,function(e){return/^is[A-Z]/.test(e)});function Kr(o,e,t){if(!K.isObject(o))throw new TypeError("target must be an object");e=e||new FormData,t=K.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,f){return!K.isUndefined(f[w])});const r=t.metaTokens,i=t.visitor||d,s=t.dots,n=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(e);if(!K.isFunction(i))throw new TypeError("visitor must be a function");function c(C){if(C===null)return"";if(K.isDate(C))return C.toISOString();if(K.isBoolean(C))return C.toString();if(!u&&K.isBlob(C))throw new ke("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(C)||K.isTypedArray(C)?u&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function d(C,w,f){let v=C;if(C&&!f&&typeof C=="object"){if(K.endsWith(w,"{}"))w=r?w:w.slice(0,-2),C=JSON.stringify(C);else if(K.isArray(C)&&rl(C)||(K.isFileList(C)||K.endsWith(w,"[]"))&&(v=K.toArray(C)))return w=va(w),v.forEach(function(D,I){!(K.isUndefined(D)||D===null)&&e.append(n===!0?Es([w],I,s):n===null?w:w+"[]",c(D))}),!1}return rn(C)?!0:(e.append(Es(f,w,s),c(C)),!1)}const p=[],b=Object.assign(il,{defaultVisitor:d,convertValue:c,isVisitable:rn});function y(C,w){if(!K.isUndefined(C)){if(p.indexOf(C)!==-1)throw Error("Circular reference detected in "+w.join("."));p.push(C),K.forEach(C,function(v,m){(!(K.isUndefined(v)||v===null)&&i.call(e,v,K.isString(m)?m.trim():m,w,b))===!0&&y(v,w?w.concat(m):[m])}),p.pop()}}if(!K.isObject(o))throw new TypeError("data must be an object");return y(o),e}function xs(o){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function vn(o,e){this._pairs=[],o&&Kr(o,this,e)}const ma=vn.prototype;ma.append=function(e,t){this._pairs.push([e,t])};ma.toString=function(e){const t=e?function(r){return e.call(this,r,xs)}:xs;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function nl(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ya(o,e,t){if(!e)return o;const r=t&&t.encode||nl,i=K.isFunction(t)?{serialize:t}:t,s=i&&i.serialize;let n;if(s?n=s(e,i):n=K.isURLSearchParams(e)?e.toString():new vn(e,i).toString(r),n){const a=o.indexOf("#");a!==-1&&(o=o.slice(0,a)),o+=(o.indexOf("?")===-1?"?":"&")+n}return o}class As{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){K.forEach(this.handlers,function(r){r!==null&&e(r)})}}const wa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sl=typeof URLSearchParams<"u"?URLSearchParams:vn,al=typeof FormData<"u"?FormData:null,ol=typeof Blob<"u"?Blob:null,ul={isBrowser:!0,classes:{URLSearchParams:sl,FormData:al,Blob:ol},protocols:["http","https","file","blob","url","data"]},mn=typeof window<"u"&&typeof document<"u",nn=typeof navigator=="object"&&navigator||void 0,ll=mn&&(!nn||["ReactNative","NativeScript","NS"].indexOf(nn.product)<0),hl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",cl=mn&&window.location.href||"http://localhost",fl=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mn,hasStandardBrowserEnv:ll,hasStandardBrowserWebWorkerEnv:hl,navigator:nn,origin:cl},Symbol.toStringTag,{value:"Module"})),wt={...fl,...ul};function dl(o,e){return Kr(o,new wt.classes.URLSearchParams,{visitor:function(t,r,i,s){return wt.isNode&&K.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function pl(o){return K.matchAll(/\w+|\[(\w*)]/g,o).map(e=>e[0]==="[]"?"":e[1]||e[0])}function gl(o){const e={},t=Object.keys(o);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=o[s];return e}function ba(o){function e(t,r,i,s){let n=t[s++];if(n==="__proto__")return!0;const a=Number.isFinite(+n),u=s>=t.length;return n=!n&&K.isArray(i)?i.length:n,u?(K.hasOwnProp(i,n)?i[n]=[i[n],r]:i[n]=r,!a):((!i[n]||!K.isObject(i[n]))&&(i[n]=[]),e(t,r,i[n],s)&&K.isArray(i[n])&&(i[n]=gl(i[n])),!a)}if(K.isFormData(o)&&K.isFunction(o.entries)){const t={};return K.forEachEntry(o,(r,i)=>{e(pl(r),i,t,0)}),t}return null}function vl(o,e,t){if(K.isString(o))try{return(e||JSON.parse)(o),K.trim(o)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(o)}const xr={transitional:wa,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=K.isObject(e);if(s&&K.isHTMLForm(e)&&(e=new FormData(e)),K.isFormData(e))return i?JSON.stringify(ba(e)):e;if(K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e)||K.isReadableStream(e))return e;if(K.isArrayBufferView(e))return e.buffer;if(K.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return dl(e,this.formSerializer).toString();if((a=K.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Kr(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),vl(e)):e}],transformResponse:[function(e){const t=this.transitional||xr.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(K.isResponse(e)||K.isReadableStream(e))return e;if(e&&K.isString(e)&&(r&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(n)throw a.name==="SyntaxError"?ke.from(a,ke.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wt.classes.FormData,Blob:wt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],o=>{xr.headers[o]={}});const ml=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yl=o=>{const e={};let t,r,i;return o&&o.split(`
`).forEach(function(n){i=n.indexOf(":"),t=n.substring(0,i).trim().toLowerCase(),r=n.substring(i+1).trim(),!(!t||e[t]&&ml[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Ds=Symbol("internals");function mr(o){return o&&String(o).trim().toLowerCase()}function Br(o){return o===!1||o==null?o:K.isArray(o)?o.map(Br):String(o)}function wl(o){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(o);)e[r[1]]=r[2];return e}const bl=o=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(o.trim());function Zi(o,e,t,r,i){if(K.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!K.isString(e)){if(K.isString(r))return e.indexOf(r)!==-1;if(K.isRegExp(r))return r.test(e)}}function _l(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function El(o,e){const t=K.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(o,r+t,{value:function(i,s,n){return this[r].call(this,e,i,s,n)},configurable:!0})})}let Et=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,u,c){const d=mr(u);if(!d)throw new Error("header name must be a non-empty string");const p=K.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||u]=Br(a))}const n=(a,u)=>K.forEach(a,(c,d)=>s(c,d,u));if(K.isPlainObject(e)||e instanceof this.constructor)n(e,t);else if(K.isString(e)&&(e=e.trim())&&!bl(e))n(yl(e),t);else if(K.isObject(e)&&K.isIterable(e)){let a={},u,c;for(const d of e){if(!K.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(u=a[c])?K.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}n(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=mr(e),e){const r=K.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return wl(i);if(K.isFunction(t))return t.call(this,i,r);if(K.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=mr(e),e){const r=K.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Zi(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(n){if(n=mr(n),n){const a=K.findKey(r,n);a&&(!t||Zi(r,r[a],a,t))&&(delete r[a],i=!0)}}return K.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||Zi(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return K.forEach(this,(i,s)=>{const n=K.findKey(r,s);if(n){t[n]=Br(i),delete t[s];return}const a=e?_l(s):String(s).trim();a!==s&&delete t[s],t[a]=Br(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return K.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&K.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Ds]=this[Ds]={accessors:{}}).accessors,i=this.prototype;function s(n){const a=mr(n);r[a]||(El(i,n),r[a]=!0)}return K.isArray(e)?e.forEach(s):s(e),this}};Et.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.reduceDescriptors(Et.prototype,({value:o},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>o,set(r){this[t]=r}}});K.freezeMethods(Et);function Gi(o,e){const t=this||xr,r=e||t,i=Et.from(r.headers);let s=r.data;return K.forEach(o,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function _a(o){return!!(o&&o.__CANCEL__)}let Ar=class extends ke{constructor(e,t,r){super(e??"canceled",ke.ERR_CANCELED,t,r),this.name="CanceledError",this.__CANCEL__=!0}};function Ea(o,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?o(t):e(new ke("Request failed with status code "+t.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function xl(o){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return e&&e[1]||""}function Al(o,e){o=o||10;const t=new Array(o),r=new Array(o);let i=0,s=0,n;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),d=r[s];n||(n=c),t[i]=u,r[i]=c;let p=s,b=0;for(;p!==i;)b+=t[p++],p=p%o;if(i=(i+1)%o,i===s&&(s=(s+1)%o),c-n<e)return;const y=d&&c-d;return y?Math.round(b*1e3/y):void 0}}function Dl(o,e){let t=0,r=1e3/e,i,s;const n=(c,d=Date.now())=>{t=d,i=null,s&&(clearTimeout(s),s=null),o(...c)};return[(...c)=>{const d=Date.now(),p=d-t;p>=r?n(c,d):(i=c,s||(s=setTimeout(()=>{s=null,n(i)},r-p)))},()=>i&&n(i)]}const Hr=(o,e,t=3)=>{let r=0;const i=Al(50,250);return Dl(s=>{const n=s.loaded,a=s.lengthComputable?s.total:void 0,u=n-r,c=i(u),d=n<=a;r=n;const p={loaded:n,total:a,progress:a?n/a:void 0,bytes:u,rate:c||void 0,estimated:c&&a&&d?(a-n)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};o(p)},t)},Cs=(o,e)=>{const t=o!=null;return[r=>e[0]({lengthComputable:t,total:o,loaded:r}),e[1]]},Ss=o=>(...e)=>K.asap(()=>o(...e)),Cl=wt.hasStandardBrowserEnv?((o,e)=>t=>(t=new URL(t,wt.origin),o.protocol===t.protocol&&o.host===t.host&&(e||o.port===t.port)))(new URL(wt.origin),wt.navigator&&/(msie|trident)/i.test(wt.navigator.userAgent)):()=>!0,Sl=wt.hasStandardBrowserEnv?{write(o,e,t,r,i,s,n){if(typeof document>"u")return;const a=[`${o}=${encodeURIComponent(e)}`];K.isNumber(t)&&a.push(`expires=${new Date(t).toUTCString()}`),K.isString(r)&&a.push(`path=${r}`),K.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),K.isString(n)&&a.push(`SameSite=${n}`),document.cookie=a.join("; ")},read(o){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+o+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(o){this.write(o,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Tl(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function kl(o,e){return e?o.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):o}function xa(o,e,t){let r=!Tl(e);return o&&(r||t==!1)?kl(o,e):e}const Ts=o=>o instanceof Et?{...o}:o;function $t(o,e){e=e||{};const t={};function r(c,d,p,b){return K.isPlainObject(c)&&K.isPlainObject(d)?K.merge.call({caseless:b},c,d):K.isPlainObject(d)?K.merge({},d):K.isArray(d)?d.slice():d}function i(c,d,p,b){if(K.isUndefined(d)){if(!K.isUndefined(c))return r(void 0,c,p,b)}else return r(c,d,p,b)}function s(c,d){if(!K.isUndefined(d))return r(void 0,d)}function n(c,d){if(K.isUndefined(d)){if(!K.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,p){if(p in e)return r(c,d);if(p in o)return r(void 0,c)}const u={url:s,method:s,data:s,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:a,headers:(c,d,p)=>i(Ts(c),Ts(d),p,!0)};return K.forEach(Object.keys({...o,...e}),function(d){const p=u[d]||i,b=p(o[d],e[d],d);K.isUndefined(b)&&p!==a||(t[d]=b)}),t}const Aa=o=>{const e=$t({},o);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:n,auth:a}=e;if(e.headers=n=Et.from(n),e.url=ya(xa(e.baseURL,e.url,e.allowAbsoluteUrls),o.params,o.paramsSerializer),a&&n.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),K.isFormData(t)){if(wt.hasStandardBrowserEnv||wt.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if(K.isFunction(t.getHeaders)){const u=t.getHeaders(),c=["content-type","content-length"];Object.entries(u).forEach(([d,p])=>{c.includes(d.toLowerCase())&&n.set(d,p)})}}if(wt.hasStandardBrowserEnv&&(r&&K.isFunction(r)&&(r=r(e)),r||r!==!1&&Cl(e.url))){const u=i&&s&&Sl.read(s);u&&n.set(i,u)}return e},Rl=typeof XMLHttpRequest<"u",Nl=Rl&&function(o){return new Promise(function(t,r){const i=Aa(o);let s=i.data;const n=Et.from(i.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:c}=i,d,p,b,y,C;function w(){y&&y(),C&&C(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let f=new XMLHttpRequest;f.open(i.method.toUpperCase(),i.url,!0),f.timeout=i.timeout;function v(){if(!f)return;const D=Et.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),_={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:D,config:o,request:f};Ea(function(N){t(N),w()},function(N){r(N),w()},_),f=null}"onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(v)},f.onabort=function(){f&&(r(new ke("Request aborted",ke.ECONNABORTED,o,f)),f=null)},f.onerror=function(I){const _=I&&I.message?I.message:"Network Error",T=new ke(_,ke.ERR_NETWORK,o,f);T.event=I||null,r(T),f=null},f.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const _=i.transitional||wa;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),r(new ke(I,_.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,o,f)),f=null},s===void 0&&n.setContentType(null),"setRequestHeader"in f&&K.forEach(n.toJSON(),function(I,_){f.setRequestHeader(_,I)}),K.isUndefined(i.withCredentials)||(f.withCredentials=!!i.withCredentials),a&&a!=="json"&&(f.responseType=i.responseType),c&&([b,C]=Hr(c,!0),f.addEventListener("progress",b)),u&&f.upload&&([p,y]=Hr(u),f.upload.addEventListener("progress",p),f.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(d=D=>{f&&(r(!D||D.type?new Ar(null,o,f):D),f.abort(),f=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const m=xl(i.url);if(m&&wt.protocols.indexOf(m)===-1){r(new ke("Unsupported protocol "+m+":",ke.ERR_BAD_REQUEST,o));return}f.send(s||null)})},Il=(o,e)=>{const{length:t}=o=o?o.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof ke?d:new Ar(d instanceof Error?d.message:d))}};let n=e&&setTimeout(()=>{n=null,s(new ke(`timeout of ${e}ms exceeded`,ke.ETIMEDOUT))},e);const a=()=>{o&&(n&&clearTimeout(n),n=null,o.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),o=null)};o.forEach(c=>c.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>K.asap(a),u}},Ol=function*(o,e){let t=o.byteLength;if(t<e){yield o;return}let r=0,i;for(;r<t;)i=r+e,yield o.slice(r,i),r=i},Bl=async function*(o,e){for await(const t of Ll(o))yield*Ol(t,e)},Ll=async function*(o){if(o[Symbol.asyncIterator]){yield*o;return}const e=o.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},ks=(o,e,t,r)=>{const i=Bl(o,e);let s=0,n,a=u=>{n||(n=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await i.next();if(c){a(),u.close();return}let p=d.byteLength;if(t){let b=s+=p;t(b)}u.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(u){return a(u),i.return()}},{highWaterMark:2})},Rs=64*1024,{isFunction:Rr}=K,Fl=(({Request:o,Response:e})=>({Request:o,Response:e}))(K.global),{ReadableStream:Ns,TextEncoder:Is}=K.global,Os=(o,...e)=>{try{return!!o(...e)}catch{return!1}},Pl=o=>{o=K.merge.call({skipUndefined:!0},Fl,o);const{fetch:e,Request:t,Response:r}=o,i=e?Rr(e):typeof fetch=="function",s=Rr(t),n=Rr(r);if(!i)return!1;const a=i&&Rr(Ns),u=i&&(typeof Is=="function"?(C=>w=>C.encode(w))(new Is):async C=>new Uint8Array(await new t(C).arrayBuffer())),c=s&&a&&Os(()=>{let C=!1;const w=new t(wt.origin,{body:new Ns,method:"POST",get duplex(){return C=!0,"half"}}).headers.has("Content-Type");return C&&!w}),d=n&&a&&Os(()=>K.isReadableStream(new r("").body)),p={stream:d&&(C=>C.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(C=>{!p[C]&&(p[C]=(w,f)=>{let v=w&&w[C];if(v)return v.call(w);throw new ke(`Response type '${C}' is not supported`,ke.ERR_NOT_SUPPORT,f)})});const b=async C=>{if(C==null)return 0;if(K.isBlob(C))return C.size;if(K.isSpecCompliantForm(C))return(await new t(wt.origin,{method:"POST",body:C}).arrayBuffer()).byteLength;if(K.isArrayBufferView(C)||K.isArrayBuffer(C))return C.byteLength;if(K.isURLSearchParams(C)&&(C=C+""),K.isString(C))return(await u(C)).byteLength},y=async(C,w)=>{const f=K.toFiniteNumber(C.getContentLength());return f??b(w)};return async C=>{let{url:w,method:f,data:v,signal:m,cancelToken:D,timeout:I,onDownloadProgress:_,onUploadProgress:T,responseType:N,headers:O,withCredentials:R="same-origin",fetchOptions:B}=Aa(C),$=e||fetch;N=N?(N+"").toLowerCase():"text";let V=Il([m,D&&D.toAbortSignal()],I),Y=null;const ie=V&&V.unsubscribe&&(()=>{V.unsubscribe()});let se;try{if(T&&c&&f!=="get"&&f!=="head"&&(se=await y(O,v))!==0){let ue=new t(w,{method:"POST",body:v,duplex:"half"}),ce;if(K.isFormData(v)&&(ce=ue.headers.get("content-type"))&&O.setContentType(ce),ue.body){const[Ne,Ee]=Cs(se,Hr(Ss(T)));v=ks(ue.body,Rs,Ne,Ee)}}K.isString(R)||(R=R?"include":"omit");const fe=s&&"credentials"in t.prototype,ae={...B,signal:V,method:f.toUpperCase(),headers:O.normalize().toJSON(),body:v,duplex:"half",credentials:fe?R:void 0};Y=s&&new t(w,ae);let ee=await(s?$(Y,B):$(w,ae));const pe=d&&(N==="stream"||N==="response");if(d&&(_||pe&&ie)){const ue={};["status","statusText","headers"].forEach(Te=>{ue[Te]=ee[Te]});const ce=K.toFiniteNumber(ee.headers.get("content-length")),[Ne,Ee]=_&&Cs(ce,Hr(Ss(_),!0))||[];ee=new r(ks(ee.body,Rs,Ne,()=>{Ee&&Ee(),ie&&ie()}),ue)}N=N||"text";let Ce=await p[K.findKey(p,N)||"text"](ee,C);return!pe&&ie&&ie(),await new Promise((ue,ce)=>{Ea(ue,ce,{data:Ce,headers:Et.from(ee.headers),status:ee.status,statusText:ee.statusText,config:C,request:Y})})}catch(fe){throw ie&&ie(),fe&&fe.name==="TypeError"&&/Load failed|fetch/i.test(fe.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,C,Y),{cause:fe.cause||fe}):ke.from(fe,fe&&fe.code,C,Y)}}},zl=new Map,Da=o=>{let e=o&&o.env||{};const{fetch:t,Request:r,Response:i}=e,s=[r,i,t];let n=s.length,a=n,u,c,d=zl;for(;a--;)u=s[a],c=d.get(u),c===void 0&&d.set(u,c=a?new Map:Pl(e)),d=c;return c};Da();const yn={http:tl,xhr:Nl,fetch:{get:Da}};K.forEach(yn,(o,e)=>{if(o){try{Object.defineProperty(o,"name",{value:e})}catch{}Object.defineProperty(o,"adapterName",{value:e})}});const Bs=o=>`- ${o}`,Ul=o=>K.isFunction(o)||o===null||o===!1;function Ml(o,e){o=K.isArray(o)?o:[o];const{length:t}=o;let r,i;const s={};for(let n=0;n<t;n++){r=o[n];let a;if(i=r,!Ul(r)&&(i=yn[(a=String(r)).toLowerCase()],i===void 0))throw new ke(`Unknown adapter '${a}'`);if(i&&(K.isFunction(i)||(i=i.get(e))))break;s[a||"#"+n]=i}if(!i){const n=Object.entries(s).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?n.length>1?`since :
`+n.map(Bs).join(`
`):" "+Bs(n[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const Ca={getAdapter:Ml,adapters:yn};function Xi(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new Ar(null,o)}function Ls(o){return Xi(o),o.headers=Et.from(o.headers),o.data=Gi.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),Ca.getAdapter(o.adapter||xr.adapter,o)(o).then(function(r){return Xi(o),r.data=Gi.call(o,o.transformResponse,r),r.headers=Et.from(r.headers),r},function(r){return _a(r)||(Xi(o),r&&r.response&&(r.response.data=Gi.call(o,o.transformResponse,r.response),r.response.headers=Et.from(r.response.headers))),Promise.reject(r)})}const Sa="1.13.4",Jr={};["object","boolean","number","function","string","symbol"].forEach((o,e)=>{Jr[o]=function(r){return typeof r===o||"a"+(e<1?"n ":" ")+o}});const Fs={};Jr.transitional=function(e,t,r){function i(s,n){return"[Axios v"+Sa+"] Transitional option '"+s+"'"+n+(r?". "+r:"")}return(s,n,a)=>{if(e===!1)throw new ke(i(n," has been removed"+(t?" in "+t:"")),ke.ERR_DEPRECATED);return t&&!Fs[n]&&(Fs[n]=!0,console.warn(i(n," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,n,a):!0}};Jr.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function ql(o,e,t){if(typeof o!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const r=Object.keys(o);let i=r.length;for(;i-- >0;){const s=r[i],n=e[s];if(n){const a=o[s],u=a===void 0||n(a,s,o);if(u!==!0)throw new ke("option "+s+" must be "+u,ke.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ke("Unknown option "+s,ke.ERR_BAD_OPTION)}}const Lr={assertOptions:ql,validators:Jr},Bt=Lr.validators;let Xt=class{constructor(e){this.defaults=e||{},this.interceptors={request:new As,response:new As}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=$t(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&Lr.assertOptions(r,{silentJSONParsing:Bt.transitional(Bt.boolean),forcedJSONParsing:Bt.transitional(Bt.boolean),clarifyTimeoutError:Bt.transitional(Bt.boolean)},!1),i!=null&&(K.isFunction(i)?t.paramsSerializer={serialize:i}:Lr.assertOptions(i,{encode:Bt.function,serialize:Bt.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Lr.assertOptions(t,{baseUrl:Bt.spelling("baseURL"),withXsrfToken:Bt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=s&&K.merge(s.common,s[t.method]);s&&K.forEach(["delete","get","head","post","put","patch","common"],C=>{delete s[C]}),t.headers=Et.concat(n,s);const a=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(u=u&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let d,p=0,b;if(!u){const C=[Ls.bind(this),void 0];for(C.unshift(...a),C.push(...c),b=C.length,d=Promise.resolve(t);p<b;)d=d.then(C[p++],C[p++]);return d}b=a.length;let y=t;for(;p<b;){const C=a[p++],w=a[p++];try{y=C(y)}catch(f){w.call(this,f);break}}try{d=Ls.call(this,y)}catch(C){return Promise.reject(C)}for(p=0,b=c.length;p<b;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=$t(this.defaults,e);const t=xa(e.baseURL,e.url,e.allowAbsoluteUrls);return ya(t,e.params,e.paramsSerializer)}};K.forEach(["delete","get","head","options"],function(e){Xt.prototype[e]=function(t,r){return this.request($t(r||{},{method:e,url:t,data:(r||{}).data}))}});K.forEach(["post","put","patch"],function(e){function t(r){return function(s,n,a){return this.request($t(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}Xt.prototype[e]=t(),Xt.prototype[e+"Form"]=t(!0)});let jl=class Ta{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const n=new Promise(a=>{r.subscribe(a),s=a}).then(i);return n.cancel=function(){r.unsubscribe(s)},n},e(function(s,n,a){r.reason||(r.reason=new Ar(s,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Ta(function(i){e=i}),cancel:e}}};function Wl(o){return function(t){return o.apply(null,t)}}function Hl(o){return K.isObject(o)&&o.isAxiosError===!0}const sn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(sn).forEach(([o,e])=>{sn[e]=o});function ka(o){const e=new Xt(o),t=oa(Xt.prototype.request,e);return K.extend(t,Xt.prototype,e,{allOwnKeys:!0}),K.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return ka($t(o,i))},t}const dt=ka(xr);dt.Axios=Xt;dt.CanceledError=Ar;dt.CancelToken=jl;dt.isCancel=_a;dt.VERSION=Sa;dt.toFormData=Kr;dt.AxiosError=ke;dt.Cancel=dt.CanceledError;dt.all=function(e){return Promise.all(e)};dt.spread=Wl;dt.isAxiosError=Hl;dt.mergeConfig=$t;dt.AxiosHeaders=Et;dt.formToJSON=o=>ba(K.isHTMLForm(o)?new FormData(o):o);dt.getAdapter=Ca.getAdapter;dt.HttpStatusCode=sn;dt.default=dt;const{Axios:Kl,AxiosError:Jl,CanceledError:Ql,isCancel:eh,CancelToken:th,VERSION:rh,all:ih,Cancel:nh,isAxiosError:sh,spread:ah,toFormData:oh,AxiosHeaders:uh,HttpStatusCode:lh,formToJSON:hh,getAdapter:ch,mergeConfig:fh}=dt,Vl="http://localhost:3000/api",Ut=dt.create({baseURL:Vl,timeout:3e4});Ut.interceptors.response.use(o=>o.data,o=>{throw o.response?console.error("API :",o.response.status,o.response.data):o.request?console.error("API : ",o.message):console.error("API :",o.message),o});const Ht={async getToken(o,e,t,r){return Ut.post("/baidu/token",{code:o,clientId:e,clientSecret:t,redirectUri:r})},async refreshToken(o,e,t){return Ut.post("/baidu/refresh",{refreshToken:o,clientId:e,clientSecret:t})},async verifyToken(o){return Ut.get("/baidu/verify",{params:{accessToken:o}})},async getFileList(o,e,t=1,r=100,i="name",s="list",n=0){return Ut.get("/baidu/files",{params:{accessToken:o,dir:e,pageNum:t,pageSize:r,order:i,method:s,recursion:n}})},async searchFiles(o,e,t,r="search",i=1){return Ut.get("/baidu/search",{params:{accessToken:o,key:e,dir:t,method:r,recursion:i}})},async getFileInfo(o,e){return Ut.get("/baidu/fileinfo",{params:{accessToken:o,fsids:e}})},async downloadFile(o,e){return Ut.get("/baidu/download",{params:{dlink:o,accessToken:e}})},async uploadFile(o,e,t){return Ut.post("/baidu/upload",{fileName:o,fileData:e,accessToken:t})}},$i=()=>typeof window<"u"&&window.electron!==void 0,Rt={async getTokenViaCode(o,e,t,r){return await Ht.getToken(o,e,t,r)},async refreshToken(o,e,t){return await Ht.refreshToken(o,e,t)},async verifyToken(o){return await Ht.verifyToken(o)},async getFileList(o,e="/",t=1,r=100,i="name",s="list",n=0){return await Ht.getFileList(o,e,t,r,i,s,n)},async searchFiles(o,e,t,r="search",i=1){return await Ht.searchFiles(o,e,t,r,i)},async getFileInfo(o,e){return await Ht.getFileInfo(o,e)},async downloadFile(o,e){return await Ht.downloadFile(o,e)},async uploadFile(o,e,t){return await Ht.uploadFile(o,e,t)},async openDirectory(){if(!$i())throw new Error("Electron API ");return window.electron.openDirectory()},async readFile(o){if(!$i())throw new Error("Electron API ");return window.electron.readFile(o)},async selectFile(){if(!$i())throw new Error("Electron API ");return window.electron.openFile([{name:"",extensions:["epub","pdf","txt"]}])}};$e.config({name:"NeatReader",storeName:"ebookStore",description:"Neat Reader"});const dh=Ua("ebook",()=>{const o=Wt([]),e=Wt([]),t=Wt(null),r=Wt(null),i=Wt(null),s=Wt(null),n=Wt({storage:{default:"local",localPath:"",autoSync:!0,syncInterval:15,baidupan:null},reader:{fontSize:18,fontFamily:"system",theme:"light",pageMode:"page",brightness:100,lineSpacing:1.5,lineHeight:1.5,paragraphSpacing:8,autoSaveInterval:10},ui:{viewMode:"grid",language:"zh-CN"}}),a=Wt({id:"device-1",name:"",type:"desktop",platform:"windows",lastSync:Date.now()}),u=fr(()=>o.value.filter(U=>U.storageType==="local")),c=fr(()=>o.value.filter(U=>U.storageType==="baidupan")),d=fr(()=>[...o.value].sort((U,P)=>P.lastRead-U.lastRead).slice(0,10)),p=fr(()=>U=>o.value.filter(P=>P.categoryId===U)),b=fr(()=>U=>e.value.find(P=>P.id===U)||null),y=U=>new Promise(async(P,W)=>{try{const Q=await(await fetch(U)).blob(),de=new FileReader;de.onloadend=()=>P(de.result),de.onerror=W,de.readAsDataURL(Q)}catch(J){W(J)}}),C=async()=>{try{console.log("...");const U=await $e.getItem("books");U?(console.log(":",U.length),o.value=U,await Promise.all(o.value.map(async P=>{if(P.cover&&P.cover.startsWith("blob:")&&(console.log(" blob :",P.id),P.cover=""),P.format==="epub"&&!P.cover)try{console.log(":",P.id);const W=await $e.getItem(`ebook_content_${P.id}`);if(W){const J=Mt(W);await new Promise((de,Ae)=>{J.ready.then(de).catch(Ae)});const Q=await J.coverUrl();if(Q)if(Q.startsWith("blob:"))try{console.log(" Base64"),P.cover=await y(Q),console.log(":",P.id),URL.revokeObjectURL(Q)}catch(de){console.warn(" Base64 :",de)}else P.cover=Q,console.log(":",P.id)}}catch(W){console.warn(":",P.id,W)}}))):(console.log(""),o.value=[])}catch(U){console.error(":",U),U instanceof Error&&(console.error(":",U.message),console.error(":",U.stack)),o.value=[]}},w=async()=>{try{const U=o.value.map(P=>({id:P.id,title:P.title,author:P.author,cover:P.cover||"",path:P.path,format:P.format,size:P.size,lastRead:P.lastRead,totalChapters:P.totalChapters,readingProgress:P.readingProgress,storageType:P.storageType,baidupanPath:P.baidupanPath,categoryId:P.categoryId,addedAt:P.addedAt}));console.log(":",U.length),await $e.setItem("books",U),console.log("")}catch(U){console.error(":",U),U instanceof Error&&(console.error(":",U.message),console.error(":",U.stack))}},f=async()=>{try{const U=await $e.getItem("categories");if(U&&Array.isArray(U)&&U.length>0)console.log(":",U.length),e.value=U.map(P=>({id:P.id||`category_${Date.now()}_${Math.random()}`,name:P.name||"",color:P.color||"#999999",bookIds:Array.isArray(P.bookIds)?[...P.bookIds]:[],createdAt:P.createdAt||Date.now(),updatedAt:P.updatedAt||Date.now()}));else{console.log(""),e.value=[];const P={id:`category_default_${Date.now()}`,name:"",color:"#999999",bookIds:[],createdAt:Date.now(),updatedAt:Date.now()};e.value.push(P),await $e.setItem("categories",[P]),console.log("")}}catch(U){console.error(":",U),e.value=[];const P={id:`category_default_${Date.now()}`,name:"",color:"#999999",bookIds:[],createdAt:Date.now(),updatedAt:Date.now()};e.value.push(P);try{await $e.setItem("categories",[P])}catch(W){console.error(":",W)}}},v=async()=>{try{console.log(":",e.value.length),console.log(":",JSON.stringify(e.value));const U=e.value.map(W=>({id:W.id,name:W.name,color:W.color,bookIds:Array.isArray(W.bookIds)?[...W.bookIds]:[],createdAt:W.createdAt,updatedAt:W.updatedAt}));console.log(":",JSON.stringify(U)),await $e.setItem("categories",U);const P=await $e.getItem("categories");console.log(":",P),P&&Array.isArray(P)&&P.length===U.length?console.log(""):console.error("")}catch(U){throw console.error(":",U),U instanceof Error&&(console.error(":",U.message),console.error(":",U.stack)),U}},m=async(U,P)=>{try{console.log(":",U,P);const W={id:`category_${vr()}`,name:U,color:P,bookIds:[],createdAt:Date.now(),updatedAt:Date.now()};return console.log(":",W),e.value.push(W),console.log(":",e.value.length),console.log("..."),await v(),console.log(":",W.name),W}catch(W){throw console.error(":",W),W instanceof Error&&(console.error(":",W.message),console.error(":",W.stack)),W}},D=async(U,P)=>{try{const W=e.value.findIndex(J=>J.id===U);return W!==-1?(e.value[W]={...e.value[W],...P,updatedAt:Date.now()},await v(),console.log(":",e.value[W].name),!0):!1}catch(W){return console.error(":",W),!1}},I=async U=>{try{const P=e.value.findIndex(W=>W.id===U);if(P!==-1){const W=e.value[P].name,J=e.value.find(Q=>Q.name==="");if(J){for(const Q of e.value[P].bookIds){const de=o.value.findIndex(Ae=>Ae.id===Q);de!==-1&&(o.value[de].categoryId=J.id)}await w()}return e.value.splice(P,1),await v(),console.log(":",W),!0}return!1}catch(P){return console.error(":",P),!1}},_=async(U,P)=>{try{const W=o.value.findIndex(J=>J.id===U);if(W!==-1){if(o.value[W].categoryId){const Q=e.value.findIndex(de=>de.id===o.value[W].categoryId);Q!==-1&&(e.value[Q].bookIds=e.value[Q].bookIds.filter(de=>de!==U),e.value[Q].updatedAt=Date.now())}o.value[W].categoryId=P;const J=e.value.findIndex(Q=>Q.id===P);return J!==-1&&!e.value[J].bookIds.includes(U)&&(e.value[J].bookIds.push(U),e.value[J].updatedAt=Date.now()),await w(),await v(),console.log(":",U,"->",P),!0}return!1}catch(W){return console.error(":",W),!1}},T=async U=>{try{const P=o.value.findIndex(W=>W.id===U);if(P!==-1&&o.value[P].categoryId){const W=o.value[P].categoryId,J=e.value.findIndex(Q=>Q.id===W);return J!==-1&&(e.value[J].bookIds=e.value[J].bookIds.filter(Q=>Q!==U),e.value[J].updatedAt=Date.now()),o.value[P].categoryId=void 0,await w(),await v(),console.log(":",U),!0}return!1}catch(P){return console.error(":",P),!1}},N=async U=>{var P;try{console.log(":",U);const W=o.value.filter(Q=>Q.title.toLowerCase().includes(U.toLowerCase())||Q.author.toLowerCase().includes(U.toLowerCase()));console.log(":",W.length);const J=await ce();if(console.log(":",J),J&&n.value.storage.baidupan){const{accessToken:Q,rootPath:de}=n.value.storage.baidupan,Ae=de||`/apps/${ee}`;console.log(":",Ae);try{const De=await Rt.searchFiles(Q,U,Ae,"search",1);if(console.log(":",De),De.list&&Array.isArray(De.list)&&De.list.length>0)for(const Fe of De.list){if(!Fe.server_filename)continue;const Be=(P=Fe.server_filename.split(".").pop())==null?void 0:P.toLowerCase();if(["epub","pdf","txt"].includes(Be||"")&&!o.value.find(at=>at.baidupanPath===Fe.path)){const at={id:`baidupan_${Fe.fs_id||Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:Fe.server_filename.replace(`.${Be}`,""),author:"",cover:"",path:Fe.path||"",format:Be||"txt",size:Fe.size||0,lastRead:Date.now(),totalChapters:0,readingProgress:0,storageType:"baidupan",baidupanPath:Fe.path||"",addedAt:Date.now()};W.push(at),console.log(":",at.title)}}else console.log("")}catch(Se){console.warn(":",Se)}}else console.log("");return console.log(":",W.length),W}catch(W){return console.error(":",W),[]}},O=async U=>{try{console.log(":",U.title),o.value.push(U),await w(),console.log("")}catch(P){throw console.error(":",P),P instanceof Error&&(console.error(":",P.message),console.error(":",P.stack)),P}},R=async(U,P)=>{const W=o.value.findIndex(J=>J.id===U);W!==-1&&(o.value[W]={...o.value[W],...P},await w())},B=async(U,P)=>{try{const W=o.value.findIndex(Q=>Q.id===U);if(W===-1)return!1;const J=P||o.value[W].storageType;return o.value.splice(W,1),w(),J==="local"&&($e.removeItem(`ebook_content_${U}`),$e.removeItem(`ebook_cover_${U}`)),console.log(""),!0}catch(W){return console.error(":",W),W instanceof Error&&(console.error(":",W.message),console.error(":",W.stack)),!1}},$=U=>o.value.find(P=>P.id===U)||null,V=U=>{t.value=U},Y=async U=>{try{const P=await $e.getItem(`progress_${U}`);return r.value=P||null,P}catch(P){return console.error(":",P),null}},ie=async U=>{try{r.value=U,await $e.setItem(`progress_${U.ebookId}`,U),await R(U.ebookId,{lastRead:U.timestamp,readingProgress:Math.round(U.position*100)})}catch(P){console.error(":",P)}},se=async()=>{try{const U=await $e.getItem("userConfig");U&&(U.storage.baidupan&&U.storage.baidupan.rootPath==="/NeatReader"&&(U.storage.baidupan.rootPath=""),n.value=U);const P=await $e.getItem("baidupanUserInfoCache");if(P){const W=Date.now()-P.timestamp,J=300*1e3;W<J&&(console.log(""),i.value=P.data,s.value=P)}}catch(U){console.error(":",U)}},fe=async()=>{try{const U=JSON.parse(JSON.stringify(n.value));await $e.setItem("userConfig",U),await $e.setItem("userConfigTimestamp",Date.now())}catch(U){console.error(":",U)}},ae=async(U,P=!1)=>{if(n.value={...n.value,...U},await fe(),!P){if(!Te){console.log(" Wails ");return}try{if(await ce()){const W=JSON.stringify({config:n.value,timestamp:Date.now()}),J=new File([W],"config.json",{type:"application/json"});await Te(J,"/sync"),console.log("")}}catch(W){console.warn(":",W)}}},ee="Neat Reader",pe={clientId:"hq9yQ9w9kR4YHj1kyYafLygVocobh7Sf",clientSecret:"YH2VpZcFJHYNnV6vLfHQXDBhcE7ZChyE",redirectUri:"http://localhost:8080/callback"},Ce=async()=>{try{if(!n.value.storage.baidupan)return!1;const{refreshToken:U}=n.value.storage.baidupan;if(!U)return!1;const W=await Rt.refreshToken(U,pe.clientId,pe.clientSecret);return W.error?(console.error(":",W.error),!1):(console.log(":",{access_token:W.access_token?"***":null,refresh_token:W.refresh_token?"***":null,expires_in:W.expires_in}),W.access_token&&n.value.storage.baidupan?(await ae({storage:{...n.value.storage,baidupan:{...n.value.storage.baidupan,accessToken:W.access_token,refreshToken:W.refresh_token,expiration:Date.now()+W.expires_in*1e3,rootPath:n.value.storage.baidupan.rootPath||"",userId:n.value.storage.baidupan.userId||"",namingStrategy:n.value.storage.baidupan.namingStrategy||"1"}}}),!0):!1)}catch(U){return console.error(":",U),!1}},ue=()=>{const U=n.value.storage.baidupan;if(!U)return!1;const{accessToken:P,expiration:W}=U,J=3600*1e3;return!!P&&W-Date.now()>J},ce=async()=>ue()?!0:await Ce(),Ne=async(U=!1)=>{var W;if(!((W=n.value.storage.baidupan)!=null&&W.accessToken)){i.value=null;return}const P=300*1e3;if(!U&&s.value&&Date.now()-s.value.timestamp<P){console.log(""),i.value=s.value.data;return}try{const Q=await Rt.verifyToken(n.value.storage.baidupan.accessToken);if(console.log("verifyToken :",Q),Q.errno===0||!Q.error){const de={baidu_name:Q.baidu_name||Q.netdisk_name||Q.name||"",avatar_url:Q.avatar_url||"",vip_type:Q.vip_type||0};i.value=de;const Ae={data:de,timestamp:Date.now()};s.value=Ae,await $e.setItem("baidupanUserInfoCache",JSON.parse(JSON.stringify(Ae)))}else console.log("verifyToken :",Q),i.value=null,s.value=null,await $e.removeItem("baidupanUserInfoCache")}catch(J){console.error("verifyToken :",J),i.value=null,s.value=null,await $e.removeItem("baidupanUserInfoCache")}},Ee=U=>U>4294967296?(console.error(` ${(4294967296/(1024*1024*1024)).toFixed(1)}GB`),!1):!0,Te=async(U,P)=>{try{if(!await ce()||!n.value.storage.baidupan)return console.error(""),!1;if(!Ee(U.size))return console.error(""),!1;const{accessToken:W}=n.value.storage.baidupan,J=P?P.replace(/^\/+|\/+$/g,""):"",Q=await U.arrayBuffer(),de=Array.from(new Uint8Array(Q)),Se=await Rt.uploadFile(U.name,de,W);return Se.error_code===31061?(console.log(":",U.name),!0):Se.error?(console.error(":",Se.error),!1):Se.path||Se.fs_id?!0:(console.error("ID:",Se),!1)}catch(W){return console.error(":",W),W instanceof Error&&(console.error(":",W.message),console.error(":",W.stack)),!1}},rt=async U=>{try{if(console.log(":",U.title),!await ce())throw console.error(""),new Error("");console.log(" IndexedDB :",`ebook_content_${U.id}`);const P=await $e.getItem(`ebook_content_${U.id}`);if(!P)throw console.error(""),new Error("");console.log(":",P.byteLength);const J=`${(Se=>{let De=Se.replace(/[<>:"|?*\/\\]/g,"").replace(/\s+/g,"_").trim();return De.length>200&&(De=De.substring(0,200)),De})(U.title)}.${U.format}`;console.log(":",J);const Q=new File([P],J,{type:`application/${U.format==="epub"?"epub+zip":U.format}`});console.log(" File :",J,":",Q.type);let de="";if(n.value.storage.baidupan&&(de=n.value.storage.baidupan.rootPath||""),(!de||de==="/")&&(de=""),await Te(Q,de))return console.log(""),await R(U.id,{storageType:"synced",baidupanPath:`${de}/${J}`,cover:U.cover}),console.log(":",U.title),!0;throw console.error("uploadToBaidupan  false"),new Error("")}catch(P){throw console.error(":",P),P instanceof Error?(console.error(":",P.message),console.error(":",P.stack),P):new Error("")}},We=async U=>{try{if(!await ce()||!n.value.storage.baidupan)return null;const{accessToken:P,rootPath:W}=n.value.storage.baidupan,J=U.split("/").filter(et=>et),Q=J.pop()||"",de=J.length>0?`/${J.join("/")}`:W||`/apps/${ee}`;console.log(" - :",de,":",Q);const Se=await Rt.getFileList(P,de,1,1e3,"name","list",1);if(Se.error||!Se.list)return console.log(":",Se),null;if(!Se.list.find(et=>et.server_filename===Q&&!et.isdir))return console.log(":",Q),null;const Fe=await Rt.getFileList(P,de,1,1,"name","download",0),Be=JSON.parse(Fe);if(console.log(":",Be),Be.error||!Be.dlink)return console.error(":",Be),null;const Xe=await fetch(Be.dlink);return Xe.ok?await Xe.blob():(console.error(":",Xe.status),null)}catch(P){return console.error(":",P),null}},xe=async U=>{var P;try{if(!await ce()||!n.value.storage.baidupan)return!1;const{accessToken:W}=n.value.storage.baidupan,J=U.replace(/^.*\//,"").replace(/^\//,"");console.log(" - :",U,":",J);const Q=`/apps/${ee}`;console.log(":",Q);const de=await Rt.getFileList(W,Q,1,1e3,"name","list",1);if(console.log(":",de),de.error_code)return console.error(":",de),!1;if(!de.list||de.list.length===0)return console.error(":",de),!1;const Ae=de.list.find(S=>S.server_filename===J);if(!Ae)return console.error(":",J,":",de.list),!1;const Se=Ae.fs_id;console.log(" fsid:",Se);const De=await Rt.getFileInfo(W,Se.toString());if(console.log(":",De),De.error_code||De.errno)return console.error(":",De),!1;if(!De.info||!Array.isArray(De.info)||De.info.length===0)return console.error(":",JSON.stringify(De,null,2)),!1;const Fe=De.info[0].dlink;if(!Fe)return console.error(":",JSON.stringify(De,null,2)),!1;console.log(" dlink:",Fe);const Be=await Rt.downloadFile(Fe,W);if(console.log(":",Be),!Be.success||!Be.data||Be.data.length===0)return console.error(":",Be.error||""),!1;const Xe=new Uint8Array(Be.data).buffer,at=((P=J.split(".").pop())==null?void 0:P.toLowerCase())||"epub",et=J.replace(`.${at}`,""),Re=o.value.find(S=>S.baidupanPath===U||S.title===et);let it;Re?(it=Re.id,console.log(":",et,"ID:",it)):(it=`downloaded_${vr()}`,console.log(":",et,"ID:",it)),await $e.setItem(`ebook_content_${it}`,Xe);const gt={id:it,title:et,author:"",cover:(Re==null?void 0:Re.cover)||"",path:it,format:at,size:Xe.byteLength,lastRead:Date.now(),totalChapters:0,readingProgress:(Re==null?void 0:Re.readingProgress)||0,storageType:"synced",baidupanPath:U,addedAt:(Re==null?void 0:Re.addedAt)||Date.now()};if(Re?await R(it,gt):await O(gt),at==="epub")try{const S=Mt(Xe);await new Promise((ye,z)=>{S.ready.then(ye).catch(z)});const te=await S.coverUrl();if(te)if(te.startsWith("blob:"))try{gt.cover=await y(te),URL.revokeObjectURL(te)}catch(ye){console.warn(" Base64 :",ye)}else gt.cover=te;const ne=await S.loaded.metadata;ne&&(ne.creator&&(gt.author=Array.isArray(ne.creator)?ne.creator.join(", "):ne.creator),console.log("EPUB :",ne)),await R(it,{cover:gt.cover,author:gt.author})}catch(S){console.warn("EPUB :",S)}return console.log(":",J),!0}catch(W){return console.error(":",W),!1}},Ge=async()=>{var U;try{if(!await ce()||!n.value.storage.baidupan){console.log("");return}const{accessToken:P,rootPath:W}=n.value.storage.baidupan,J=W||`/apps/${ee}`;console.log(":",J);const de=await Rt.getFileList(P,J,1,1e3,"name","list",1);if(de.list&&Array.isArray(de.list)&&de.list.length>0){for(const Ae of de.list){if(Ae.isdir||!Ae.server_filename)continue;const Se=(U=Ae.server_filename.split(".").pop())==null?void 0:U.toLowerCase();if(!["epub","pdf","txt"].includes(Se||""))continue;const De=Ae.server_filename.replace(`.${Se}`,""),Fe=Ae.path||"",Be=Re=>Re.toLowerCase().replace(/[_\s\-]+/g,"").replace(/[^\w\u4e00-\u9fa5]/g,"").trim(),Xe=Be(De);let et=o.value.find(Re=>Re.baidupanPath===Fe);if(et||(et=o.value.find(Re=>Be(Re.title)===Xe&&(Re.storageType==="synced"||Re.storageType==="local"))),!et){const Re={id:`baidupan_${Ae.fs_id||Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:Ae.server_filename.replace(`.${Se}`,""),author:"",cover:"",path:Ae.path||"",format:Se||"txt",size:Ae.size||0,lastRead:Date.now(),totalChapters:0,readingProgress:0,storageType:"baidupan",baidupanPath:Ae.path||"",addedAt:Date.now()};o.value.push(Re),console.log(":",Re.title)}}await w(),console.log(":",o.value.length)}}catch(P){console.error(":",P)}},Je=async U=>{try{if(!await ce()||!n.value.storage.baidupan)return[];const{accessToken:P}=n.value.storage.baidupan,J=await Rt.getFileList(P,U,1,100,"name","list",0);return console.log(":",J),J.error?(console.error(":",J),[]):J.list||[]}catch(P){return console.error(":",P),[]}},Ie=async()=>{try{if(!await ce())return console.error(""),!1;console.log(":",o.value.length);const U={ebooks:o.value,timestamp:Date.now(),deviceId:a.value.id,deviceName:a.value.name},P=new File([JSON.stringify(U)],"books.json",{type:"application/json"});await Te(P,"/sync");const W={categories:e.value,timestamp:Date.now(),deviceId:a.value.id},J=new File([JSON.stringify(W)],"categories.json",{type:"application/json"});await Te(J,"/sync"),console.log("");let Q=0;const de=10;for(let Ae=0;Ae<o.value.length;Ae+=de){const De=o.value.slice(Ae,Ae+de).map(async Fe=>{try{const Be=await $e.getItem(`progress_${Fe.id}`);if(Be){const Xe=new File([JSON.stringify(Be)],`${Fe.id}.json`,{type:"application/json"});await Te(Xe,"/sync/progress"),Q++}}catch(Be){console.error(`: ${Fe.id}`,Be)}});await Promise.all(De)}return console.log(` ${Q} `),!0}catch(U){return console.error(":",U),!1}},ze=U=>{console.log(":",U),(async()=>{try{const P=await $e.getItem(`progress_${U}`);if(P){const W=new File([JSON.stringify(P)],`${U}.json`,{type:"application/json"});await Te(W,"/sync/progress"),console.log(":",U)}}catch(P){console.warn(":",P)}})()},Le=async()=>{var U;try{if(!await ce())return console.error(""),!1;console.log("");const P=await We("/sync/books.json");if(P){const Q=await P.text(),de=JSON.parse(Q);de.ebooks&&(o.value=de.ebooks,await w(),console.log(":",o.value.length))}const W=await We("/sync/categories.json");if(W){const Q=await W.text(),de=JSON.parse(Q);de.categories&&(e.value=de.categories,await v(),console.log(":",e.value.length))}let J=0;for(const Q of o.value)try{const de=await We(`/sync/progress/${Q.id}.json`);if(de){const Ae=await de.text(),Se=JSON.parse(Ae);await $e.setItem(`progress_${Q.id}`,Se),Q.id===((U=r.value)==null?void 0:U.ebookId)&&(r.value=Se),J++}}catch(de){console.error(`: ${Q.id}`,de)}return console.log(` ${J} `),!0}catch(P){return console.error(":",P),!1}},Ue=async U=>{try{console.log(" EPUB :",U.name);const P=`epub_${vr()}`,W=await U.arrayBuffer();console.log(" IndexedDB:",`ebook_content_${P}`),await $e.setItem(`ebook_content_${P}`,W);let J="",Q="",de=U.name.replace(".epub","");try{const Se=Mt(W);await new Promise((Be,Xe)=>{Se.ready.then(Be).catch(Xe)});const De=await Se.loaded.metadata;console.log("EPUB :",De),De.creator&&(Array.isArray(De.creator)?Q=De.creator.join(", "):Q=De.creator),De.title&&(de=De.title);const Fe=await Se.coverUrl();if(console.log(" URL:",Fe),Fe)if(typeof Fe=="string"&&Fe.startsWith("blob:"))try{console.log(" Blob URL  Base64"),J=await y(Fe),console.log("Base64 :",J.length),URL.revokeObjectURL(Fe)}catch(Be){console.warn(" Base64 :",Be),J=""}else J=Fe}catch(Se){console.warn(":",Se)}const Ae={id:P,title:de,author:Q,cover:J,path:P,format:"epub",size:U.size,lastRead:Date.now(),totalChapters:0,readingProgress:0,storageType:"local",addedAt:Date.now()};return console.log(":",{id:Ae.id,title:Ae.title,author:Ae.author,cover:Ae.cover,storageType:Ae.storageType}),await O(Ae),console.log("EPUB "),Ae}catch(P){return console.error(" EPUB :",P),P instanceof Error&&(console.error(":",P.message),console.error(":",P.stack)),null}},Ke=async U=>{try{const P=`pdf_${vr()}`,W=await U.arrayBuffer();await $e.setItem(`ebook_content_${P}`,W);const J={id:P,title:U.name.replace(".pdf",""),author:"",cover:"",path:P,format:"pdf",size:U.size,lastRead:Date.now(),totalChapters:0,readingProgress:0,storageType:"local",addedAt:Date.now()};return await O(J),J}catch(P){return console.error(" PDF :",P),null}},He=async U=>{try{const P=`txt_${vr()}`,W=await U.arrayBuffer();await $e.setItem(`ebook_content_${P}`,W);const J={id:P,title:U.name.replace(".txt",""),author:"",cover:"",path:P,format:"txt",size:U.size,lastRead:Date.now(),totalChapters:1,readingProgress:0,storageType:"local",addedAt:Date.now()};return await O(J),J}catch(P){return console.error(" TXT :",P),null}};return{books:o,categories:e,currentBook:t,readingProgress:r,userConfig:n,deviceInfo:a,baidupanUser:i,localBooks:u,baidupanBooks:c,recentBooks:d,getBooksByCategory:p,getCategoryById:b,loadBooks:C,saveBooks:w,addBook:O,updateBook:R,removeBook:B,getBookById:$,setCurrentBook:V,loadReadingProgress:Y,saveReadingProgress:ie,loadUserConfig:se,saveUserConfig:fe,updateUserConfig:ae,loadCategories:f,saveCategories:v,addCategory:m,updateCategory:D,deleteCategory:I,addBookToCategory:_,removeBookFromCategory:T,searchBooks:N,syncReadingProgress:Ie,syncReadingProgressFromBaidupan:Le,importEpubFile:Ue,importPdfFile:Ke,importTxtFile:He,importEbookFile:async U=>{var P;try{const W=(P=U.name.split(".").pop())==null?void 0:P.toLowerCase();if(!W)throw console.error(""),new Error("");switch(W){case"epub":return await Ue(U);case"pdf":return await Ke(U);case"txt":return await He(U);default:throw console.error(":",W),new Error(`: ${W}`)}}catch(W){return console.error(":",W),W instanceof Error&&(console.error(":",W.message),console.error(":",W.stack)),null}},uploadLocalBookToBaidupan:rt,downloadBlobFromBaidupan:We,downloadFromBaidupan:xe,listBaidupanFiles:Je,isBaidupanTokenValid:ue,syncCurrentBookProgress:ze,loadBaidupanBooks:Ge,fetchBaidupanUserInfo:Ne,uploadToBaidupanNew:Te,initialize:async()=>{await Promise.all([C(),se(),f()]);try{if(await ce()){const U=await We("/sync/config.json");if(U)try{const P=await U.text(),W=JSON.parse(P);if(W.config&&W.timestamp){const Q=await $e.getItem("userConfig")&&await $e.getItem("userConfigTimestamp")||0;W.timestamp>Q&&(console.log(""),n.value={...n.value,...W.config},await fe(),await $e.setItem("userConfigTimestamp",W.timestamp))}}catch(P){console.warn(":",P)}await Ge()}}catch(U){console.warn(":",U)}}}});export{Rt as a,Mt as e,ur as g,$e as l,dh as u};
