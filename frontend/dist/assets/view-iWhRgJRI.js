const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./epub-D6hO2MTQ.js","./epubcfi-CHOUELlF.js","./pdf-CBEMSWsZ.js","./index-DA789M3t.js","./index.CJgDW3gd.css"])))=>i.map(i=>d[i]);
import{I as p}from"./index-DA789M3t.js";import{fake as E,joinIndir as F,fromRange as C,parse as L,isCFI as S,toRange as O}from"./epubcfi-CHOUELlF.js";const R=n=>{let t=0;const e=s=>{if(s.id=t++,s.subitems)for(const i of s.subitems)e(i)};for(const s of n)e(s);return n},x=n=>n.map(t=>t.subitems?.length?[t,x(t.subitems)].flat():t).flat();class A{async init({toc:t,ids:e,splitHref:s,getFragment:i}){R(t);const r=x(t),o=new Map;for(const[a,h]of r.entries()){const[l,d]=await s(h?.href)??[],f={fragment:d,item:h};o.has(l)?o.get(l).items.push(f):o.set(l,{prev:r[a-1],items:[f]})}const c=new Map;for(const[a,h]of e.entries())o.has(h)?c.set(h,o.get(h)):c.set(h,c.get(e[a-1]));this.ids=e,this.map=c,this.getFragment=i}getProgress(t,e){if(!this.ids)return;const s=this.ids[t],i=this.map.get(s);if(!i)return null;const{prev:r,items:o}=i;if(!o)return r;if(!e||o.length===1&&!o[0].fragment)return o[0].item;const c=e.startContainer.getRootNode();for(const[a,{fragment:h}]of o.entries()){const l=this.getFragment(c,h);if(l&&e.comparePoint(l,0)>0)return o[a-1]?.item??r}return o[o.length-1].item}}class k{constructor(t,e,s){this.sizes=t.map(i=>i.linear!="no"&&i.size>0?i.size:0),this.sizePerLoc=e,this.sizePerTimeUnit=s,this.sizeTotal=this.sizes.reduce((i,r)=>i+r,0),this.sectionFractions=this.#e()}#e(){const{sizeTotal:t}=this,e=[0];let s=0;for(const i of this.sizes)e.push((s+=i)/t);return e}getProgress(t,e,s=0){const{sizes:i,sizePerLoc:r,sizePerTimeUnit:o,sizeTotal:c}=this,a=i[t]??0,l=i.slice(0,t).reduce((m,w)=>m+w,0)+e*a,d=l+s*a,f=c-l,u=(1-e)*a;return{fraction:d/c,section:{current:t,total:i.length},location:{current:Math.floor(l/r),next:Math.floor(d/r),total:Math.ceil(c/r)},time:{section:u/o,total:f/o}}}getSection(t){if(t<=0)return[0,0];if(t>=1)return[this.sizes.length-1,1];t=t+Number.EPSILON;const{sizeTotal:e}=this;let s=this.sectionFractions.findIndex(r=>r>t)-1;if(s<0)return[0,0];for(;!this.sizes[s];)s++;const i=(t-this.sectionFractions[s])/(this.sizes[s]/e);return[s,i]}}const g=n=>document.createElementNS("http://www.w3.org/2000/svg",n);class _{#e=g("svg");#t=new Map;constructor(){Object.assign(this.#e.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none"})}get element(){return this.#e}add(t,e,s,i){this.#t.has(t)&&this.remove(t),typeof e=="function"&&(e=e(this.#e.getRootNode()));const r=e.getClientRects(),o=s(r,i);this.#e.append(o),this.#t.set(t,{range:e,draw:s,options:i,element:o,rects:r})}remove(t){this.#t.has(t)&&(this.#e.removeChild(this.#t.get(t).element),this.#t.delete(t))}redraw(){for(const t of this.#t.values()){const{range:e,draw:s,options:i,element:r}=t;this.#e.removeChild(r);const o=e.getClientRects(),c=s(o,i);this.#e.append(c),t.element=c,t.rects=o}}hitTest({x:t,y:e}){const s=Array.from(this.#t.entries());for(let i=s.length-1;i>=0;i--){const[r,o]=s[i];for(const{left:c,top:a,right:h,bottom:l}of o.rects)if(a<=e&&c<=t&&l>e&&h>t)return[r,o.range]}return[]}static underline(t,e={}){const{color:s="red",width:i=2,writingMode:r}=e,o=g("g");if(o.setAttribute("fill",s),r==="vertical-rl"||r==="vertical-lr")for(const{right:c,top:a,height:h}of t){const l=g("rect");l.setAttribute("x",c-i),l.setAttribute("y",a),l.setAttribute("height",h),l.setAttribute("width",i),o.append(l)}else for(const{left:c,bottom:a,width:h}of t){const l=g("rect");l.setAttribute("x",c),l.setAttribute("y",a-i),l.setAttribute("height",i),l.setAttribute("width",h),o.append(l)}return o}static strikethrough(t,e={}){const{color:s="red",width:i=2,writingMode:r}=e,o=g("g");if(o.setAttribute("fill",s),r==="vertical-rl"||r==="vertical-lr")for(const{right:c,left:a,top:h,height:l}of t){const d=g("rect");d.setAttribute("x",(c+a)/2),d.setAttribute("y",h),d.setAttribute("height",l),d.setAttribute("width",i),o.append(d)}else for(const{left:c,top:a,bottom:h,width:l}of t){const d=g("rect");d.setAttribute("x",c),d.setAttribute("y",(a+h)/2),d.setAttribute("height",i),d.setAttribute("width",l),o.append(d)}return o}static squiggly(t,e={}){const{color:s="red",width:i=2,writingMode:r}=e,o=g("g");o.setAttribute("fill","none"),o.setAttribute("stroke",s),o.setAttribute("stroke-width",i);const c=i*1.5;if(r==="vertical-rl"||r==="vertical-lr")for(const{right:a,top:h,height:l}of t){const d=g("path"),f=Math.round(l/c/1.5),u=l/f,m=Array.from({length:f},(w,v)=>`l${v%2?-c:c} ${u}`).join("");d.setAttribute("d",`M${a} ${h}${m}`),o.append(d)}else for(const{left:a,bottom:h,width:l}of t){const d=g("path"),f=Math.round(l/c/1.5),u=l/f,m=Array.from({length:f},(w,v)=>`l${u} ${v%2?c:-c}`).join("");d.setAttribute("d",`M${a} ${h}${m}`),o.append(d)}return o}static highlight(t,e={}){const{color:s="red"}=e,i=g("g");i.setAttribute("fill",s),i.style.opacity="var(--overlayer-highlight-opacity, .3)",i.style.mixBlendMode="var(--overlayer-highlight-blend-mode, normal)";for(const{left:r,top:o,height:c,width:a}of t){const h=g("rect");h.setAttribute("x",r),h.setAttribute("y",o),h.setAttribute("height",c),h.setAttribute("width",a),i.append(h)}return i}static outline(t,e={}){const{color:s="red",width:i=3,radius:r=3}=e,o=g("g");o.setAttribute("fill","none"),o.setAttribute("stroke",s),o.setAttribute("stroke-width",i);for(const{left:c,top:a,height:h,width:l}of t){const d=g("rect");d.setAttribute("x",c),d.setAttribute("y",a),d.setAttribute("height",h),d.setAttribute("width",l),d.setAttribute("rx",r),o.append(d)}return o}static copyImage([t],e={}){const{src:s}=e,i=g("image"),{left:r,top:o,height:c,width:a}=t;return i.setAttribute("href",s),i.setAttribute("x",r),i.setAttribute("y",o),i.setAttribute("height",c),i.setAttribute("width",a),i}}const z=(n,t)=>{const e=[];for(let s=t.currentNode;s;s=t.nextNode()){const i=n.comparePoint(s,0);if(i===0)e.push(s);else if(i>0)break}return e},B=(n,t)=>{const e=[];for(let s=t.nextNode();s;s=t.nextNode())e.push(s);return e},D=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_CDATA_SECTION,N=n=>{if(n.nodeType===1){const t=n.tagName.toLowerCase();return t==="script"||t==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_ACCEPT},T=function*(n,t){const e=n.commonAncestorContainer??n.body??n,s=document.createTreeWalker(e,D,{acceptNode:N}),r=(n.commonAncestorContainer?z:B)(n,s),o=r.map(a=>a.nodeValue),c=(a,h,l,d)=>{const f=document.createRange();return f.setStart(r[a],h),f.setEnd(r[l],d),f};for(const a of t(o,c))yield a},y="foliate-search:",M=async n=>{const t=new Uint8Array(await n.slice(0,4).arrayBuffer());return t[0]===80&&t[1]===75&&t[2]===3&&t[3]===4},W=async n=>{const t=new Uint8Array(await n.slice(0,5).arrayBuffer());return t[0]===37&&t[1]===80&&t[2]===68&&t[3]===70&&t[4]===45},V=({name:n,type:t})=>t==="application/vnd.comicbook+zip"||n.endsWith(".cbz"),$=({name:n,type:t})=>t==="application/x-fictionbook+xml"||n.endsWith(".fb2"),j=({name:n,type:t})=>t==="application/x-zip-compressed-fb2"||n.endsWith(".fb2.zip")||n.endsWith(".fbz"),H=async n=>{const{configure:t,ZipReader:e,BlobReader:s,TextWriter:i,BlobWriter:r}=await p(async()=>{const{configure:u,ZipReader:m,BlobReader:w,TextWriter:v,BlobWriter:I}=await import("./zip-CGKXlQL7.js");return{configure:u,ZipReader:m,BlobReader:w,TextWriter:v,BlobWriter:I}},[],import.meta.url);t({useWebWorkers:!1});const c=await new e(new s(n)).getEntries(),a=new Map(c.map(u=>[u.filename,u])),h=u=>(m,...w)=>a.has(m)?u(a.get(m),...w):null,l=h(u=>u.getData(new i)),d=h((u,m)=>u.getData(new r(m)));return{entries:c,loadText:l,loadBlob:d,getSize:u=>a.get(u)?.uncompressedSize??0}},P=async n=>n.isFile?n:(await Promise.all(Array.from(await new Promise((t,e)=>n.createReader().readEntries(s=>t(s),s=>e(s))),P))).flat(),U=async n=>{const t=await P(n),e=await Promise.all(t.map(l=>new Promise((d,f)=>l.file(u=>d([u,l.fullPath]),u=>f(u))))),s=new Map(e.map(([l,d])=>[d.replace(n.fullPath+"/",""),l])),i=new TextDecoder,r=l=>l?i.decode(l):null,o=l=>s.get(l)?.arrayBuffer()??null;return{loadText:async l=>r(await o(l)),loadBlob:l=>s.get(l),getSize:l=>s.get(l)?.size??0}};class Z extends Error{}class G extends Error{}class J extends Error{}const K=async n=>{const t=await fetch(n);if(!t.ok)throw new Z(`${t.status} ${t.statusText}`,{cause:t});return new File([await t.blob()],new URL(t.url).pathname)},q=async n=>{typeof n=="string"&&(n=await K(n));let t;if(n.isDirectory){const e=await U(n),{EPUB:s}=await p(async()=>{const{EPUB:i}=await import("./epub-D6hO2MTQ.js");return{EPUB:i}},__vite__mapDeps([0,1]),import.meta.url);t=await new s(e).init()}else if(n.size)if(await M(n)){const e=await H(n);if(V(n)){const{makeComicBook:s}=await p(async()=>{const{makeComicBook:i}=await import("./comic-book-DhXwm17Z.js");return{makeComicBook:i}},[],import.meta.url);t=s(e,n)}else if(j(n)){const{makeFB2:s}=await p(async()=>{const{makeFB2:c}=await import("./fb2-C12VRWQn.js");return{makeFB2:c}},[],import.meta.url),{entries:i}=e,r=i.find(c=>c.filename.endsWith(".fb2")),o=await e.loadBlob((r??i[0]).filename);t=await s(o)}else{const{EPUB:s}=await p(async()=>{const{EPUB:i}=await import("./epub-D6hO2MTQ.js");return{EPUB:i}},__vite__mapDeps([0,1]),import.meta.url);t=await new s(e).init()}}else if(await W(n)){const{makePDF:e}=await p(async()=>{const{makePDF:s}=await import("./pdf-CBEMSWsZ.js");return{makePDF:s}},__vite__mapDeps([2,3,4]),import.meta.url);t=await e(n)}else{const{isMOBI:e,MOBI:s}=await p(async()=>{const{isMOBI:i,MOBI:r}=await import("./mobi-Du_U6_-5.js");return{isMOBI:i,MOBI:r}},[],import.meta.url);if(await e(n)){const i=await p(()=>import("./fflate-CtUkkcu7.js"),[],import.meta.url);t=await new s({unzlib:i.unzlibSync}).open(n)}else if($(n)){const{makeFB2:i}=await p(async()=>{const{makeFB2:r}=await import("./fb2-C12VRWQn.js");return{makeFB2:r}},[],import.meta.url);t=await i(n)}}else throw new G("File not found");if(!t)throw new J("File type not supported");return t};class b{#e;#t;#i;#s;constructor(t,e,s={}){this.#t=t,this.#i=e,this.#s=s,this.#s.hidden&&this.hide(),this.#t.addEventListener("mousemove",({screenX:i,screenY:r})=>{i===this.#s.x&&r===this.#s.y||(this.#s.x=i,this.#s.y=r,this.show(),this.#e&&clearTimeout(this.#e),e()&&(this.#e=setTimeout(this.hide.bind(this),1e3)))},!1)}cloneFor(t){return new b(t,this.#i,this.#s)}hide(){this.#t.style.cursor="none",this.#s.hidden=!0}show(){this.#t.style.removeProperty("cursor"),this.#s.hidden=!1}}class X extends EventTarget{#e=[];#t=-1;pushState(t){const e=this.#e[this.#t];e===t||e?.fraction&&e.fraction===t.fraction||(this.#e[++this.#t]=t,this.#e.length=this.#t+1,this.dispatchEvent(new Event("index-change")))}replaceState(t){const e=this.#t;this.#e[e]=t}back(){const t=this.#t;if(t<=0)return;const e={state:this.#e[t-1]};this.#t=t-1,this.dispatchEvent(new CustomEvent("popstate",{detail:e})),this.dispatchEvent(new Event("index-change"))}forward(){const t=this.#t;if(t>=this.#e.length-1)return;const e={state:this.#e[t+1]};this.#t=t+1,this.dispatchEvent(new CustomEvent("popstate",{detail:e})),this.dispatchEvent(new Event("index-change"))}get canGoBack(){return this.#t>0}get canGoForward(){return this.#t<this.#e.length-1}clear(){this.#e=[],this.#t=-1}}const Q=n=>{if(!n)return{};try{const t=Intl.getCanonicalLocales(n)[0],e=new Intl.Locale(t),s=["zh","ja","kr"].includes(e.language),i=(e.getTextInfo?.()??e.textInfo)?.direction;return{canonical:t,locale:e,isCJK:s,direction:i}}catch(t){return console.warn(t),{}}};class Y extends HTMLElement{#e=this.attachShadow({mode:"closed"});#t;#i;#s;#r=new Map;#a=new b(this,()=>this.hasAttribute("autohide-cursor"));isFixedLayout=!1;lastLocation;history=new X;constructor(){super(),this.history.addEventListener("popstate",({detail:t})=>{const e=this.resolveNavigation(t.state);this.renderer.goTo(e)})}async open(t){if((typeof t=="string"||typeof t.arrayBuffer=="function"||t.isDirectory)&&(t=await q(t)),this.book=t,this.language=Q(t.metadata?.language),t.splitTOCHref&&t.getTOCFragment){const e=t.sections.map(r=>r.id);this.#t=new k(t.sections,1500,1600);const s=t.splitTOCHref.bind(t),i=t.getTOCFragment.bind(t);this.#i=new A,await this.#i.init({toc:t.toc??[],ids:e,splitHref:s,getFragment:i}),this.#s=new A,await this.#s.init({toc:t.pageList??[],ids:e,splitHref:s,getFragment:i})}if(this.isFixedLayout=this.book.rendition?.layout==="pre-paginated",this.isFixedLayout?(await p(()=>import("./fixed-layout-BBeLjbdH.js"),[],import.meta.url),this.renderer=document.createElement("foliate-fxl")):(await p(()=>import("./paginator-DE74fLq0.js"),[],import.meta.url),this.renderer=document.createElement("foliate-paginator")),this.renderer.setAttribute("exportparts","head,foot,filter"),this.renderer.addEventListener("load",e=>this.#l(e.detail)),this.renderer.addEventListener("relocate",e=>this.#c(e.detail)),this.renderer.addEventListener("create-overlayer",e=>e.detail.attach(this.#d(e.detail))),this.renderer.open(t),this.#e.append(this.renderer),t.sections.some(e=>e.mediaOverlay)){const e=t.media.activeClass,s=t.media.playbackActiveClass;this.mediaOverlay=t.getMediaOverlay();let i;this.mediaOverlay.addEventListener("highlight",r=>{const o=this.resolveNavigation(r.detail.text);this.renderer.goTo(o).then(()=>{const{doc:c}=this.renderer.getContents().find(h=>h.index=o.index),a=o.anchor(c);a.classList.add(e),s&&a.ownerDocument.documentElement.classList.add(s),i=new WeakRef(a)})}),this.mediaOverlay.addEventListener("unhighlight",()=>{const r=i?.deref();r&&(r.classList.remove(e),s&&r.ownerDocument.documentElement.classList.remove(s))})}}close(){this.renderer?.destroy(),this.renderer?.remove(),this.#t=null,this.#i=null,this.#s=null,this.#r=new Map,this.lastLocation=null,this.history.clear(),this.tts=null,this.mediaOverlay=null}goToTextStart(){return this.goTo(this.book.landmarks?.find(t=>t.type.includes("bodymatter")||t.type.includes("text"))?.href??this.book.sections.findIndex(t=>t.linear!=="no"))}async init({lastLocation:t,showTextStart:e}){const s=t?this.resolveNavigation(t):null;s?(await this.renderer.goTo(s),this.history.pushState(t)):e?await this.goToTextStart():(this.history.pushState(0),await this.next())}#o(t,e,s){return this.dispatchEvent(new CustomEvent(t,{detail:e,cancelable:s}))}#c({reason:t,range:e,index:s,fraction:i,size:r}){const o=this.#t?.getProgress(s,i,r)??{},c=this.#i?.getProgress(s,e),a=this.#s?.getProgress(s,e),h=this.getCFI(s,e);this.lastLocation={...o,tocItem:c,pageItem:a,cfi:h,range:e},(t==="snap"||t==="page"||t==="scroll")&&this.history.replaceState(h),this.#o("relocate",this.lastLocation)}#l({doc:t,index:e}){t.documentElement.lang||=this.language.canonical??"",this.language.isCJK||(t.documentElement.dir||=this.language.direction??""),this.#h(t,e),this.#a.cloneFor(t.documentElement),this.#o("load",{doc:t,index:e})}#h(t,e){const{book:s}=this,i=s.sections[e];t.addEventListener("click",r=>{const o=r.target.closest("a[href]");if(!o)return;r.preventDefault();const c=o.getAttribute("href"),a=i?.resolveHref?.(c)??c;s?.isExternal?.(a)?Promise.resolve(this.#o("external-link",{a:o,href:a},!0)).then(h=>h?globalThis.open(a,"_blank"):null).catch(h=>console.error(h)):Promise.resolve(this.#o("link",{a:o,href:a},!0)).then(h=>h?this.goTo(a):null).catch(h=>console.error(h))})}async addAnnotation(t,e){const{value:s}=t;if(s.startsWith(y)){const a=s.replace(y,""),{index:h,anchor:l}=await this.resolveNavigation(a),d=this.#n(h);if(d){const{overlayer:f,doc:u}=d;if(e){f.remove(s);return}const m=u?l(u):l;f.add(s,m,_.outline)}return}const{index:i,anchor:r}=await this.resolveNavigation(s),o=this.#n(i);if(o){const{overlayer:a,doc:h}=o;if(a.remove(s),!e){const l=h?r(h):r,d=(f,u)=>a.add(s,l,f,u);this.#o("draw-annotation",{draw:d,annotation:t,doc:h,range:l})}}const c=this.#i.getProgress(i)?.label??"";return{index:i,label:c}}deleteAnnotation(t){return this.addAnnotation(t,!0)}#n(t){return this.renderer.getContents().find(e=>e.index===t&&e.overlayer)}#d({doc:t,index:e}){const s=new _;t.addEventListener("click",r=>{const[o,c]=s.hitTest(r);o&&!o.startsWith(y)&&this.#o("show-annotation",{value:o,index:e,range:c})},!1);const i=this.#r.get(e);if(i)for(const r of i)this.addAnnotation(r);return this.#o("create-overlay",{index:e}),s}async showAnnotation(t){const{value:e}=t,s=await this.goTo(e);if(s){const{index:i,anchor:r}=s,{doc:o}=this.#n(i),c=r(o);this.#o("show-annotation",{value:e,index:i,range:c})}}getCFI(t,e){const s=this.book.sections[t].cfi??E.fromIndex(t);return e?F(s,C(e)):s}resolveCFI(t){if(this.book.resolveCFI)return this.book.resolveCFI(t);{const e=L(t);return{index:E.toIndex((e.parent??e).shift()),anchor:r=>O(r,e)}}}resolveNavigation(t){try{if(typeof t=="number")return{index:t};if(typeof t.fraction=="number"){const[e,s]=this.#t.getSection(t.fraction);return{index:e,anchor:s}}return S.test(t)?this.resolveCFI(t):this.book.resolveHref(t)}catch(e){console.error(e),console.error(`Could not resolve target ${t}`)}}async goTo(t){const e=this.resolveNavigation(t);try{return await this.renderer.goTo(e),this.history.pushState(t),e}catch(s){console.error(s),console.error(`Could not go to ${t}`)}}async goToFraction(t){const[e,s]=this.#t.getSection(t);await this.renderer.goTo({index:e,anchor:s}),this.history.pushState({fraction:t})}async select(t){try{const e=await this.resolveNavigation(t);await this.renderer.goTo({...e,select:!0}),this.history.pushState(t)}catch(e){console.error(e),console.error(`Could not go to ${t}`)}}deselect(){for(const{doc:t}of this.renderer.getContents())t.defaultView.getSelection().removeAllRanges()}getSectionFractions(){return(this.#t?.sectionFractions??[]).map(t=>t+Number.EPSILON)}getProgressOf(t,e){const s=this.#i?.getProgress(t,e),i=this.#s?.getProgress(t,e);return{tocItem:s,pageItem:i}}async getTOCItemOf(t){try{const{index:e,anchor:s}=await this.resolveNavigation(t),i=await this.book.sections[e].createDocument(),r=s(i),o=r instanceof Range,c=o?r:i.createRange();return o||c.selectNodeContents(r),this.#i.getProgress(e,c)}catch(e){console.error(e),console.error(`Could not get ${t}`)}}async prev(t){await this.renderer.prev(t)}async next(t){await this.renderer.next(t)}goLeft(){return this.book.dir==="rtl"?this.next():this.prev()}goRight(){return this.book.dir==="rtl"?this.prev():this.next()}async*#u(t,e,s){const i=await this.book.sections[s].createDocument();for(const{range:r,excerpt:o}of t(i,e))yield{cfi:this.getCFI(s,r),excerpt:o}}async*#f(t,e){const{sections:s}=this.book;for(const[i,{createDocument:r}]of s.entries()){if(!r)continue;const o=await r(),c=Array.from(t(o,e),({range:h,excerpt:l})=>({cfi:this.getCFI(i,h),excerpt:l}));yield{progress:(i+1)/s.length},c.length&&(yield{index:i,subitems:c})}}async*search(t){this.clearSearch();const{searchMatcher:e}=await p(async()=>{const{searchMatcher:a}=await import("./search-D7qEUpRP.js");return{searchMatcher:a}},[],import.meta.url),{query:s,index:i}=t,r=e(T,{defaultLocale:this.language,...t}),o=i!=null?this.#u(r,s,i):this.#f(r,s),c=[];this.#r.set(i,c);for await(const a of o)if(a.subitems){const h=a.subitems.map(({cfi:l})=>({value:y+l}));this.#r.set(a.index,h);for(const l of h)this.addAnnotation(l);yield{label:this.#i.getProgress(a.index)?.label??"",subitems:a.subitems}}else{if(a.cfi){const h={value:y+a.cfi};c.push(h),this.addAnnotation(h)}yield a}yield"done"}clearSearch(){for(const t of this.#r.values())for(const e of t)this.deleteAnnotation(e);this.#r.clear()}async initTTS(){const t=this.renderer.getContents()[0].doc;if(this.tts&&this.tts.doc===t)return;const{TTS:e}=await p(async()=>{const{TTS:s}=await import("./tts-DB8Rp_Zw.js");return{TTS:s}},[],import.meta.url);this.tts=new e(t,T,s=>this.renderer.scrollToAnchor(s,!0))}startMediaOverlay(){const{index:t}=this.renderer.getContents()[0];return this.mediaOverlay.start(t)}}customElements.define("foliate-view",Y);export{G as NotFoundError,Z as ResponseError,J as UnsupportedTypeError,Y as View,q as makeBook};
